"use strict";(self.webpackChunkangular_tyqoon_client=self.webpackChunkangular_tyqoon_client||[]).push([[5812],{83661:(C,v,e)=>{e.d(v,{g:()=>Z});var t=e(15861),g=e(5963),a=e(82722),x=e(49808),f=e(24837),p=e(95133),M=e(54463),P=e(36895),O=e(44466),_=e(59809),m=e(5565),l=e(18110),D=e(7507),o=e(94650),n=e(94830),S=e(56889),B=e(23284),T=e(90147);function A(d,h){if(1&d&&o._UZ(0,"app-product-card",6),2&d){const s=h.$implicit,r=o.oxw().ngLet,u=o.oxw().ngLet,i=o.oxw().ngLet;o.Q6J("product",s)("isBiddingMode",!!r)("canLaunchPool",!!i)("isLogin",!!u)}}function I(d,h){1&d&&o._UZ(0,"app-product-card-skeleton",8)}const b=function(){return[]};function y(d,h){if(1&d&&(o.ynx(0),o.YNc(1,I,1,0,"app-product-card-skeleton",7),o.BQk()),2&d){const s=o.oxw(4);o.xp6(1),o.Q6J("ngForOf",o.DdM(2,b).constructor(s.pageSize).fill(1))("ngForTrackBy",s.trackByFn2)}}function U(d,h){if(1&d&&(o.TgZ(0,"div",3),o.YNc(1,A,1,4,"app-product-card",4),o.YNc(2,y,2,3,"ng-container",5),o.qZA()),2&d){const s=o.oxw(3);o.xp6(1),o.Q6J("ngForOf",s.products)("ngForTrackBy",s.trackByFn),o.xp6(1),o.Q6J("ngIf",s.isLoading&&!s.products.length)}}function R(d,h){if(1&d&&(o.TgZ(0,"div"),o.YNc(1,U,3,3,"div",2),o.ALo(2,"async"),o.qZA()),2&d){const s=o.oxw(2);o.xp6(1),o.Q6J("ngLet",o.lcZ(2,1,s.biddingService.isBiddingMode$))}}function w(d,h){if(1&d&&(o.ynx(0),o.YNc(1,R,3,3,"div",0),o.ALo(2,"async"),o.TgZ(3,"a",1),o._uU(4),o.ALo(5,"translate"),o.qZA(),o.BQk()),2&d){const s=o.oxw();o.xp6(1),o.Q6J("ngLet",o.lcZ(2,3,s.userService.userInfo$)),o.xp6(2),o.Q6J("routerLink","product/search"),o.xp6(1),o.hij(" ",o.lcZ(5,5,"see-more")," ")}}let Z=(()=>{class d extends m.V{constructor(s,r,u){super(),this.userService=s,this.biddingService=r,this.cdr=u,this.additionalParams={},this.isSSR=!1,this.biddingProductsSortOrder=0,this.pageSize=18,this.page=-1,this.isLoading=!1,this.total=0,this.products=[]}ngOnInit(){!this.isSSR&&f.Z.isServer?this.isLoading=!0:(this.page=0,this.total=0,this.products=[],this.fetchData(),this.initPoll())}ngOnDestroy(){super.ngOnDestroy(),this.stopPoll()}initPoll(){f.Z.isBrowser&&(this.stopPoll(),this.pollSubscription=(0,g.H)(1e4,1e4).pipe((0,a.R)(this.destroyStream$)).subscribe(()=>{this.biddingService.isBiddingInProgress||this.fetchData()}))}stopPoll(){this.pollSubscription&&this.pollSubscription.unsubscribe()}fetchData(){var s=this;return(0,t.Z)(function*(){if(console.log("Fetch Recommended Products"),!s.isLoading){s.isLoading=!0;const r=yield(0,x.n)(s.biddingService.getProductsWithPoolInfo({page:s.page,rows:s.pageSize,sortType:s.biddingProductsSortOrder,isRecommended:!0,...s.additionalParams}));r.rows=(0,l.DI)(r.rows||[]),s.biddingService.isBiddingInProgress||(s.products=[...r.rows]),s.total=r.total,s.isLoading=!1}})()}clear(){this.page=0,this.isLoading=!1,this.total=0,this.products=[]}trackByFn(s,r){return r.id}trackByFn2(s){return s}}return d.\u0275fac=function(s){return new(s||d)(o.Y36(n.K),o.Y36(S.g),o.Y36(o.sBO))},d.\u0275cmp=o.Xpm({type:d,selectors:[["app-bidding-products-list"]],inputs:{additionalParams:"additionalParams",isSSR:"isSSR",biddingProductsSortOrder:"biddingProductsSortOrder",pageSize:"pageSize"},standalone:!0,features:[o.qOj,o.jDz],decls:2,vars:3,consts:[[4,"ngLet"],[1,"px-6","py-1","capitalize","mx-auto","mt-4","mb-2","see-more","block","w-fit","border","border-solid","rounded-lg","text-2xl","text-center","font-medium","text-white",3,"routerLink"],["class","grid grid-cols-2 xs:grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-x-2 gap-y-6",4,"ngLet"],[1,"grid","grid-cols-2","xs:grid-cols-3","sm:grid-cols-4","md:grid-cols-5","lg:grid-cols-6","gap-x-2","gap-y-6"],["class","block",3,"product","isBiddingMode","canLaunchPool","isLogin",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"block",3,"product","isBiddingMode","canLaunchPool","isLogin"],["class","block",4,"ngFor","ngForOf","ngForTrackBy"],[1,"block"]],template:function(s,r){1&s&&(o.YNc(0,w,6,7,"ng-container",0),o.ALo(1,"async")),2&s&&o.Q6J("ngLet",o.lcZ(1,1,r.biddingService.canLaunchPool$))},dependencies:[M.aw,M.X$,P.ez,P.sg,P.O5,P.Ov,p.Pc,p.Fo,O.m,B.Y,T.h,_.I,D.Bz,D.yS],styles:[".see-more[_ngcontent-%COMP%]{background:linear-gradient(to right,#8467ff 0%,#eb00ff 100%);border-color:#9d2ec3;min-width:160px}.see-more[_ngcontent-%COMP%]:hover{color:#fff;background:linear-gradient(to right,#7454ff 0%,#bb00cb 100%)}"]}),d})()},69158:(C,v,e)=>{e.d(v,{M:()=>O});var t=e(94650),g=e(36895),a=e(95133),x=e(7507),f=e(54463);const p=function(){return["/product","detail"]},M=function(_,m){return{id:_,poolId:m}};function P(_,m){if(1&_&&(t.TgZ(0,"a",1)(1,"div",2)(2,"div",3),t._UZ(3,"img",4),t.qZA(),t.TgZ(4,"div",5)(5,"div",6),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",7)(9,"div",8),t._UZ(10,"img",9)(11,"img",10),t.qZA(),t.TgZ(12,"div",11),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"span",12),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",13),t._UZ(19,"img",14),t.TgZ(20,"div",15),t._uU(21),t.qZA()()()()()),2&_){const l=t.oxw();t.Q6J("routerLink",t.DdM(14,p))("queryParams",t.WLB(15,M,l.winner.productId,l.winner.poolId)),t.xp6(3),t.Q6J("src",l.winner.productImage,t.LSH),t.xp6(3),t.hij(" ",t.lcZ(7,8,l.winner.productName)," "),t.xp6(4),t.Q6J("src",l.winner.winnerAvatar,t.LSH),t.xp6(3),t.hij(" ",t.lcZ(14,10,l.winner.winnerId)," "),t.xp6(3),t.Oqu(t.lcZ(17,12,"pool-winner")),t.xp6(5),t.hij(" ",l.winner.ticketId," ")}}let O=(()=>{class _{constructor(){}}return _.\u0275fac=function(l){return new(l||_)},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-bidding-winner-card"]],inputs:{winner:"winner"},decls:1,vars:1,consts:[["class","winner-card rounded-xl flex border border-slate-300 text-xs items-center cursor-pointer",3,"routerLink","queryParams",4,"ngIf"],[1,"winner-card","rounded-xl","flex","border","border-slate-300","text-xs","items-center","cursor-pointer",3,"routerLink","queryParams"],[1,"flex","gap-1","w-full"],[1,"product","ml-1.5","mr-1","rounded-xl"],[1,"object-cover","rounded-lg",3,"src"],[1,"winner-info","flex","flex-col","justify-start","items-start","gap-1"],[1,"product-name","font-medium","text-left","pr-1.5","mb-0.5"],[1,"font-medium","flex","flex-nowrap","items-center","mt-px"],[1,"relative"],[1,"object-cover","rounded-full","avatar",3,"src"],["src","assets/images/golden-crown-100px.png","srcset","assets/images/golden-crown-100px.png 1x, assets/images/golden-crown-250px.png 2x",1,"absolute","crown"],[1,"truncate","ml-1"],[1,"tag","capitalize",2,"--color","#FFDC3F"],[1,"font-medium","flex","flex-nowrap","items-center"],["src","assets/images/ticket.png",1,"ticket-image","object-cover"],[1,"ticket","truncate","text-left","ml-1"]],template:function(l,D){1&l&&t.YNc(0,P,22,18,"a",0),2&l&&t.Q6J("ngIf",D.winner)},dependencies:[g.O5,a.Fo,x.yS,f.X$],styles:['.winner-card[_ngcontent-%COMP%]{height:100px;background-color:#f5f8f9;color:#333}.winner-card[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:88px;width:88px!important;height:88px}.winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%], .winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .ticket-image[_ngcontent-%COMP%]{width:20px!important;height:20px;min-width:20px}.winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .ticket[_ngcontent-%COMP%]{width:130px}.winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:break-spaces}.winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .crown[_ngcontent-%COMP%]{top:-9px;width:13px;left:0;right:0;margin-left:auto;margin-right:auto}.winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{display:inline-block;z-index:1;text-align:center;color:#000;height:20px;position:relative;border-left:none;background-color:var(--color);min-width:50px;margin-left:12px;padding-left:6px;border-radius:0 4px 4px 0;font-size:14px;line-height:20px;padding-right:6px;transform:scale(.9)}.winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]:before{content:"";z-index:-1;position:absolute;top:3px;left:-7px;width:14px;height:14px;background-color:var(--color);border-right:none;border-top:none;transform:rotate(45deg)}']}),_})()},85898:(C,v,e)=>{e.d(v,{b:()=>s});var t=e(15861),g=e(77579),a=e(82722),x=e(59468),f=e(49808),p=e(24837),M=e(95133),P=e(54463),O=e(36895),_=e(44466),m=e(59809),l=e(5565),D=e(18110),o=e(7507),n=e(94650),S=e(35482),B=e(94830),T=e(56889),A=e(23284),I=e(90147);function b(r,u){if(1&r&&n._UZ(0,"app-product-card",6),2&r){const i=u.$implicit,c=n.oxw().ngLet,L=n.oxw().ngLet,E=n.oxw().ngLet;n.Q6J("product",i)("isBiddingMode",!!c)("canLaunchPool",!!E)("isLogin",!!L)}}function y(r,u){1&r&&n._UZ(0,"app-product-card-skeleton",8)}const U=function(){return[]};function R(r,u){if(1&r&&(n.ynx(0),n.YNc(1,y,1,0,"app-product-card-skeleton",7),n.BQk()),2&r){const i=n.oxw(4);n.xp6(1),n.Q6J("ngForOf",n.DdM(2,U).constructor(i.pageSize).fill(1))("ngForTrackBy",i.trackByFn2)}}function w(r,u){if(1&r&&(n.TgZ(0,"div",3),n.YNc(1,b,1,4,"app-product-card",4),n.YNc(2,R,2,3,"ng-container",5),n.qZA()),2&r){const i=n.oxw(3);n.xp6(1),n.Q6J("ngForOf",i.products)("ngForTrackBy",i.trackByFn),n.xp6(1),n.Q6J("ngIf",i.isLoading)}}function Z(r,u){if(1&r&&(n.TgZ(0,"div"),n.YNc(1,w,3,3,"div",2),n.ALo(2,"async"),n.qZA()),2&r){const i=n.oxw(2);n.xp6(1),n.Q6J("ngLet",n.lcZ(2,1,i.biddingService.isBiddingMode$))}}function d(r,u){1&r&&(n.TgZ(0,"a",9),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&r&&(n.Q6J("routerLink","product/search"),n.xp6(1),n.hij(" ",n.lcZ(2,2,"see-more")," "))}function h(r,u){if(1&r&&(n.ynx(0),n.YNc(1,Z,3,3,"div",0),n.ALo(2,"async"),n.YNc(3,d,3,4,"a",1),n.BQk()),2&r){const i=n.oxw();n.xp6(1),n.Q6J("ngLet",n.lcZ(2,2,i.userService.userInfo$)),n.xp6(2),n.Q6J("ngIf",i.isBiddingMode)}}let s=(()=>{class r extends l.V{constructor(i,c,L,E){super(),this.productService=i,this.userService=c,this.biddingService=L,this.cdr=E,this.offsetScroll=2e3,this.additionalParams={},this.isSSR=!1,this.biddingProductsSortOrder=0,this.shoppingModePageSize=20,this.biddingModePageSize=18,this.throttleScroll=new g.x,this.pageSize=20,this.page=-1,this.isLoading=!1,this.total=0,this.products=[],this.isBiddingMode=!1,this.scrollActive$=new g.x}ngOnInit(){console.log(8787878,this.biddingProductsSortOrder),!this.isSSR&&p.Z.isServer?this.isLoading=!0:this.biddingService.isBiddingMode$.pipe((0,a.R)(this.destroyStream$)).subscribe(i=>{this.isBiddingMode=i,this.page=-1,this.products=[],this.pageSize=this.isBiddingMode?this.biddingModePageSize:this.shoppingModePageSize,this.cdr.detectChanges(),this.refreshProducts(),this.initInfiniteScrolling()})}ngOnDestroy(){super.ngOnDestroy(),this.clearSubscriptions()}clearSubscriptions(){this.scrollActive$?.next(!1),this.scrollActive$?.complete()}ngAfterViewInit(){p.Z.isServer||this.initInfiniteScrolling()}initInfiniteScrolling(){var i=this;return(0,t.Z)(function*(){i.clearSubscriptions(),i.scrollContainer&&!i.isBiddingMode&&(i.scrollActive$=new g.x,i.scrollElement=yield i.scrollContainer.getScrollElement(),i.scrollContainer.ionScroll.pipe((0,a.R)(i.scrollActive$)).subscribe(c=>{i.scrollElement.scrollHeight-c.detail.scrollTop<i.offsetScroll&&i.throttleScroll.next(1)}),i.throttleScroll.pipe((0,x.p)(300),(0,a.R)(i.scrollActive$)).subscribe(()=>{i.fetchData()}))})()}ngOnChanges(i){}refreshProducts(){this.page=-1,this.total=0,this.products=[],this.fetchData()}fetchData(i=null){var c=this;return(0,t.Z)(function*(){const L=i??c.page+1;if(!c.isLoading&&(0===L||c.products.length<c.total)){c.isLoading=!0,c.page=L,c.cdr.markForCheck();const E=c.isBiddingMode?yield(0,f.n)(c.biddingService.getProductsWithPoolInfo({page:c.page,rows:c.pageSize,sortType:c.biddingProductsSortOrder,isRecommended:!0,...c.additionalParams})):yield(0,f.n)(c.productService.getProductsByMetaParamsV2({page:c.page,rows:c.pageSize,traceId:c.userService.traceId,isRecommended:!0,...c.additionalParams}));E.rows=(0,D.DI)(E.rows||[]),c.products=[...c.products,...E.rows||[]],c.total=E.total,c.isLoading=!1,c.cdr.markForCheck()}})()}clear(){this.page=-1,this.isLoading=!1,this.total=0,this.products=[]}trackByFn(i,c){return c.id}trackByFn2(i){return i}}return r.\u0275fac=function(i){return new(i||r)(n.Y36(S.s),n.Y36(B.K),n.Y36(T.g),n.Y36(n.sBO))},r.\u0275cmp=n.Xpm({type:r,selectors:[["app-products-infinite-scroll"]],inputs:{scrollContainer:"scrollContainer",offsetScroll:"offsetScroll",additionalParams:"additionalParams",isSSR:"isSSR",biddingProductsSortOrder:"biddingProductsSortOrder",shoppingModePageSize:"shoppingModePageSize",biddingModePageSize:"biddingModePageSize"},standalone:!0,features:[n.qOj,n.TTD,n.jDz],decls:2,vars:3,consts:[[4,"ngLet"],["class","px-6 py-1 capitalize mx-auto mt-4 mb-2 see-more block w-fit border border-solid rounded-lg text-2xl text-center font-medium text-white",3,"routerLink",4,"ngIf"],["class","grid grid-cols-2 xs:grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-x-2 gap-y-6",4,"ngLet"],[1,"grid","grid-cols-2","xs:grid-cols-3","sm:grid-cols-4","md:grid-cols-5","lg:grid-cols-6","gap-x-2","gap-y-6"],["class","block",3,"product","isBiddingMode","canLaunchPool","isLogin",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"block",3,"product","isBiddingMode","canLaunchPool","isLogin"],["class","block",4,"ngFor","ngForOf","ngForTrackBy"],[1,"block"],[1,"px-6","py-1","capitalize","mx-auto","mt-4","mb-2","see-more","block","w-fit","border","border-solid","rounded-lg","text-2xl","text-center","font-medium","text-white",3,"routerLink"]],template:function(i,c){1&i&&(n.YNc(0,h,4,4,"ng-container",0),n.ALo(1,"async")),2&i&&n.Q6J("ngLet",n.lcZ(1,1,c.biddingService.canLaunchPool$))},dependencies:[P.aw,P.X$,O.ez,O.sg,O.O5,O.Ov,M.Pc,M.Fo,_.m,A.Y,I.h,m.I,o.Bz,o.yS],styles:[".see-more[_ngcontent-%COMP%]{background:linear-gradient(to right,#8467ff 0%,#eb00ff 100%);border-color:#9d2ec3;min-width:160px}.see-more[_ngcontent-%COMP%]:hover{color:#fff;background:linear-gradient(to right,#7454ff 0%,#bb00cb 100%)}"],changeDetection:0}),r})()},59809:(C,v,e)=>{e.d(v,{I:()=>g});var t=e(94650);let g=(()=>{class a{}return a.\u0275fac=function(f){return new(f||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-product-card-skeleton"]],standalone:!0,features:[t.jDz],decls:9,vars:0,consts:[[1,"cursor-pointer","flex","flex-col","w-full","max-w-[246px]","lg:max-w-[220px]","xl:max-w-[245px]"],[1,"relative","w-full","mb-2",2,"padding-top","100%"],[1,"absolute","inset-0","pulSate","rounded-lg"],[1,"product-title","truncate","mb-1","pulSate","text-sm",2,"letter-spacing","20px"],[1,"text-xs","leading-3","text-center","pulSate",2,"letter-spacing","20px"],[1,"text-base","text-center","pulSate",2,"letter-spacing","20px"]],template:function(f,p){1&f&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.qZA(),t.TgZ(3,"p",3),t._uU(4," \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),t.qZA(),t.TgZ(5,"p",4),t._uU(6," \xa0\xa0 "),t.qZA(),t.TgZ(7,"p",5),t._uU(8," \xa0\xa0 "),t.qZA()())}}),a})()},70957:(C,v,e)=>{e.d(v,{V:()=>f});var t=e(36895),g=e(94650),a=e(7507),x=e(95133);let f=(()=>{class p{constructor(P,O,_){this.content=P,this.router=O,this.platformId=_,(0,t.NF)(this.platformId)&&(this.subscription=this.router.events.subscribe(m=>{m instanceof a.m2&&this.content.scrollToTop(500)}))}ngOnDestroy(){this.subscription?.unsubscribe()}}return p.\u0275fac=function(P){return new(P||p)(g.Y36(x.W2),g.Y36(a.F0),g.Y36(g.Lbi))},p.\u0275dir=g.lG2({type:p,selectors:[["","scrollTop",""]]}),p})()}}]);