"use strict";(self.webpackChunkangular_tyqoon_client=self.webpackChunkangular_tyqoon_client||[]).push([[5968],{80164:(C,h,i)=>{i.d(h,{Z:()=>S});var n=i(92340),l=i(54004),u=i(98274),g=i(80529),m=i(94830);let S=(()=>{class o{constructor(s,e){this.http=s,this.userService=e}QueryByBusiness(s,e){return this.http.get(`${n.N.BASE_URL}/payment/QueryByBusiness?businessType=${s}&businessId=${e}`)}cancel(s){return this.http.post(`${n.N.BASE_URL}/payment/cancel`,s)}queryPlatformList(){return this.http.get(`${n.N.BASE_URL}/payment/queryPlatformList`)}queryPaymentOrder(s){return this.http.get(`${n.N.BASE_URL}/payment/queryPaymentOrder?id=${s}`)}getShippingAddress(){return this.http.get(`${n.N.BASE_URL}/user/receiver/getReceiverAddress?page=0&rows=30`)}getShippingFee(s,e,a){return this.http.get(`${n.N.BASE_URL}/shop/product/getFreight`,{params:{receiverId:s,skuId:e,quantity:a}})}getAreaCanBuy(s,e,a){return this.http.get(`${n.N.BASE_URL}/shop/product/getDeliverable`,{params:{receiverId:s,skuId:e,quantity:a}})}getAddressDetail(s){return this.http.get(`${n.N.BASE_URL}/user/receiver/getReceiverAddressDetails`,{params:{id:s}}).pipe((0,l.U)(e=>(e.data.areaDetails=e.data.areaDetails?.map(a=>({label:a.label,value:a.value.toString()})),e)))}getAreaData(s){return this.http.get(`${n.N.BASE_URL}/user/receiver/getAreaData`,{params:{parentId:s||""}})}saveAddress(s){return this.http.post(`${n.N.BASE_URL}/user/receiver/updateReceiverAddress`,s)}createNewAddress(s){return this.http.post(`${n.N.BASE_URL}/user/receiver/saveReceiverAddress`,s)}getOrderSum(s){return this.http.post(`${n.N.BASE_URL}/user/order/getOrderAmount`,s).pipe((0,l.U)(({data:e})=>({originalPrice:parseFloat(e.originalPrice),toTalTQC:parseFloat(e.toTalTQC),totalSumDiscount:parseFloat(e.totalSumDiscount),totalSumFreight:parseFloat(e.totalSumFreight),totalSumPoint:parseFloat(e.totalSumPoint),totalSumPrice:parseFloat(e.totalSumPrice),totalSumQuantity:e.totalSumQuantity,isIdentify:e.isIdentify,isOpenUpDomesticPaymentMethods:e.isOpenUpDomesticPaymentMethods})))}getExpress(s,e){return this.http.get(`${n.N.BASE_URL}/user/order/getExpress?orderId=${s}&expressNum=${e}`).pipe((0,l.U)(a=>a.data))}lockOrder(s){return this.http.post(`${n.N.BASE_URL}/user/order/lockOrder`,s)}queryLockOrder(s){return this.http.get(`${n.N.BASE_URL}/user/order/queryLockOrder?sn=${s}`)}submitLockOrder(s){return this.http.post(`${n.N.BASE_URL}/user/order/submitLockOrder`,s)}querySubmitOrder(s){return this.http.get(`${n.N.BASE_URL}/user/order/querySubmitOrder?sn=${s}`)}productToOrder(s){return this.http.post(`${n.N.BASE_URL}/user/order/productToOrder`,s)}balancePayment(s){return this.http.post(`${n.N.BASE_URL}/user/order/balancePayment`,s)}queryExchangeCodeAmount(s){return this.http.get(`${n.N.BASE_URL}/user/order/queryExchangeCodeAmount?code=${s}`).pipe((0,l.U)(e=>e.data))}exchangeCode(s){return this.http.post(`${n.N.BASE_URL}/user/order/exchangeCode`,s)}}return o.\u0275fac=function(s){return new(s||o)(u.LFG(g.eN),u.LFG(m.K))},o.\u0275prov=u.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},94045:(C,h,i)=>{i.r(h),i.d(h,{ShippingAddressModule:()=>L});var n=i(36895),l=i(95133),u=i(44466),g=i(54463),m=i(24006),f=i(84787),S=i(15861),o=i(37340),A=i(82722),s=i(5565),e=i(98274),a=i(92340),x=i(54004),O=i(80529);let B=(()=>{class r{constructor(t){this.http=t}getShippingAddresses(t){return this.http.get(`${a.N.BASE_URL}/user/receiver/getReceiverAddress`,{params:t}).pipe((0,x.U)(({data:d})=>d))}getShippingAddressDetails(t){return this.http.get(`${a.N.BASE_URL}/user/receiver/getReceiverAddressDetails`,{params:t}).pipe((0,x.U)(({data:d})=>d))}deleteShippingAddress(t){return this.http.post(`${a.N.BASE_URL}/user/receiver/delReceiverAddress`,t)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(O.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),E=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-remove-icon"]],decls:2,vars:0,consts:[["viewBox","64 64 896 896","focusable","false","fill","currentColor","width","1em","height","1em","data-icon","delete","aria-hidden","true"],["d","M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"]],template:function(t,d){1&t&&(e.O4$(),e.TgZ(0,"svg",0),e._UZ(1,"path",1),e.qZA())},encapsulation:2}),r})();var _=i(39172);function T(r,p){1&r&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"checkout-shipping-change-default")," "))}function U(r,p){if(1&r){const t=e.EpF();e.TgZ(0,"div",10),e.NdJ("click",function(){const v=e.CHM(t).$implicit,y=e.oxw();return e.KtG(y.editAddress(v))}),e.TgZ(1,"div",11)(2,"div",12)(3,"span",13),e._uU(4),e.qZA()(),e.TgZ(5,"div",14),e.YNc(6,T,3,3,"div",15),e.TgZ(7,"p",16),e._uU(8),e.qZA()()(),e.TgZ(9,"p",17),e._uU(10),e.qZA(),e.TgZ(11,"p",18),e._uU(12),e.qZA(),e.TgZ(13,"div",19)(14,"app-remove-icon",20),e.NdJ("click",function(c){const y=e.CHM(t).$implicit,$=e.oxw();return e.KtG($.deleteAddress(y,c))}),e.qZA()()()}if(2&r){const t=p.$implicit;e.xp6(4),e.Oqu(t.consignee),e.xp6(2),e.Q6J("ngIf",t.isDefault),e.xp6(2),e.Oqu(t.phone),e.xp6(2),e.Oqu(t.areaName),e.xp6(2),e.Oqu(t.zipCode)}}function R(r,p){if(1&r){const t=e.EpF();e.TgZ(0,"app-edit-address-modal",22),e.NdJ("onSuccess",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.handleSubmitAddressSuccess())})("isOpenChange",function(c){e.CHM(t);const v=e.oxw();return e.KtG(v.shippingAddressModalShown=c)}),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("currAddress",t.selectedAddress)("isOpen",t.shippingAddressModalShown)}}const P=[{path:"list",component:(()=>{class r extends s.V{constructor(t){super(),this.addressService=t,this.shippingAddressParams={rows:30,page:0},this.shippingAddressModalShown=!1,this.selectedAddress=null}ngOnInit(){this.getShippingAddresses()}getShippingAddresses(){this.addressService.getShippingAddresses(this.shippingAddressParams).pipe((0,A.R)(this.destroyStream$)).subscribe(t=>{t&&(this.shippingAddresses=t.rows)})}editAddress(t){this.selectedAddress=t,this.shippingAddressModalShown=!0}deleteAddress(t,d){d.stopPropagation(),this.addressService.deleteShippingAddress({id:t.id}).pipe((0,A.R)(this.destroyStream$)).subscribe(c=>{this.getShippingAddresses()})}handleSubmitAddressSuccess(){var t=this;return(0,S.Z)(function*(){yield t.getShippingAddresses(),t.shippingAddressModalShown=!1})()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(B))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-shipping-address"]],features:[e.qOj],decls:15,vars:9,consts:[[1,"px-3","lg:px-0","address-wrapper","my-3","md:mt-0"],[1,"mb-5","flex","justify-between"],[1,"text-2xl","font-semi-bold","hidden","md:flex"],[1,"block","relative"],[1,"grid","grid-cols-1","md:grid-cols-2","xl:grid-cols-3","gap-5","mt-0","lg:mt-4","relative"],[1,"w-full","card","relative","bg-white","p-5","rounded-lg","border","border-dashed","border-gray-300","hover:border-primary","cursor-pointer","flex","items-center","justify-center","text-zinc-400","hover:text-primary",3,"click"],[1,"text-xl"],[1,"text-lg"],["class","w-full card relative bg-white p-5 rounded-lg border cursor-pointer hover:border-primary",3,"click",4,"ngFor","ngForOf"],[3,"currAddress","isOpen","onSuccess","isOpenChange",4,"ngIf"],[1,"w-full","card","relative","bg-white","p-5","rounded-lg","border","cursor-pointer","hover:border-primary",3,"click"],[1,"flex","flex-row","justify-between","mb-2"],[1,"flex","flex-row","gap-5"],[1,"font-bold","title","line-clamp-1","break-all"],[1,"flex","flex-col","items-end"],["class","bg-blue-500 text-white text-xs font-semibold px-2.5 py-1 rounded-full text-center items-center",4,"ngIf"],[1,"text-neutral-500","text-sm","p-1"],[1,"text-neutral-700","text-sm"],[1,"text-neutral-700","text-sm","line-clamp-1","break-all",2,"max-width","90%"],[1,"flex","absolute","right-5","bottom-5"],[1,"text-zinc-800","p-2","rounded-full","bg-zinc-100","hover:text-primary","hover:bg-red-50",3,"click"],[1,"bg-blue-500","text-white","text-xs","font-semibold","px-2.5","py-1","rounded-full","text-center","items-center"],[3,"currAddress","isOpen","onSuccess","isOpenChange"]],template:function(t,d){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4)(7,"div",5),e.NdJ("click",function(){return d.selectedAddress=null,d.shippingAddressModalShown=!0}),e.TgZ(8,"span",6),e._uU(9,"+\xa0"),e.qZA(),e.TgZ(10,"span",7),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.YNc(13,U,15,5,"div",8),e.qZA()()(),e.YNc(14,R,1,2,"app-edit-address-modal",9)),2&t){let c;e.xp6(3),e.hij(" ",e.lcZ(4,5,"account-shipping-address-page-title")," "),e.xp6(3),e.Q6J("@listAnimation",(null!==(c=null==d.shippingAddresses?null:d.shippingAddresses.length)&&void 0!==c?c:0)+1),e.xp6(5),e.Oqu(e.lcZ(12,7,"account-shipping-address-page-add")),e.xp6(2),e.Q6J("ngForOf",d.shippingAddresses),e.xp6(1),e.Q6J("ngIf",d.shippingAddressModalShown)}},dependencies:[n.sg,n.O5,E,_.c,g.X$],styles:[".address-wrapper[_ngcontent-%COMP%]{background:#f3f3f3}.address-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-height:126px}.address-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{filter:drop-shadow(0px 3px 1px rgba(0,0,0,.03))}"],data:{animation:[(0,o.X$)("listAnimation",[(0,o.eR)("* => *",[(0,o.IO)(":enter",[(0,o.oB)({opacity:0}),(0,o.EY)("150ms ease-in-out",[(0,o.jt)(100,(0,o.oB)({opacity:1}))])],{optional:!0})])])]}}),r})()}];let L=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[n.ez,f.Bz.forChild(P),l.Pc,u.m,u.m,m.u5,m.UX,g.aw,_.c]}),r})()}}]);