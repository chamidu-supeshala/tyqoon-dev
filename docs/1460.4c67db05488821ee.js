"use strict";(self.webpackChunkangular_tyqoon_client=self.webpackChunkangular_tyqoon_client||[]).push([[1460,9127],{24499:(P,x,e)=>{e.d(x,{c:()=>c});var o=e(5565),a=e(94650);const v=["header"];let c=(()=>{class g extends o.V{constructor(d,f){super(),this.element=d,this.renderer=f,this.lastScrollTop=0}onContentScroll(d){const f=d.detail.scrollTop;f>=50&&this.lastScrollTop<f?this.renderer.addClass(this.header.el,"top-toolbar-hide"):this.renderer.removeClass(this.header.el,"top-toolbar-hide"),this.lastScrollTop=f}}return g.\u0275fac=function(d){return new(d||g)(a.Y36(a.SBq),a.Y36(a.Qsj))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ng-component"]],viewQuery:function(d,f){if(1&d&&a.Gf(v,5),2&d){let C;a.iGM(C=a.CRH())&&(f.header=C.first)}},features:[a.qOj],decls:0,vars:0,template:function(d,f){},encapsulation:2}),g})()},51460:(P,x,e)=>{e.r(x),e.d(x,{NotificationsComponent:()=>K});var o=e(15861),a=e(36895),v=e(24006),c=e(95133),g=e(54463),_=e(82722),d=e(49808),f=e(5963),C=e(24499),M=e(55502),E=e(1241),D=e(21639),s=e(44466),t=e(94650),p=e(93132),O=e(81212),w=e(70957),T=e(49127),y=e(90147),N=e(7228),b=e(71832),A=e(21801),I=e(13746),L=e(85470),U=e(93774);function B(r,h){if(1&r&&(t.TgZ(0,"div",30),t._uU(1),t.qZA()),2&r){const i=t.oxw().ngLet;t.xp6(1),t.hij(" ",i>99?"99+":i," ")}}function R(r,h){if(1&r){const i=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(),m=t.MAs(1);return l.onChangeFilter(l.notificationStatus.Unread),t.KtG(m.scrollToTop())}),t._uU(1),t.ALo(2,"translate"),t.YNc(3,B,2,1,"div",29),t.qZA()}if(2&r){const i=h.ngLet,n=t.oxw();t.ekj("active",n.selectedFilter===n.notificationStatus.Unread),t.xp6(1),t.hij(" ",t.lcZ(2,4,"unread")," "),t.xp6(2),t.Q6J("ngIf",i>0)}}function Y(r,h){if(1&r){const i=t.EpF();t.TgZ(0,"app-notification-item",32),t.NdJ("click",function(){const m=t.CHM(i).$implicit,u=t.oxw(2);return t.KtG(u.onAction(m))}),t.qZA()}2&r&&t.Q6J("notification",h.$implicit)}function Z(r,h){if(1&r&&(t.ynx(0),t.YNc(1,Y,1,1,"app-notification-item",31),t.BQk()),2&r){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.notifications)}}function S(r,h){if(1&r&&(t.TgZ(0,"div",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r){const i=t.oxw();t.Q6J("ngClass",i.notifications.length?"py-6":"mt-28"),t.xp6(1),t.hij(" ",t.lcZ(2,2,i.notifications.length?"no-more-notifications":"no-notifications")," ")}}function W(r,h){1&r&&t._UZ(0,"app-loading-animation",34)}let K=(()=>{class r extends C.c{constructor(i,n,l,m,u,j){super(i,n),this.notificationService=l,this.cdr=m,this.route=u,this.router=j,this.selectedFilter=M.E.All,this.notificationStatus=M.E,this.unreadCount=0,this.notifications=[],this.isOpenNotificationDetailModal=!1,this.selectedNotification=null,this.isLoading=!0,this.isManualRefresh=!1,this.totalNotifications=0,this.notificationParams={rows:20,page:0,status:M.E.All},this.clientId="",this.token=null}ngOnInit(){var i=this;return(0,o.Z)(function*(){i.originUrl=i.route.snapshot.queryParamMap.get("originUrl"),i.notificationService.count$.pipe((0,_.R)(i.destroyStream$)).subscribe(n=>{i.unreadCount=n}),i.notificationService.readAll$.pipe((0,_.R)(i.destroyStream$)).subscribe(()=>{i.initContent()})})()}ngAfterViewInit(){this.notificationParams.status=this.selectedFilter,this.initContent()}onChangeFilter(i){i!=this.selectedFilter&&(this.selectedFilter=i,this.initContent())}initContent(i=!1){var n=this;return(0,o.Z)(function*(){if(n.isLoading=!0,n.isManualRefresh=i,n.notifications=[],n.notificationParams={rows:20,page:0,status:n.selectedFilter},yield n.getNotifications(),n.pageContainer){let l=yield n.hasScrollbar();for(;!l&&!n.allNotificationsLoaded&&n.notificationParams.page<3;)yield n.getNotifications(),yield(0,d.n)((0,f.H)(100)),l=yield n.hasScrollbar()}})()}get allNotificationsLoaded(){return this.totalNotifications<=this.notifications.length}hasScrollbar(){var i=this;return(0,o.Z)(function*(){const n=yield i.pageContainer.getScrollElement();return n.scrollHeight>n.clientHeight})()}onAction(i){i.isRead||this.notificationService.markAsRead(i.id).then(()=>{this.selectedFilter===M.E.Unread?this.initContent():i.isRead=!0}),this.selectedNotification=i,this.isOpenNotificationDetailModal=!0}getNotifications(i=null){var n=this;return(0,o.Z)(function*(){const l=yield(0,d.n)(n.notificationService.getNotifications(n.notificationParams));if(i&&i.complete(),l?.data){const m=l.data.rows;n.notifications=n.notificationParams.page?[...n.notifications,...m]:m,n.cdr.detectChanges(),0==n.notificationParams.page&&(n.totalNotifications=l.data.total),n.notificationParams.page+=1}n.isLoading=!1})()}loadMore(i){var n=this;return(0,o.Z)(function*(){yield n.getNotifications(i.target),i.state="closed"})()}handleBack(){this.router.navigateByUrl(this.originUrl??"/")}}return r.\u0275fac=function(i){return new(i||r)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(p.g),t.Y36(t.sBO),t.Y36(O.gz),t.Y36(O.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-notifications"]],viewQuery:function(i,n){if(1&i&&t.Gf(c.W2,5),2&i){let l;t.iGM(l=t.CRH())&&(n.pageContainer=l.first)}},standalone:!0,features:[t.qOj,t.jDz],decls:37,vars:26,consts:[["scrollTop","","fullscreen","true","scrollEvents","true",3,"ionScroll"],["ionContent",""],["appOverflowVisible","",1,"sticky","top-0","shadow-lg","z-50"],["header",""],[3,"hidePageName","hideLogo","hideCart","hideSearch"],[1,"grey-bg","pt-4"],[1,"tyqoon-container","px-2","md:px-0","h-full","flex","flex-col"],[1,"hidden","md:flex","flex-auto","items-center","w-full","py-3","pt-4","top-0"],[1,"cursor-pointer","w-8","h-8","ml-2",3,"click"],["name","chevron-back-outline",1,"w-8","h-8"],[1,"text-3xl","font-medium"],[1,"flex","items-center","gap-4","sm:gap-0","sm:px-4","pb-2","justify-between"],[1,"flex","text-lg"],[1,"filter-item","px-3","py-1.5","rounded-lg","font-medium",3,"click"],["class","filter-item px-3 py-1.5 rounded-lg font-medium flex items-center gap-1",3,"active","click",4,"ngLet"],[1,"relative","flex","items-center"],[1,"w-fit","p-1","md:py-1.5","md:px-3","cursor-pointer","refresh","rounded-full","md:rounded-lg","justify-center","items-center","flex","group","bg-blue-100","hover:bg-blue-200",3,"click"],["name","refresh-outline",1,"w-5","h-5","md:mb-0.5","text-black"],[1,"hidden","md:flex","ml-1","font-medium","text-lg","text-black"],[1,"flex","flex-col","h-full","sm:px-4"],[1,"flex","flex-col","h-full"],[1,"flex","flex-col","flex-auto","w-full","border-t"],[4,"ngIf"],["class","w-full text-center text-gray-500 text-base font-medium no-notifications",3,"ngClass",4,"ngIf"],["class","mx-auto mt-5 block w-fit",4,"ngIf"],["threshold","0","position","bottom",3,"disabled","ionInfinite"],[1,"pt-2"],[3,"isOpen","notification","isOpenChange"],[1,"filter-item","px-3","py-1.5","rounded-lg","font-medium","flex","items-center","gap-1",3,"click"],["class","text-white unread-notification flex items-center justify-center rounded-full h-6 px-1 text-base ml-2",4,"ngIf"],[1,"text-white","unread-notification","flex","items-center","justify-center","rounded-full","h-6","px-1","text-base","ml-2"],[3,"notification","click",4,"ngFor","ngForOf"],[3,"notification","click"],[1,"w-full","text-center","text-gray-500","text-base","font-medium","no-notifications",3,"ngClass"],[1,"mx-auto","mt-5","block","w-fit"]],template:function(i,n){if(1&i){const l=t.EpF();t.TgZ(0,"ion-content",0,1),t.NdJ("ionScroll",function(u){return n.onContentScroll(u)}),t.TgZ(2,"ion-toolbar",2,3),t._UZ(4,"app-top-navbar",4)(5,"app-top-menu"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"a",8),t.NdJ("click",function(){return n.handleBack()}),t._UZ(10,"ion-icon",9),t.qZA(),t.TgZ(11,"h1",10),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",11)(15,"div",12)(16,"button",13),t.NdJ("click",function(){t.CHM(l);const u=t.MAs(1);return n.onChangeFilter(n.notificationStatus.All),t.KtG(u.scrollToTop())}),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.YNc(19,R,4,6,"button",14),t.ALo(20,"async"),t.qZA(),t.TgZ(21,"div",15)(22,"div",16),t.NdJ("click",function(){return n.initContent(!0)}),t._UZ(23,"ion-icon",17),t.TgZ(24,"div",18),t._uU(25),t.ALo(26,"translate"),t.qZA()()()(),t.TgZ(27,"div",19)(28,"div",20)(29,"div",21),t.YNc(30,Z,2,1,"ng-container",22),t.YNc(31,S,3,4,"div",23),t.YNc(32,W,1,0,"app-loading-animation",24),t.TgZ(33,"ion-infinite-scroll",25),t.NdJ("ionInfinite",function(u){return n.loadMore(u)}),t._UZ(34,"ion-infinite-scroll-content",26),t.qZA()()()()()(),t._UZ(35,"app-new-year-dragons"),t.qZA(),t.TgZ(36,"app-notification-detail-modal",27),t.NdJ("isOpenChange",function(u){return n.isOpenNotificationDetailModal=u}),t.qZA()}if(2&i){let l;t.xp6(4),t.Q6J("hidePageName",!1)("hideLogo",!0)("hideCart",!0)("hideSearch",!0),t.xp6(8),t.hij(" ",t.lcZ(13,18,"notifications")," "),t.xp6(4),t.ekj("active",n.selectedFilter===n.notificationStatus.All),t.xp6(1),t.hij(" ",t.lcZ(18,20,"all")," "),t.xp6(2),t.Q6J("ngLet",null!==(l=t.lcZ(20,22,n.notificationService.count$))&&void 0!==l?l:0),t.xp6(3),t.ekj("loading",n.isLoading&&n.isManualRefresh),t.xp6(3),t.Oqu(t.lcZ(26,24,"refresh")),t.xp6(5),t.Q6J("ngIf",n.notifications.length>0),t.xp6(1),t.Q6J("ngIf",!n.isLoading&&n.allNotificationsLoaded),t.xp6(1),t.Q6J("ngIf",n.isLoading&&0===n.notificationParams.page),t.xp6(1),t.Q6J("disabled",n.allNotificationsLoaded),t.xp6(3),t.Q6J("isOpen",n.isOpenNotificationDetailModal)("notification",n.selectedNotification)}},dependencies:[a.ez,a.mk,a.sg,a.O5,a.Ov,c.Pc,c.W2,c.gu,c.ju,c.MB,c.sr,g.aw,g.X$,s.m,w.V,T.H,y.h,N.r,b.Y,D.F,A.r,I.X,E.x,L.p,U.z,v.u5],styles:[".unread-notification[_ngcontent-%COMP%]{background-color:#ff0242;min-width:1.5rem;font-size:15px}ion-toolbar[appOverflowVisible][_ngcontent-%COMP%]{contain:none}.filter-item.active[_ngcontent-%COMP%]{background-color:#fff0e9;color:#ff7e18;border-color:#ff7e18}.filter-item[_ngcontent-%COMP%]:focus-visible{outline:0}.notifications-search[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--placeholder-opacity: 1;--placeholder-font-weight: 500;--placeholder-color: #999;--padding-start: 6px;--color: #555}@media (min-width: 640px){.notifications-search[_ngcontent-%COMP%]{min-width:248px}}app-top-navbar[_ngcontent-%COMP%]     app-notification-indicator{display:none}@media (min-width: 768px){app-top-navbar[_ngcontent-%COMP%]     app-notification-indicator{display:block}app-notification-list[_ngcontent-%COMP%]     .notification .notification-img{height:5rem;width:5rem}app-notification-list[_ngcontent-%COMP%]     .notification .notification-text{font-size:1.125rem!important;line-height:1.75rem!important}app-notification-list[_ngcontent-%COMP%]     .notification .notification-type{font-size:1.125rem;line-height:1.75rem}app-notification-list[_ngcontent-%COMP%]     .notification .notification-time{font-size:1rem;line-height:1.5rem}}.refresh[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{--ionicon-stroke-width: 50}.refresh.loading[_ngcontent-%COMP%]{animation:blue-pulse 1.2s}"]}),r})()},71832:(P,x,e)=>{e.d(x,{Y:()=>D});var o=e(94650),a=e(56889),v=e(6074),c=e(36895);function g(s,t){1&s&&o._UZ(0,"img",6)}function _(s,t){1&s&&o._UZ(0,"img",7)}function d(s,t){if(1&s&&(o.ynx(0),o.YNc(1,g,1,0,"img",4),o.YNc(2,_,1,0,"img",5),o.BQk()),2&s){const p=o.oxw(2);o.xp6(1),o.Q6J("ngIf",p.showLeft),o.xp6(1),o.Q6J("ngIf",p.showRight)}}function f(s,t){1&s&&o._UZ(0,"img",10)}function C(s,t){1&s&&o._UZ(0,"img",11)}function M(s,t){if(1&s&&(o.YNc(0,f,1,0,"img",8),o.YNc(1,C,1,0,"img",9)),2&s){const p=o.oxw(2);o.Q6J("ngIf",p.showLeft),o.xp6(1),o.Q6J("ngIf",p.showRight)}}function E(s,t){if(1&s&&(o.TgZ(0,"div",1),o.YNc(1,d,3,2,"ng-container",2),o.ALo(2,"async"),o.YNc(3,M,2,2,"ng-template",null,3,o.W1O),o.qZA()),2&s){const p=o.MAs(4),O=o.oxw();o.xp6(1),o.Q6J("ngIf",o.lcZ(2,2,O.biddingService.isBiddingMode$))("ngIfElse",p)}}let D=(()=>{class s{constructor(p,O){this.biddingService=p,this.themeService=O,this.showLeft=!0,this.showRight=!0}}return s.\u0275fac=function(p){return new(p||s)(o.Y36(a.g),o.Y36(v.f))},s.\u0275cmp=o.Xpm({type:s,selectors:[["app-new-year-dragons"]],inputs:{showLeft:"showLeft",showRight:"showRight"},decls:1,vars:1,consts:[["class","flex w-full justify-between z-100",4,"ngIf"],[1,"flex","w-full","justify-between","z-100"],[4,"ngIf","ngIfElse"],["shoppingMode",""],["class","left bidding hidden xl:block absolute h-auto dragon-jumping","src","/assets/images/new-year/Mascot-CNY-2024-1.png","alt","Bidding",4,"ngIf"],["class","right bidding hidden xl:block absolute h-auto dragon-scaling","style","--distance: 2px","src","/assets/images/new-year/Mascot-CNY-2024-2.png","alt","Bidding",4,"ngIf"],["src","/assets/images/new-year/Mascot-CNY-2024-1.png","alt","Bidding",1,"left","bidding","hidden","xl:block","absolute","h-auto","dragon-jumping"],["src","/assets/images/new-year/Mascot-CNY-2024-2.png","alt","Bidding",1,"right","bidding","hidden","xl:block","absolute","h-auto","dragon-scaling",2,"--distance","2px"],["class","left shopping hidden xl:block absolute h-auto dragon-scaling","style","--distance: -2px","src","/assets/images/new-year/Mascot-CNY-2024-3.png","alt","Bidding",4,"ngIf"],["class","right shopping hidden xl:block absolute h-auto dragon-jumping","src","/assets/images/new-year/Mascot-CNY-2024-4.png","alt","Bidding",4,"ngIf"],["src","/assets/images/new-year/Mascot-CNY-2024-3.png","alt","Bidding",1,"left","shopping","hidden","xl:block","absolute","h-auto","dragon-scaling",2,"--distance","-2px"],["src","/assets/images/new-year/Mascot-CNY-2024-4.png","alt","Bidding",1,"right","shopping","hidden","xl:block","absolute","h-auto","dragon-jumping"]],template:function(p,O){1&p&&o.YNc(0,E,5,4,"div",0),2&p&&o.Q6J("ngIf",O.themeService.isNewYearMode)},dependencies:[c.O5,c.Ov],styles:["[_nghost-%COMP%]{pointer-events:none;-webkit-user-select:none;user-select:none;z-index:1;position:absolute;top:140px;width:100%;max-width:2000px;margin:auto;left:0;right:0;min-height:calc(100vh - 140px)}.shopping.left[_ngcontent-%COMP%]{max-width:350px;bottom:13%}@media (min-width: 1280px){.shopping.left[_ngcontent-%COMP%]{width:calc(50vw - 545px);margin-left:-12px}}@media (min-width: 1440px){.shopping.left[_ngcontent-%COMP%]{width:calc(50vw - 615px);margin-left:-40px}}.shopping.right[_ngcontent-%COMP%]{max-width:330px;top:0;right:0}@media (min-width: 1280px){.shopping.right[_ngcontent-%COMP%]{width:calc(50vw - 545px);margin-right:-12px}}@media (min-width: 1440px){.shopping.right[_ngcontent-%COMP%]{width:calc(50vw - 620px);margin-right:-35px}}.bidding.left[_ngcontent-%COMP%]{max-width:370px;top:5px}@media (min-width: 1280px){.bidding.left[_ngcontent-%COMP%]{width:calc(50vw - 528px);margin-left:-30px}}@media (min-width: 1440px){.bidding.left[_ngcontent-%COMP%]{width:calc(50vw - 595px);margin-left:-65px}}.bidding.right[_ngcontent-%COMP%]{max-width:340px;bottom:3%;right:0}@media (min-width: 1280px){.bidding.right[_ngcontent-%COMP%]{width:calc(50vw - 545px);margin-right:-12px}}@media (min-width: 1440px){.bidding.right[_ngcontent-%COMP%]{width:calc(50vw - 625px);margin-right:-40px}}.dragon-jumping[_ngcontent-%COMP%]{animation:3s dragon-jumping 2s linear forwards infinite}@keyframes dragon-jumping{0%{transform:translateY(0)}25%{transform:translateY(-10px)}50%{transform:translateY(0)}to{transform:translateY(0)}}.dragon-scaling[_ngcontent-%COMP%]{animation:6s dragon-scaling 4s linear forwards infinite}@keyframes dragon-scaling{0%{transform:scale(1)}15%{transform:scale(1.05) translateY(-3px) translate(var(--distance))}30%{transform:scale(1)}to{transform:scale(1)}}"]}),s})()},49127:(P,x,e)=>{e.d(x,{H:()=>v});var o=e(24837),a=e(94650);let v=(()=>{class c{constructor(_){this.toolbar=_.nativeElement}ngAfterViewInit(){if(o.Z.isServer)return;const _=setInterval(()=>{if(this.toolbar.shadowRoot){let d=this.toolbar.shadowRoot.querySelector(".toolbar-container");d&&(d.style.contain="none",d.style.overflow="visible",clearInterval(_))}},500)}}return c.\u0275fac=function(_){return new(_||c)(a.Y36(a.SBq))},c.\u0275dir=a.lG2({type:c,selectors:[["","appOverflowVisible",""]]}),c})()},70957:(P,x,e)=>{e.d(x,{V:()=>g});var o=e(36895),a=e(94650),v=e(81212),c=e(95133);let g=(()=>{class _{constructor(f,C,M){this.content=f,this.router=C,this.platformId=M,(0,o.NF)(this.platformId)&&(this.subscription=this.router.events.subscribe(E=>{E instanceof v.m2&&this.content.scrollToTop(500)}))}ngOnDestroy(){this.subscription?.unsubscribe()}}return _.\u0275fac=function(f){return new(f||_)(a.Y36(c.W2),a.Y36(v.F0),a.Y36(a.Lbi))},_.\u0275dir=a.lG2({type:_,selectors:[["","scrollTop",""]]}),_})()}}]);