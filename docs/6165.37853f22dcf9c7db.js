"use strict";(self.webpackChunkangular_tyqoon_client=self.webpackChunkangular_tyqoon_client||[]).push([[6165],{35482:(L,B,o)=>{o.d(B,{s:()=>x});var i=o(92340),t=o(39646),h=o(54004),c=o(24056),v=o(94650),b=o(80529),f=o(45329);let x=(()=>{class C{constructor(P,a){this.http=P,this.productsQueryStorage={},a.loginStateChange.subscribe(()=>{this.productsQueryStorage={}})}getProductsByMetaParams(P){const a=JSON.stringify(P);return this.productsQueryStorage[a]?(0,t.of)(this.productsQueryStorage[a]):this.http.get(`${i.N.BASE_URL}/shop/product/query`,{params:{...P}}).pipe((0,h.U)(({data:e})=>{const p={...e,rows:e.rows.map(g=>({...g,productImages:(0,c.x5)(g.productImages)})),total:e.rows.length?e.total:0};return this.productsQueryStorage[a]=p,p}))}getProductsByMetaParamsV2(P){const a=JSON.stringify(P);return this.productsQueryStorage[a]?(0,t.of)(this.productsQueryStorage[a]):this.http.get(`${i.N.BASE_URL}/shop/product/queryESV2`,{params:{...P}}).pipe((0,h.U)(({data:e})=>{const p=e?.rows||[],g={...e,rows:p.map(D=>({...D,productImages:(0,c.x5)(D.productImages)})),total:p.length?e.total:0};return this.productsQueryStorage[a]=g,g}))}getProductById(P){return this.http.get(`${i.N.BASE_URL}/shop/product/queryDetailV2`,{params:{rows:1,page:0,productId:P}}).pipe((0,h.U)(({data:a})=>({...a.rows[0],productImages:(0,c.x5)(a.rows[0]?.productImages||"[]")})))}getProductReview(P,a,e=0,p=3){return this.http.get(`${i.N.BASE_URL}/shop/product/queryReview`,{params:{rows:p,page:e,productId:P,scoreType:a}}).pipe((0,h.U)(g=>g.data))}getSkusByProductId(P){return this.http.get(`${i.N.BASE_URL}/shop/product/querySkuByProductId`,{params:{productId:P}}).pipe((0,h.U)(({data:a})=>a.map(e=>({...e,specifications:JSON.parse(e.specificationValues||"[]")}))))}getSkuById(P){return this.http.get(`${i.N.BASE_URL}/shop/product/querySkuById`,{params:{skuId:P.join(",")}}).pipe((0,h.U)(({data:a})=>a.map(e=>({...e,specifications:JSON.parse(e.specificationValues||"[]")}))))}getBrandById(P){return this.http.get(`${i.N.BASE_URL}/shop/brand/queryById`,{params:{id:P}}).pipe((0,h.U)(a=>a.data))}}return C.\u0275fac=function(P){return new(P||C)(v.LFG(b.eN),v.LFG(f.K))},C.\u0275prov=v.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},93379:(L,B,o)=>{o.d(B,{Nj:()=>t,T7:()=>i,j1:()=>h});var i=(()=>{return(c=i||(i={}))[c.OPEN=0]="OPEN",c[c.CLOSED=1]="CLOSED",i;var c})(),t=(()=>{return(c=t||(t={}))[c.POOL_SIZE=0]="POOL_SIZE",c[c.CREATED_DATE=1]="CREATED_DATE",c[c.LAST_MODIFIED_DATE=4]="LAST_MODIFIED_DATE",t;var c})(),h=(()=>{return(c=h||(h={}))[c.OPEN=0]="OPEN",c[c.DRAWN=1]="DRAWN",c[c.DRAWING=2]="DRAWING",c[c.NOT_STARTED=3]="NOT_STARTED",c[c.EXPIRED=4]="EXPIRED",c[c.PAUSED=5]="PAUSED",c[c.WON=6]="WON",c[c.DRAWING_START_SOON=10]="DRAWING_START_SOON",c[c.LOADING_NEXT_POOL=100]="LOADING_NEXT_POOL",c[c.ALL=-1]="ALL",h;var c})()},70325:(L,B,o)=>{o.d(B,{P:()=>tt});var i=o(15861),t=o(94650),h=o(77579),c=o(82722),v=o(78372),b=o(95698),f=o(83905),x=o(5565),C=o(93379),A=o(24837),P=o(18110),a=o(56889),e=o(45329),p=o(7507),g=o(36895),D=o(7228),y=o(54463);const N=["biddingButton"],K=["bidWrapper"];function F(u,T){1&u&&(t.TgZ(0,"div",14),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&u&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"my-entries")))}function Q(u,T){1&u&&(t.TgZ(0,"div",15),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&u&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"max")," "))}function J(u,T){if(1&u&&t._uU(0),2&u){const _=t.oxw(4);t.hij(" ",_.pool.bidAmount," ")}}const Y=function(u){return[u]};function j(u,T){if(1&u&&(t.TgZ(0,"div",9,10),t.YNc(2,F,3,3,"div",11),t.YNc(3,Q,3,3,"div",12),t.YNc(4,J,1,1,"ng-template",null,13,t.W1O),t.qZA()),2&u){const _=t.MAs(5),r=t.oxw(3);t.Q6J("ngClass",t.VKq(4,Y,r.pool.bidAmount>0?"font-bold":"font-medium")),t.xp6(2),t.Q6J("ngIf",!r.customBidAmount),t.xp6(1),t.Q6J("ngIf",r.pool.bidAmount>=r.pool.userMaxTickets)("ngIfElse",_)}}function z(u,T){if(1&u&&(t.ynx(0),t.YNc(1,j,6,6,"div",8),t.BQk()),2&u){const _=t.oxw(2),r=t.MAs(7);t.xp6(1),t.Q6J("ngIf",_.pool.bidAmount>0||_.customBidAmount)("ngIfElse",r)}}function G(u,T){if(1&u&&(t.ynx(0),t.YNc(1,z,2,2,"ng-container",3),t.BQk()),2&u){const _=t.oxw(),r=t.MAs(9);t.xp6(1),t.Q6J("ngIf",_.pool.currentPoolPercentage<100||_.customBidAmount)("ngIfElse",r)}}function $(u,T){if(1&u&&(t.TgZ(0,"div",16),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&u){const _=t.oxw();t.ekj("closed",_.pool.currentPoolPercentage>=100),t.xp6(1),t.hij(" ",t.lcZ(2,3,_.pool.currentPoolPercentage<100?"login-to-bid":"header-login")," ")}}function V(u,T){1&u&&(t.TgZ(0,"div",17),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&u&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"enter-now")," "))}function H(u,T){1&u&&(t.TgZ(0,"div")(1,"div",14),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",21),t._uU(5),t.ALo(6,"translate"),t.qZA()()),2&u&&(t.xp6(2),t.Oqu(t.lcZ(3,2,"my-entries")),t.xp6(3),t.Oqu(t.lcZ(6,4,"max")))}function k(u,T){if(1&u&&(t.TgZ(0,"div",22),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&u){const _=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,1,_.pool.bidAmount>0?"entered-pool":"not-entered")," ")}}function Z(u,T){if(1&u&&(t.TgZ(0,"div",19),t.YNc(1,H,7,6,"div",3),t.YNc(2,k,3,3,"ng-template",null,20,t.W1O),t.qZA()),2&u){const _=t.MAs(3),r=t.oxw(2);t.xp6(1),t.Q6J("ngIf",r.pool.bidAmount>=r.pool.userMaxTickets)("ngIfElse",_)}}function q(u,T){if(1&u&&t.YNc(0,Z,4,2,"div",18),2&u){const _=t.oxw(),r=t.MAs(11);t.Q6J("ngIf",!_.pool.finalBidProcessing)("ngIfElse",r)}}function X(u,T){1&u&&(t.TgZ(0,"div",23),t._UZ(1,"app-loading-animation",24),t.qZA())}let tt=(()=>{class u extends x.V{constructor(_,r,s,M){super(),this.biddingService=_,this.userService=r,this.router=s,this.cdr=M,this.biddingButton=null,this.bidWrapper=null,this.isLogin=!0,this.animationTarget=null,this.disableFlyingAnimation=!1,this.isReadOnly=!1,this.customBidAmount=null,this.redirectIfFailed=!1,this.onPoolCompleted=new t.vpe,this.onPoolUpdated=new t.vpe,this.busy=!1,this.biddingClicked$=new h.x,this.bidAmount=0,this.userEnteredBidAmount=0}ngOnInit(){this.biddingClicked$.pipe((0,c.R)(this.destroyStream$),(0,v.b)(1e3)).subscribe(_=>{const r=this.bidAmount,s=this.userEnteredBidAmount;this.bidAmount=0,this.userEnteredBidAmount=0,r>0&&this.pool?.poolId&&"0"!=this.pool.poolId&&(this.biddingService.onUpdateProductCardBidAmount$.next({poolId:this.pool.poolId,bidAmount:this.pool.bidAmount,currentPoolSize:this.pool.currentPoolSize,currentPoolPercentage:this.pool.currentPoolPercentage,status:this.pool.status}),this.biddingService.onBid(r,this.pool.poolId).pipe((0,b.q)(1)).subscribe(M=>{0!==M.code&&(["GroupBuyingTicketsAreFull","CodeFailedGroupBuyingMoreThanMaxTickets"].includes(M.i18nKey)&&this.pool.bidAmount<=r?(this.biddingService.ticketCount$.next(this.biddingService.ticketCount$.getValue()-(s-r)),this.handleFailedBid(s)):(this.refundTickets(r),this.onPoolUpdated.emit(this.pool)),this.pool.bidAmount-=r),this.pool.finalBidProcessing=!1,this.pool.currentPoolPercentage>=100&&(0==M.code||this.pool.bidAmount-r>0)&&this.biddingService.selectedPool$.getValue()?.poolId==this.pool.poolId&&this.biddingService.onChangePoolTab$.next(C.T7.CLOSED)}))})}refundTickets(_){this.biddingService.ticketCount$.next(this.biddingService.ticketCount$.getValue()+_)}onBid(_,r){var s=this;return(0,i.Z)(function*(){if(!s.isLogin)return void s.router.navigateByUrl("auth/login");if(s.isReadOnly||s.busy||r.currentPoolPercentage>=100||r.bidAmount>=r.userMaxTickets)return;if(s.biddingService.ticketCount$.getValue()<=0)return void(s.biddingService.isOpenGetTicketsModal=!0);if(!s.pool.poolId)return void s.biddingService.onLaunchInitialPool$.next(s.product);s.biddingService.onBeforeBid$.next(!0),s.biddingService.setBiddingInProgressTimer(),s.busy=!0;const E=Math.min(r.poolLimit-r.currentPoolSize,r.userMaxTickets-r.bidAmount,s.customBidAmount??s.biddingService.bidAmount,s.biddingService.ticketCount$.getValue());s.userEnteredBidAmount+=Math.min(s.customBidAmount??s.biddingService.bidAmount,s.biddingService.ticketCount$.getValue()),E?(s.biddingService.animationTarget=s.animationTarget,s.biddingService.biddingClicked$.next({event:_,element:s.biddingButton?.nativeElement,offsetY:5,launchDelay:20,disableFlyingAnimation:s.disableFlyingAnimation,targetSelector:"#my-tickets-box"}),s.biddingService.trackingProduct==s.product.id&&s.biddingService.trackingPool==s.pool.poolId?s.biddingService.noOfClicks+=1:(s.biddingService.trackingProduct=s.product.id,s.biddingService.trackingPool=s.pool.poolId,s.biddingService.noOfClicks=1),r.bidAmount+=E,r.currentPoolSize+=E,r.currentPoolPercentage=(0,P.DU)(r.currentPoolSize,r.poolLimit),r.currentPoolPercentage>=100&&(r.finalBidProcessing=!0),s.bidAmount+=E,s.bidAmount>0&&0==r.currentPoolPercentage&&(r.currentPoolPercentage=1),s.biddingService.ticketCount$.next(s.biddingService.ticketCount$.getValue()-E),s.biddingClicked$.next(!0),s.busy=!1,console.log("busy",s.busy),r.currentPoolPercentage>=100&&s.onPoolCompleted.emit(s.pool),s.cdr.detectChanges()):s.busy=!1})()}animateValue(_,r,s,M,w=500){let E=null;const U=S=>{E||(E=S);const W=Math.min((S-E)/w,1);r.innerHTML=Math.floor(W*(M-s)+s),W<1&&window.requestAnimationFrame(U)};window.requestAnimationFrame(U),_.bidAmount=M}handleFailedBid(_){var r=this;_<=0||(console.log("HANDLE FAILED BID",_),this.biddingService.getProductPools({page:0,rows:10,skuId:this.product.productSkuId,status:0,sortType:C.Nj.POOL_SIZE,sortDirection:"desc"}).pipe((0,b.q)(1)).subscribe(function(){var s=(0,i.Z)(function*(M){let w=null;if(M?.rows)for(let E=0;E<M.rows.length;E++){const U=M.rows[E].id;if(0==(yield(0,f.z)(r.biddingService.onBid(_,U))).code){w=U,r.handleMissedPool(w);break}}w||(console.log("TRY 1: OPEN POOL NOT FOUND"),r.biddingService.createPoolIfNotExists({skuId:r.product.productSkuId,ticketsAmount:_}).pipe((0,b.q)(1)).subscribe(E=>{console.log("TRY 2: CREATE NEW POOL",E),0==E.code&&E.data.groupBuyingId?r.handleMissedPool(E.data.groupBuyingId.toString()):r.refundTickets(_)}))});return function(M){return s.apply(this,arguments)}}()))}handleMissedPool(_){this.redirectIfFailed&&this.router.navigate(["/product/detail"],{queryParams:{id:this.product.id,poolId:_,bid:!0}}).then(()=>{this.biddingService.onLaunchFinished$.next(!0)}),this.biddingService.onPoolMissed$.next({newPoolId:_,productId:this.product.id,showRedirectOption:!this.redirectIfFailed}),this.onPoolCompleted.next(this.pool),A.Z.isBrowser&&setTimeout(()=>{this.userService.updateUserInfo()},4e3)}}return u.\u0275fac=function(_){return new(_||u)(t.Y36(a.g),t.Y36(e.K),t.Y36(p.F0),t.Y36(t.sBO))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-bid-button"]],viewQuery:function(_,r){if(1&_&&(t.Gf(N,5),t.Gf(K,5)),2&_){let s;t.iGM(s=t.CRH())&&(r.biddingButton=s.first),t.iGM(s=t.CRH())&&(r.bidWrapper=s.first)}},inputs:{product:"product",pool:"pool",isLogin:"isLogin",animationTarget:"animationTarget",disableFlyingAnimation:"disableFlyingAnimation",isReadOnly:"isReadOnly",customBidAmount:"customBidAmount",redirectIfFailed:"redirectIfFailed"},outputs:{onPoolCompleted:"onPoolCompleted",onPoolUpdated:"onPoolUpdated"},features:[t.qOj],decls:12,vars:10,consts:[[1,"bidding-bar","overflow-hidden","h-12","relative","z-10","flex","items-center","w-36","rounded-lg",3,"click"],["biddingButton",""],["src","assets/images/ticket.png",1,"mx-1","md:mx-2","absolute","select-none"],[4,"ngIf","ngIfElse"],["noLogin",""],["notEntered",""],["poolCompleted",""],["poolProcessing",""],["class","bid-amount w-full pool-text select-none mt-px md:mt-0 pl-4 text-center",3,"ngClass",4,"ngIf","ngIfElse"],[1,"bid-amount","w-full","pool-text","select-none","mt-px","md:mt-0","pl-4","text-center",3,"ngClass"],["bidWrapper",""],["class","my-entries-label",4,"ngIf"],["class","uppercase max",4,"ngIf","ngIfElse"],["bidAmout",""],[1,"my-entries-label"],[1,"uppercase","max"],[1,"no-login","w-full","font-medium","select-none","mt-px","md:mt-0"],[1,"enter-now","w-full","font-medium","select-none","mt-px","md:mt-0"],["class","enter-now w-full font-medium select-none mt-px md:mt-0 pool-text",4,"ngIf","ngIfElse"],[1,"enter-now","w-full","font-medium","select-none","mt-px","md:mt-0","pool-text"],["notMax",""],[1,"max","uppercase"],[1,"text-lg"],[1,"processing","w-full","pl-2.5"],[1,"w-fit","mx-auto","block"]],template:function(_,r){if(1&_&&(t.TgZ(0,"div",0,1),t.NdJ("click",function(M){return r.onBid(M,r.pool)}),t._UZ(2,"img",2),t.YNc(3,G,2,2,"ng-container",3),t.qZA(),t.YNc(4,$,3,5,"ng-template",null,4,t.W1O),t.YNc(6,V,3,3,"ng-template",null,5,t.W1O),t.YNc(8,q,1,2,"ng-template",null,6,t.W1O),t.YNc(10,X,2,0,"ng-template",null,7,t.W1O)),2&_){const s=t.MAs(5);t.ekj("disabled",r.pool.currentPoolPercentage>=100||r.pool.bidAmount>=r.pool.userMaxTickets)("read-only",r.isReadOnly)("can-bid",r.isLogin)("not-entered",!(r.pool.bidAmount>0||r.customBidAmount)),t.xp6(3),t.Q6J("ngIf",r.isLogin)("ngIfElse",s)}},dependencies:[g.mk,g.O5,D.r,y.X$],styles:['.bidding-bar[_ngcontent-%COMP%]{background-color:#ffdc40;transition:transform .2s ease-out;transform-origin:bottom;transform:scale(1);overflow:hidden;border:1px solid rgb(255,188,133);cursor:pointer!important}.bidding-bar.disabled[_ngcontent-%COMP%]{color:#686868;background-color:#d9d9d9;border-color:#cacaca}.bidding-bar[_ngcontent-%COMP%]:not(.disabled).not-entered:after{animation:3s shinebg 1.2s forwards infinite!important}.bidding-bar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:19px;transition:transform .2s ease-out}@media (min-width: 768px){.bidding-bar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:25px}}@media (min-width: 1440px){.bidding-bar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:30px}}.bidding-bar[_ngcontent-%COMP%]   .bid-amount[_ngcontent-%COMP%]{transition:transform .2s ease-out}.bidding-bar[_ngcontent-%COMP%]:after{content:"";top:0;transform:translate(100%);width:100%;height:100%;position:absolute;background:linear-gradient(to right,rgba(255,255,255,0) 0%,rgba(255,255,255,.6) 50%,rgba(128,186,232,0) 99%,rgba(125,185,232,0) 100%)}.bidding-bar[_ngcontent-%COMP%]:not(.disabled):hover:after{animation:shinebg 1.2s forwards}@keyframes shinebg{0%{transform:translate(-100%)}to{transform:translate(100%)}}.pool-text[_ngcontent-%COMP%]{font-size:23px;line-height:23px}.pool-text[_ngcontent-%COMP%]   .my-entries-label[_ngcontent-%COMP%]{font-size:10px;line-height:10px;margin-top:1px}.pool-text[_ngcontent-%COMP%]   .max[_ngcontent-%COMP%]{font-size:20px;line-height:20px}.no-login[_ngcontent-%COMP%]{font-size:13px;line-height:1.1;margin-left:15px;text-align:center!important}.no-login.closed[_ngcontent-%COMP%]{margin-left:30px}@media (min-width: 768px){.no-login[_ngcontent-%COMP%]{font-size:15px;margin-left:15px}}.enter-now[_ngcontent-%COMP%]{font-size:13px;line-height:1.1;margin-left:15px;text-align:center!important;transition:transform .2s ease-out}@media (min-width: 640px){.enter-now[_ngcontent-%COMP%]{font-size:15px}}@media (min-width: 768px){.enter-now[_ngcontent-%COMP%]{font-size:18px;margin-left:15px}}@media (min-width: 1024px){.enter-now[_ngcontent-%COMP%]{margin-left:7px}}app-loading-animation[_ngcontent-%COMP%]     .knight-rider-bar{height:.32em;width:.22em;background-color:#8e8e8e}app-loading-animation[_ngcontent-%COMP%]     .knight-rider-loader{font-size:35px;line-height:35px}']}),u})()},10709:(L,B,o)=>{o.d(B,{u:()=>P});var i=o(93379),t=o(94650),h=o(36895),c=o(1470),v=o(54463);function b(a,e){1&a&&(t.TgZ(0,"div",4),t._UZ(1,"app-text-jumping",5),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.Q6J("text",t.lcZ(2,1,"you-won")))}function f(a,e){if(1&a&&(t.ynx(0),t.YNc(1,b,3,3,"div",3),t.BQk()),2&a){const p=t.oxw(),g=t.MAs(2);t.xp6(1),t.Q6J("ngIf",p.pool.hasCurrentUserWon)("ngIfElse",g)}}function x(a,e){if(1&a&&(t.TgZ(0,"div",7)(1,"div",8)(2,"div",9),t._UZ(3,"img",10),t.qZA(),t.TgZ(4,"div",11),t._UZ(5,"img",12),t.qZA()(),t.TgZ(6,"div",13),t._UZ(7,"app-text-jumping",5),t.qZA(),t.TgZ(8,"span",14),t._uU(9),t.ALo(10,"translate"),t.qZA()()),2&a){const p=t.oxw(2);t.xp6(5),t.Q6J("src",p.pool.winnerAvatar||"assets/images/sign-up-user.svg",t.LSH),t.xp6(2),t.Q6J("text",p.pool.winnerName),t.xp6(2),t.Oqu(t.lcZ(10,3,"pool-winner"))}}function C(a,e){if(1&a&&t.YNc(0,x,11,5,"div",6),2&a){const p=t.oxw(),g=t.MAs(4);t.Q6J("ngIf",p.finished)("ngIfElse",g)}}function A(a,e){if(1&a&&(t.TgZ(0,"p",15),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a){const p=t.oxw();t.ekj("animated-elipsis",2===p.pool.status||100===p.pool.status)("invisible",0==p.pool.status),t.xp6(1),t.hij(" ",t.lcZ(2,5,p.statusMap[p.pool.status])," ")}}let P=(()=>{class a{constructor(){this.showLoadingNextPool=!0,this.statusMap={0:"100%",1:"lottery-drawn",2:"drawing-winner",3:"drawing-start-soon",4:"expired",5:"paused",10:"drawing-start-soon",100:"drawing-start-soon"}}get finished(){return this.pool?.status==i.j1.DRAWN||this.pool?.status==i.j1.EXPIRED}ngOnInit(){this.showLoadingNextPool&&(this.statusMap[100]="loading-next-pool")}}return a.\u0275fac=function(p){return new(p||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-bidding-pool-status"]],inputs:{pool:"pool",showLoadingNextPool:"showLoadingNextPool"},decls:5,vars:1,consts:[[4,"ngIf"],["notWon",""],["notFinished",""],["class","you-won pt-0.5 pb-px px-2 uppercase text-xs font-bold rounded-md text-black",4,"ngIf","ngIfElse"],[1,"you-won","pt-0.5","pb-px","px-2","uppercase","text-xs","font-bold","rounded-md","text-black"],[3,"text"],["class","winner-content font-medium text-base flex flex-nowrap items-center mt-0.5 mb-1",4,"ngIf","ngIfElse"],[1,"winner-content","font-medium","text-base","flex","flex-nowrap","items-center","mt-0.5","mb-1"],[1,"winner-avatar","relative"],[1,"absolute","crown"],["src","assets/images/golden-crown-100px.png","srcset","assets/images/golden-crown-100px.png 1x, assets/images/golden-crown-250px.png 2x",1,"w-full","h-full"],[1,"winner-avatar-img","object-cover","w-8","h-8","rounded-full","overflow-hidden"],[1,"w-full","h-full",3,"src"],[1,"winner-name","truncate","text-black","ml-1"],[1,"tag","capitalize",2,"--color","#FFDC3F"],[1,"pool-status","text-black","text-base","font-bold","text-center","whitespace-nowrap","select-none"]],template:function(p,g){1&p&&(t.YNc(0,f,2,2,"ng-container",0),t.YNc(1,C,1,2,"ng-template",null,1,t.W1O),t.YNc(3,A,3,7,"ng-template",null,2,t.W1O)),2&p&&t.Q6J("ngIf",g.pool)},dependencies:[h.O5,c.P,v.X$],styles:['@charset "UTF-8";.animated-elipsis[_ngcontent-%COMP%]:after{overflow:hidden;display:inline-block;vertical-align:bottom;transform:translate(-2px);animation:ellipsis-animation steps(1,end) 2s infinite;content:"\\2026"}@keyframes ellipsis-animation{0%{clip-path:inset(0 100% 0 0)}25%{clip-path:inset(0 66.6% 0 0)}50%{clip-path:inset(0 33.3% 0 0)}75%{clip-path:inset(0 0 0 0)}}.you-won[_ngcontent-%COMP%]{position:relative;overflow:hidden}.you-won[_ngcontent-%COMP%]:after{content:"";top:0;transform:translate(100%);width:100%;height:100%;position:absolute;background:linear-gradient(to right,rgba(255,255,255,0) 0%,rgba(255,255,255,.6) 50%,rgba(128,186,232,0) 99%,rgba(125,185,232,0) 100%);animation:3s shinebg 1.2s forwards infinite}@keyframes shinebg{0%{transform:translate(-100%)}to{transform:translate(100%)}}.avatar[_ngcontent-%COMP%]{width:20px!important;height:20px;min-width:20px}.tag[_ngcontent-%COMP%]{display:inline-block;z-index:1;text-align:center;color:#000;height:20px;position:relative;border-left:none;background-color:var(--color);min-width:50px;margin-left:12px;padding-left:6px;border-radius:0 4px 4px 0;font-size:14px;line-height:20px;padding-right:6px}.tag[_ngcontent-%COMP%]:before{content:"";z-index:-1;position:absolute;top:3px;left:-7px;width:14px;height:14px;background-color:var(--color);border-right:none;border-top:none;transform:rotate(45deg)}.crown[_ngcontent-%COMP%]{left:0;right:0;margin-left:auto;margin-right:auto;top:-6px;width:23px;z-index:1}.winner-avatar-img[_ngcontent-%COMP%]{position:relative;margin-top:4px}']}),a})()},60928:(L,B,o)=>{o.d(B,{w:()=>v});var i=o(24837),t=o(94650),h=o(36895);const c=function(b){return{width:b}};let v=(()=>{class b{constructor(x){this.cdr=x,this.hasEntered=!1,this.rebuildOnRefresh=!0,this.hasInit=!1}ngAfterViewInit(){i.Z.isBrowser&&setTimeout(()=>{this.hasInit=!0,this.cdr.detectChanges()},500)}get showPercentage(){return this.currentPoolPercentage>0&&this.currentPoolPercentage<1?1:this.currentPoolPercentage}}return b.\u0275fac=function(x){return new(x||b)(t.Y36(t.sBO))},b.\u0275cmp=t.Xpm({type:b,selectors:[["app-bidding-progress-bar"]],inputs:{currentPoolPercentage:"currentPoolPercentage",hasEntered:"hasEntered",rebuildOnRefresh:"rebuildOnRefresh"},decls:2,vars:7,consts:[[1,"progress-bar","border","border-solid","w-full","bg-white","rounded-full","h-3","md:h-3.5","overflow-hidden"],[1,"progress","h-full","rounded-full","rounded-r-none",3,"ngStyle"]],template:function(x,C){1&x&&(t.TgZ(0,"div",0),t._UZ(1,"div",1),t.qZA()),2&x&&(t.ekj("entered",C.hasEntered&&C.showPercentage<100)("filled",C.showPercentage>=100),t.xp6(1),t.Q6J("ngStyle",t.VKq(5,c,(C.hasInit||!C.rebuildOnRefresh?C.showPercentage:0)+"%")))},dependencies:[h.PC],styles:['.progress-bar[_ngcontent-%COMP%]{border-color:#49a4fd;background-color:#f0f0f0}.progress-bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{position:relative;background:linear-gradient(to right,rgb(122,234,254),rgb(1,126,255));box-shadow:0 0 .1em #b0dcff inset,0 0 .1em #97d0ff inset;transition:width .4s ease}.progress-bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]:after{content:"";top:0;transform:translate(100%);width:100%;height:100%;position:absolute;background:linear-gradient(to right,rgba(255,255,255,0) 0%,rgba(255,255,255,.3) 50%,rgba(255,255,255,0) 100%);animation:progress 3s infinite}.progress-bar.entered[_ngcontent-%COMP%]{border-color:#c45afc}.progress-bar.entered[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(251,91,251),rgb(128,7,250));box-shadow:0 0 .1em #b758fb inset,0 0 .1em #ad3ffb inset}.progress-bar.filled[_ngcontent-%COMP%]{border-color:#ffb559}.progress-bar.filled[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(251,218,90),rgb(255,168,77));box-shadow:0 0 .1em #ffa84d inset,0 0 .1em #ffa84d inset}@keyframes progress{0%{transform:translate(-100%)}to{transform:translate(100%)}}']}),b})()},18215:(L,B,o)=>{o.d(B,{Z:()=>v});var i=o(94650),t=o(68514),h=o(54463);function c(b,f){if(1&b){const x=i.EpF();i.TgZ(0,"div",0)(1,"button",1),i.NdJ("click",function(){const P=i.CHM(x).method,a=i.oxw();return i.KtG(a.handleBtnClick(P))}),i._UZ(2,"img",2),i.TgZ(3,"div",3),i._uU(4),i.ALo(5,"translate"),i.qZA()()()}2&b&&(i.xp6(4),i.Oqu(i.lcZ(5,1,"toolkit-official-button")))}let v=(()=>{class b{constructor(){}handleBtnClick(x){x(this.additionalData)}}return b.\u0275fac=function(x){return new(x||b)},b.\u0275cmp=i.Xpm({type:b,selectors:[["app-global-customer-service"]],inputs:{additionalData:"additionalData"},decls:2,vars:0,consts:[[1,"content-wrapper","hidden","md:block","rounded-l-2xl","border-y","border-l","border-solid","py-4","px-2","bg-white","shadow-xl","absolute","right-0","w-16","transform","-translate-y-1/2",2,"z-index","999"],[1,"inline",3,"click"],["src","assets/images/toolkit-item1.png","alt","",1,"m-auto","h-10","mb-1","support-img"],[1,"text-xs","font-light","text-center"]],template:function(x,C){1&x&&(i.TgZ(0,"app-customer-service"),i.YNc(1,c,6,3,"ng-template"),i.qZA())},dependencies:[t.M,h.X$],styles:["[_nghost-%COMP%]{position:sticky;top:50%;right:0;z-index:100;display:block}.content-wrapper[_ngcontent-%COMP%]{background-color:var(--bgSecondaryColor);color:var(--textColor)}  .dark-mode app-global-customer-service .content-wrapper{border-color:var(--borderColor)}  .dark-mode app-global-customer-service .content-wrapper .support-img{filter:invert(1)}  .light-mode app-global-customer-service .content-wrapper{border-color:#e9e9e9}"]}),b})()},23284:(L,B,o)=>{o.d(B,{Y:()=>W});var i=o(15861),t=o(82722),h=o(49808),c=o(5963),v=o(83905),b=o(95698),f=o(70262),x=o(39646),C=o(24837),A=o(18110),P=o(93379),a=o(5565),e=o(94650),p=o(56889),g=o(36895),D=o(95133),y=o(7507),N=o(7858),K=o(63225),F=o(56095),Q=o(60928),J=o(10709),Y=o(70325),j=o(16879);const z=["biddingButton"];function G(d,O){1&d&&(e.TgZ(0,"div",13),e._UZ(1,"span"),e.qZA())}function $(d,O){if(1&d&&e.GkF(0,14),2&d){const n=e.oxw(),l=e.MAs(13),m=e.MAs(11);e.Q6J("ngTemplateOutlet",n.isBiddingMode?l:m)}}function V(d,O){if(1&d&&e._UZ(0,"img",15),2&d){const n=e.oxw();e.Q6J("ngClass",n.isBiddingMode?"!w-10 top-0 left-0":"!w-12 bottom-0 right-0")}}function H(d,O){if(1&d){const n=e.EpF();e.TgZ(0,"app-bid-button",16),e.NdJ("onPoolCompleted",function(m){e.CHM(n);const I=e.oxw();return e.KtG(I.onPoolCompleted(m))})("onPoolUpdated",function(m){e.CHM(n);const I=e.oxw();return e.KtG(I.onPoolUpdated(m))}),e.qZA()}if(2&d){const n=e.oxw();e.Q6J("product",n.product)("pool",n.pool)("animationTarget",n.animationTarget)("isLogin",n.isLogin)}}const k=function(){return["/product","detail"]},Z=function(d,O){return{id:d,poolId:O}};function q(d,O){if(1&d&&(e.TgZ(0,"a",2)(1,"p",17),e._uU(2),e.qZA(),e.TgZ(3,"p",18),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.TgZ(6,"p",19),e._uU(7),e.ALo(8,"currency"),e.qZA()()),2&d){const n=e.oxw();e.Q6J("routerLink",e.DdM(9,k))("queryParams",e.WLB(10,Z,n.product.id,n.pool.poolId||null)),e.xp6(2),e.hij(" ",n.product.name," "),e.xp6(2),e.hij(" ",e.lcZ(5,5,n.price)," "),e.xp6(3),e.hij(" ",e.lcZ(8,7,n.realPrice)," ")}}function X(d,O){if(1&d&&e._UZ(0,"img",25),2&d){const n=e.oxw().isBelong;e.Q6J("src",n?"assets/svgs/heart-full.svg":"assets/svgs/heart-empty.svg",e.LSH)}}function tt(d,O){if(1&d&&e._UZ(0,"app-heart-animated",27),2&d){const n=e.oxw(2).isBelong;e.Q6J("active",n)}}function u(d,O){1&d&&e.YNc(0,tt,1,1,"app-heart-animated",26)}function T(d,O){if(1&d){const n=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(m){const R=e.CHM(n).method,et=e.oxw(2);return e.KtG(et.handleClickFavorite(m,R))}),e.YNc(1,X,1,1,"img",23),e.YNc(2,u,1,0,"ng-template",null,24,e.W1O),e.qZA()}if(2&d){const n=O.isDisabled,l=e.MAs(3),m=e.oxw(2);e.Q6J("disabled",n),e.xp6(1),e.Q6J("ngIf",!m.didClicked)("ngIfElse",l)}}function _(d,O){if(1&d){const n=e.EpF();e.TgZ(0,"div",20)(1,"app-product-favorite",21),e.NdJ("isBelongChange",function(){e.CHM(n);const m=e.oxw();return e.KtG(m.triggerChange())}),e.YNc(2,T,4,3,"ng-template"),e.qZA()()}if(2&d){const n=e.oxw();e.xp6(1),e.Q6J("product",n.product)}}function r(d,O){if(1&d){const n=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(m){const R=e.CHM(n).method;return m.preventDefault(),m.stopPropagation(),e.KtG(R())}),e.TgZ(1,"div",31),e._UZ(2,"img",32),e.qZA()()}}function s(d,O){if(1&d&&(e.TgZ(0,"div",28)(1,"app-launch-pool",29),e.YNc(2,r,3,0,"ng-template"),e.qZA()()),2&d){const n=e.oxw();e.xp6(1),e.Q6J("product",n.product)}}function M(d,O){if(1&d&&(e.TgZ(0,"p",38),e._uU(1),e.ALo(2,"number"),e.qZA()),2&d){const n=e.oxw(2);e.xp6(1),e.hij(" ",e.xi3(2,1,n.pool.currentPoolPercentage,"0.0-0"),"% ")}}function w(d,O){if(1&d&&e._UZ(0,"app-bidding-pool-status",39),2&d){const n=e.oxw(2);e.Q6J("pool",n.pool)}}const E=function(d){return{id:d,poolId:null}};function U(d,O){if(1&d&&(e.TgZ(0,"div",33)(1,"a",34),e._uU(2),e.qZA(),e._UZ(3,"app-bidding-progress-bar",35),e.YNc(4,M,3,4,"p",36),e.YNc(5,w,1,1,"ng-template",null,37,e.W1O),e.qZA()),2&d){const n=e.MAs(6),l=e.oxw();e.xp6(1),e.Q6J("routerLink",e.DdM(7,k))("queryParams",e.VKq(8,E,l.product.id)),e.xp6(1),e.hij(" ",l.product.name," "),e.xp6(1),e.Q6J("currentPoolPercentage",l.pool.currentPoolPercentage)("hasEntered",l.pool.bidAmount>0),e.xp6(1),e.Q6J("ngIf",l.pool.currentPoolPercentage<100)("ngIfElse",n)}}const S=function(d){return{glowing:d}};let W=(()=>{class d extends a.V{constructor(n,l){super(),this.cdr=n,this.biddingService=l,this.biddingButton=null,this.isBiddingMode=!1,this.identifierPrefix="",this.didClicked=!1,this.hideLoader=!1}ngOnChanges(n){n.product&&this.biddingService.isBiddingMode$.getValue()&&!this.biddingService.isBiddingInProgress&&this.setPoolConfig()}ngOnInit(){this.setPoolConfig(),this.animationTarget=`#${this.identifierPrefix}home-product-${this.product.id}`,this.biddingService.onUpdateProductCardBidAmount$.pipe((0,t.R)(this.destroyStream$)).subscribe(n=>{n.poolId==this.pool?.poolId&&(n.bidAmount!=this.pool.bidAmount||n.currentPoolSize!=this.pool.currentPoolSize||n.status!=this.pool.status)&&(console.log(n),this.pool.bidAmount=n.bidAmount,this.pool.currentPoolSize=n.currentPoolSize,this.pool.currentPoolPercentage=n.currentPoolPercentage,this.pool.status=n.status,this.cdr.detectChanges())})}get realPrice(){let n=0;return this.product.defaultSku&&(n=this.product.defaultSku.cashBack),this.product.defaultSku?.price-(n||0)}get price(){return this.product.defaultSku?.price}handleClickFavorite(n,l){n.preventDefault(),n.stopPropagation(),this.isLogin?(this.didClicked=!0,setTimeout(()=>{l()},100)):l()}triggerChange(){this.cdr.markForCheck()}onPoolCompleted(n){var l=this;return(0,i.Z)(function*(){console.log("Pool completed!"),C.Z.isBrowser&&(l.pool.status=2,l.cdr.detectChanges(),yield(0,h.n)((0,c.H)(3e3)),l.pool.status=100,l.cdr.detectChanges(),yield(0,h.n)((0,c.H)(2e3))),l.getNewProductPool(),l.cdr.detectChanges()})()}onPoolUpdated(n){var l=this;return(0,i.Z)(function*(){const m=yield(0,v.z)(l.biddingService.getProductPools({rows:1,page:0,poolId:n.poolId}).pipe((0,b.q)(1))),I=m?.rows?m.rows.find(R=>R.id==n?.poolId):null;I&&(n.currentPoolSize=I.currentTickets,n.currentPoolPercentage=(0,A.DU)(I.currentTickets,I.maxTickets),n.bidAmount=I.userTotalTickets,console.log("Pool updated!"),l.cdr.detectChanges())})()}setPoolConfig(){this.pool={poolId:this.product.poolId,poolOwner:{id:this.product.sponsorId,userId:this.product.sponsorName,avatar:this.product.sponsorAvatar??"assets/images/sign-up-user.svg"},currentPoolSize:this.product.currentTickets,currentPoolPercentage:(0,A.DU)(this.product.currentTickets,this.product.maxTickets),poolLimit:this.product.maxTickets,userMaxTickets:this.product.userMaxTickets,bidAmount:this.product.userTotalTickets,status:this.product.status}}getNewProductPool(){var n=this;return(0,i.Z)(function*(){const l=yield(0,v.z)(n.biddingService.getProductPools({rows:1,page:0,skuId:n.product.productSkuId,status:0}).pipe((0,f.K)(m=>(0,x.of)({error:m}))));if(l?.rows?.length>0){const m=l.rows[0];n.pool={poolId:m.id,poolOwner:{id:m.sponsorId,userId:m.sponsorName,avatar:m.sponsorAvatar??"/assets/images/sign-up-user.svg"},currentPoolSize:m.currentTickets,currentPoolPercentage:(0,A.DU)(m.currentTickets,m.maxTickets),poolLimit:m.maxTickets,userMaxTickets:n.product.userMaxTickets,bidAmount:m.userTotalTickets,status:m.status}}else n.pool={poolId:"",poolOwner:{id:0,userId:"",avatar:"/assets/images/sign-up-user.svg"},currentPoolSize:0,currentPoolPercentage:0,poolLimit:n.pool.poolLimit,userMaxTickets:n.product.userMaxTickets,bidAmount:0,status:P.j1.OPEN};n.cdr.detectChanges(),n.biddingService.onUpdateProductCardBidAmount$.next({poolId:n.pool.poolId,bidAmount:n.pool.bidAmount,currentPoolSize:n.pool.currentPoolSize,currentPoolPercentage:n.pool.currentPoolPercentage,status:n.pool.status})})()}}return d.\u0275fac=function(n){return new(n||d)(e.Y36(e.sBO),e.Y36(p.g))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-product-card"]],viewQuery:function(n,l){if(1&n&&e.Gf(z,5),2&n){let m;e.iGM(m=e.CRH())&&(l.biddingButton=m.first)}},inputs:{product:"product",isLogin:"isLogin",isBiddingMode:"isBiddingMode",identifierPrefix:"identifierPrefix"},features:[e.qOj,e.TTD],decls:16,vars:17,consts:[["draggable","false",1,"product-wrapper","cursor-pointer","flex","flex-col","w-full","max-w-[246px]","lg:max-w-[220px]","xl:max-w-[245px]",3,"id"],[1,"product-image-wraper","rounded-lg","overflow-hidden","mb-2"],[3,"routerLink","queryParams"],[1,"absolute","inset-0","overflow-hidden",3,"ngClass"],[1,"object-cover","object-center","!w-full","!h-full","relative","z-10","product-img",3,"src","alt","load"],["class","loader-container absolute inset-0",4,"ngIf"],[3,"ngTemplateOutlet",4,"isBrowser"],["class","absolute fire-animation z-10","src","assets/svgs/fire-animation.svg","alt","",3,"ngClass",4,"ngIf"],["class","w-full",3,"product","pool","animationTarget","isLogin","onPoolCompleted","onPoolUpdated",4,"ngIf"],[3,"routerLink","queryParams",4,"ngIf","ngIfElse"],["favoriteBtn",""],["launchBtn",""],["biddingInfo",""],[1,"loader-container","absolute","inset-0"],[3,"ngTemplateOutlet"],["src","assets/svgs/fire-animation.svg","alt","",1,"absolute","fire-animation","z-10",3,"ngClass"],[1,"w-full",3,"product","pool","animationTarget","isLogin","onPoolCompleted","onPoolUpdated"],[1,"product-title","truncate","text-center","font-medium","mb-1","text-sm"],[1,"text-[#ff1a44]","leading-3","line-through","text-center","whitespace-nowrap","text-xs"],[1,"text-strong","text-base","text-center","whitespace-nowrap","font-bold"],[1,"absolute","top-0","right-0","mr-1.5","mt-1.5","z-10"],[3,"product","isBelongChange"],[1,"rounded-full","border","border-solid","border-[#dddddd]","bg-white","w-full","flex","p-1","justify-center","items-center","text-[#dddddd]",3,"disabled","click"],["class","heart-img","alt","",3,"src",4,"ngIf","ngIfElse"],["haveNotClicked",""],["alt","",1,"heart-img",3,"src"],[3,"active",4,"isBrowser"],[3,"active"],[1,"absolute","top-0","right-0","mr-1.5","mt-1.5","z-10","bg-white","rounded-full"],[3,"product"],[1,"launch-pool","w-full","launch-btn","rounded-full","bg-rainbow-animated","!shadow-none","!p-px",3,"click"],[1,"content","bg-white","p-1","rounded-full","border-2","border-black","w-full","flex","items-center"],["src","assets/images/bidding/star.png",1,"!h-4","2xl:!h-5"],[1,"cursor-default"],[1,"product-title","block","truncate","text-strong","text-center","font-medium","mb-2.5","text-sm","select-none",3,"routerLink","queryParams"],[3,"currentPoolPercentage","hasEntered"],["class","invisible leading-4 -mt-1 text-strong font-bold mb-px text-center whitespace-nowrap text-sm select-none",4,"ngIf","ngIfElse"],["drawingWinner",""],[1,"invisible","leading-4","-mt-1","text-strong","font-bold","mb-px","text-center","whitespace-nowrap","text-sm","select-none"],[3,"pool"]],template:function(n,l){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"a",2)(3,"div",3)(4,"img",4),e.NdJ("load",function(){return l.hideLoader=!0}),e.qZA(),e.YNc(5,G,2,0,"div",5),e.qZA(),e.YNc(6,$,1,1,"ng-container",6),e.YNc(7,V,1,1,"img",7),e.qZA(),e.YNc(8,H,1,4,"app-bid-button",8),e.qZA(),e.YNc(9,q,9,13,"a",9),e.qZA(),e.YNc(10,_,3,1,"ng-template",null,10,e.W1O),e.YNc(12,s,3,1,"ng-template",null,11,e.W1O),e.YNc(14,U,7,10,"ng-template",null,12,e.W1O)),2&n){const m=e.MAs(15);e.s9C("id",l.identifierPrefix+"home-product-"+l.product.id),e.xp6(2),e.Q6J("routerLink",e.DdM(11,k))("queryParams",e.WLB(12,Z,l.product.id,l.isBiddingMode?l.pool.poolId||0:null)),e.xp6(1),e.Q6J("ngClass",e.VKq(15,S,l.product.isSpecialSale&&!l.isBiddingMode)),e.xp6(1),e.Q6J("src",l.product.productImages[0].medium,e.LSH)("alt",l.product.name),e.xp6(1),e.Q6J("ngIf",!l.hideLoader),e.xp6(2),e.Q6J("ngIf",l.product.isSpecialSale),e.xp6(1),e.Q6J("ngIf",l.isBiddingMode),e.xp6(1),e.Q6J("ngIf",!l.isBiddingMode)("ngIfElse",m)}},dependencies:[g.mk,g.O5,g.tP,D.Fo,y.yS,N.j,K.E,F.y,Q.w,J.u,Y.P,j.j,g.JJ,g.H9],styles:['.product-image-wraper[_ngcontent-%COMP%]{position:relative;width:100%;height:unset;padding-top:100%}.product-image-wraper[_ngcontent-%COMP%]   .product-img[_ngcontent-%COMP%]{border-radius:9px}.product-image-wraper[_ngcontent-%COMP%]:hover     .bidding-bar.can-bid{transform:scaleY(1.3);transform-origin:bottom}.product-image-wraper[_ngcontent-%COMP%]:hover     .bidding-bar.can-bid img, .product-image-wraper[_ngcontent-%COMP%]:hover     .bidding-bar.can-bid .bid-amount, .product-image-wraper[_ngcontent-%COMP%]:hover     .bidding-bar.can-bid .enter-now{transform:scaleY(.76)}  .bidding-mode-global app-product-card .product-img{border:1px solid #ebebeb;background-color:#fff}  .bidding-mode-global app-product-card{margin-top:4px;margin-bottom:4px}  .bidding-mode-global app-product-card:hover{border-radius:9px;background:#ECF0F2;box-shadow:0 0 0 4px #ddd}  .bidding-mode-global app-product-card:hover>div{box-shadow:0 0 0 3px #ecf0f2;background:#ECF0F2;border-radius:9px}app-bid-button[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0}app-bid-button[_ngcontent-%COMP%]     .bidding-bar{width:100%;border-radius:0;border:none;height:40px}app-bid-button[_ngcontent-%COMP%]     .bidding-bar .bid-amount.large-value{padding-left:3.5rem}app-bid-button[_ngcontent-%COMP%]     .pool-text{font-size:1.5rem;line-height:1.5rem}@media (min-width: 1440px){app-bid-button[_ngcontent-%COMP%]     .no-login{margin-left:20px}}app-heart-animated[_ngcontent-%COMP%], .heart-img[_ngcontent-%COMP%]{height:28px!important;width:28px!important}.glowing[_ngcontent-%COMP%]{border-radius:.5rem;padding:2px;box-shadow:0 0 5px 2px #ffd80099}.glowing[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;border-radius:inherit;border-radius:.5rem;z-index:1;background:linear-gradient(to top,#f68104,#ffd800)}.loader-container[_ngcontent-%COMP%]{z-index:3;margin:2px;border-radius:.5rem;background-color:#e7e8e7}.loader-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;position:absolute;height:32px;width:32px;clip:rect(16px,32px,32px,0);margin:auto;inset:0;animation:loader-2-2 1.5s cubic-bezier(.77,0,.175,1) infinite}@keyframes loader-2-2{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loader-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;inset:0;margin:auto;height:32px;width:32px;border:3px solid transparent;border-top:3px solid rgba(0,0,0,.3);border-radius:50%;animation:loader-2-3 1.5s cubic-bezier(.77,0,.175,1) infinite}@keyframes loader-2-3{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loader-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;inset:0;margin:auto;height:32px;width:32px;border:3px solid rgba(0,0,0,.3);border-radius:50%}app-bidding-pool-status[_ngcontent-%COMP%]     .pool-status{margin-bottom:1px;font-size:.875rem;line-height:1.25rem}  .dark-mode app-product-card .product-wrapper{background:var(--bgPanelColor);border-radius:12px;padding:4px}@media (min-width: 768px){  .dark-mode app-product-card .product-wrapper{padding:6px}}  .dark-mode app-product-card .product-wrapper .product-title{color:var(--textColor)}  .dark-mode app-product-card:hover{background:transparent;box-shadow:none}  .dark-mode app-product-card:hover .product-wrapper{box-shadow:none;background:#2c364a}  .light-mode app-product-card .product-wrapper .product-title{color:#333}'],changeDetection:0}),d})()},56095:(L,B,o)=>{o.d(B,{y:()=>P});var i=o(94650),t=o(5565),h=o(45329),c=o(36895),v=o(63225),b=o(60753);function f(a,e){}function x(a,e){if(1&a){const p=i.EpF();i.TgZ(0,"app-require-login-modal",3),i.NdJ("isOpenChange",function(D){i.CHM(p);const y=i.oxw(2);return i.KtG(y.openRequireLoginModal=D)}),i.qZA()}if(2&a){const p=i.oxw(2);i.Q6J("isOpen",p.openRequireLoginModal)}}function C(a,e){if(1&a&&(i.ynx(0),i.YNc(1,x,1,1,"app-require-login-modal",2),i.BQk()),2&a){const p=i.oxw();i.xp6(1),i.Q6J("ngIf",p.openRequireLoginModal)}}const A=function(a,e,p,g){return{method:a,isBelong:e,isLoading:p,isDisabled:g}};let P=(()=>{class a extends t.V{constructor(p){super(),this.userService=p,this.isBelongChange=new i.vpe,this.isBelong=!1,this.isLoading=!1,this.openRequireLoginModal=!1,this.handleClick=()=>{this.userService.isLogin()?this.isBelong?(this.isLoading=!0,this.userService.removeFromWishList(this.product.id).subscribe({next:g=>{this.isBelong=!1,this.isBelongChange.emit(!1),this.isLoading=!1},error:g=>{this.isLoading=!1}})):(this.isLoading=!0,this.userService.addToWishList(this.product.id,this.skuId||this.product.defaultSku?.id).subscribe({next:g=>{this.isBelong=!0,this.isBelongChange.emit(!0),this.isLoading=!1},error:g=>{this.isLoading=!1}})):this.openRequireLoginModal=!0}}ngOnInit(){this.isBelong=this.product.collect}get isDisabled(){return!this.skuId&&!this.product?.defaultSku}}return a.\u0275fac=function(p){return new(p||a)(i.Y36(h.K))},a.\u0275cmp=i.Xpm({type:a,selectors:[["app-product-favorite"]],contentQueries:function(p,g,D){if(1&p&&i.Suo(D,i.Rgc,5),2&p){let y;i.iGM(y=i.CRH())&&(g.templateRef=y.first)}},inputs:{product:"product",skuId:"skuId"},outputs:{isBelongChange:"isBelongChange"},features:[i.qOj],decls:3,vars:7,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"isBrowser"],[3,"isOpen","isOpenChange",4,"ngIf"],[3,"isOpen","isOpenChange"]],template:function(p,g){1&p&&(i.ynx(0),i.YNc(1,f,0,0,"ng-template",0),i.YNc(2,C,2,1,"ng-container",1),i.BQk()),2&p&&(i.xp6(1),i.Q6J("ngTemplateOutlet",g.templateRef)("ngTemplateOutletContext",i.l5B(2,A,g.handleClick,g.isBelong,g.isLoading,g.isDisabled)))},dependencies:[c.O5,c.tP,v.E,b.C],encapsulation:2}),a})()},45210:(L,B,o)=>{o.d(B,{B:()=>c});var i=o(15861),t=o(24837),h=o(94650);let c=(()=>{class v{constructor(f){this.el=f,this.myValue=!0,this.content=f.nativeElement}ngAfterViewInit(){var f=this;return(0,i.Z)(function*(){t.Z.isServer||(f.btn=document.createElement("button"),f.btn.innerHTML='\n    <svg class="icon__arrow-up" viewBox="0 0 24 24">\n      <title>Back to top</title>\n      <path d="M18.71,11.71a1,1,0,0,1-1.42,0L13,7.41V19a1,1,0,0,1-2,0V7.41l-4.29,4.3a1,1,0,0,1-1.42-1.42l6-6a1,1,0,0,1,1.42,0l6,6A1,1,0,0,1,18.71,11.71Z"/>\n    </svg>',f.btn.classList.add("back-to-top-btn"),f.btn.addEventListener("click",()=>{f.content.scrollToTop(500)}),document.body.appendChild(f.btn),f.el.nativeElement.append(f.btn))})()}onScroll(f){f.detail.scrollTop>200?this.btn.classList.add("show-btn"):this.btn.classList.remove("show-btn")}}return v.\u0275fac=function(f){return new(f||v)(h.Y36(h.SBq))},v.\u0275dir=h.lG2({type:v,selectors:[["","backToTopBtn",""]],hostVars:1,hostBindings:function(f,x){1&f&&h.NdJ("ionScroll",function(A){return x.onScroll(A)}),2&f&&h.Ikx("overflow-scroll",x.myValue)}}),v})()}}]);