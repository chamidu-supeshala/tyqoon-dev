"use strict";(self.webpackChunkangular_tyqoon_client=self.webpackChunkangular_tyqoon_client||[]).push([[5509],{85898:(z,M,r)=>{r.d(M,{b:()=>J});var d=r(15861),_=r(77579),m=r(82722),h=r(59468),t=r(49808),f=r(24837),S=r(95133),P=r(54463),v=r(36895),w=r(44466),O=r(59809),I=r(5565),R=r(18110),C=r(7507),n=r(94650),T=r(35482),E=r(94830),b=r(56889),x=r(23284),A=r(90147);function L(c,u){if(1&c&&n._UZ(0,"app-product-card",6),2&c){const i=u.$implicit,a=n.oxw().ngLet,y=n.oxw().ngLet,o=n.oxw().ngLet;n.Q6J("product",i)("isBiddingMode",!!a)("canLaunchPool",!!o)("isLogin",!!y)}}function B(c,u){1&c&&n._UZ(0,"app-product-card-skeleton",8)}const Z=function(){return[]};function D(c,u){if(1&c&&(n.ynx(0),n.YNc(1,B,1,0,"app-product-card-skeleton",7),n.BQk()),2&c){const i=n.oxw(4);n.xp6(1),n.Q6J("ngForOf",n.DdM(2,Z).constructor(i.pageSize).fill(1))("ngForTrackBy",i.trackByFn2)}}function U(c,u){if(1&c&&(n.TgZ(0,"div",3),n.YNc(1,L,1,4,"app-product-card",4),n.YNc(2,D,2,3,"ng-container",5),n.qZA()),2&c){const i=n.oxw(3);n.xp6(1),n.Q6J("ngForOf",i.products)("ngForTrackBy",i.trackByFn),n.xp6(1),n.Q6J("ngIf",i.isLoading)}}function F(c,u){if(1&c&&(n.TgZ(0,"div"),n.YNc(1,U,3,3,"div",2),n.ALo(2,"async"),n.qZA()),2&c){const i=n.oxw(2);n.xp6(1),n.Q6J("ngLet",n.lcZ(2,1,i.biddingService.isBiddingMode$))}}function K(c,u){1&c&&(n.TgZ(0,"a",9),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&c&&(n.Q6J("routerLink","product/search"),n.xp6(1),n.hij(" ",n.lcZ(2,2,"see-more")," "))}function W(c,u){if(1&c&&(n.ynx(0),n.YNc(1,F,3,3,"div",0),n.ALo(2,"async"),n.YNc(3,K,3,4,"a",1),n.BQk()),2&c){const i=n.oxw();n.xp6(1),n.Q6J("ngLet",n.lcZ(2,2,i.userService.userInfo$)),n.xp6(2),n.Q6J("ngIf",i.isBiddingMode)}}let J=(()=>{class c extends I.V{constructor(i,a,y,o){super(),this.productService=i,this.userService=a,this.biddingService=y,this.cdr=o,this.offsetScroll=2e3,this.additionalParams={},this.isSSR=!1,this.biddingProductsSortOrder=0,this.shoppingModePageSize=20,this.biddingModePageSize=18,this.throttleScroll=new _.x,this.pageSize=20,this.page=-1,this.isLoading=!1,this.total=0,this.products=[],this.isBiddingMode=!1,this.scrollActive$=new _.x}ngOnInit(){console.log(8787878,this.biddingProductsSortOrder),!this.isSSR&&f.Z.isServer?this.isLoading=!0:this.biddingService.isBiddingMode$.pipe((0,m.R)(this.destroyStream$)).subscribe(i=>{this.isBiddingMode=i,this.page=-1,this.products=[],this.pageSize=this.isBiddingMode?this.biddingModePageSize:this.shoppingModePageSize,this.cdr.detectChanges(),this.refreshProducts(),this.initInfiniteScrolling()})}ngOnDestroy(){super.ngOnDestroy(),this.clearSubscriptions()}clearSubscriptions(){this.scrollActive$?.next(!1),this.scrollActive$?.complete()}ngAfterViewInit(){f.Z.isServer||this.initInfiniteScrolling()}initInfiniteScrolling(){var i=this;return(0,d.Z)(function*(){i.clearSubscriptions(),i.scrollContainer&&!i.isBiddingMode&&(i.scrollActive$=new _.x,i.scrollElement=yield i.scrollContainer.getScrollElement(),i.scrollContainer.ionScroll.pipe((0,m.R)(i.scrollActive$)).subscribe(a=>{i.scrollElement.scrollHeight-a.detail.scrollTop<i.offsetScroll&&i.throttleScroll.next(1)}),i.throttleScroll.pipe((0,h.p)(300),(0,m.R)(i.scrollActive$)).subscribe(()=>{i.fetchData()}))})()}ngOnChanges(i){}refreshProducts(){this.page=-1,this.total=0,this.products=[],this.fetchData()}fetchData(i=null){var a=this;return(0,d.Z)(function*(){const y=i??a.page+1;if(!a.isLoading&&(0===y||a.products.length<a.total)){a.isLoading=!0,a.page=y,a.cdr.markForCheck();const o=a.isBiddingMode?yield(0,t.n)(a.biddingService.getProductsWithPoolInfo({page:a.page,rows:a.pageSize,sortType:a.biddingProductsSortOrder,isRecommended:!0,...a.additionalParams})):yield(0,t.n)(a.productService.getProductsByMetaParamsV2({page:a.page,rows:a.pageSize,traceId:a.userService.traceId,isRecommended:!0,...a.additionalParams}));o.rows=(0,R.DI)(o.rows||[]),a.products=[...a.products,...o.rows||[]],a.total=o.total,a.isLoading=!1,a.cdr.markForCheck()}})()}clear(){this.page=-1,this.isLoading=!1,this.total=0,this.products=[]}trackByFn(i,a){return a.id}trackByFn2(i){return i}}return c.\u0275fac=function(i){return new(i||c)(n.Y36(T.s),n.Y36(E.K),n.Y36(b.g),n.Y36(n.sBO))},c.\u0275cmp=n.Xpm({type:c,selectors:[["app-products-infinite-scroll"]],inputs:{scrollContainer:"scrollContainer",offsetScroll:"offsetScroll",additionalParams:"additionalParams",isSSR:"isSSR",biddingProductsSortOrder:"biddingProductsSortOrder",shoppingModePageSize:"shoppingModePageSize",biddingModePageSize:"biddingModePageSize"},standalone:!0,features:[n.qOj,n.TTD,n.jDz],decls:2,vars:3,consts:[[4,"ngLet"],["class","px-6 py-1 capitalize mx-auto mt-4 mb-2 see-more block w-fit border border-solid rounded-lg text-2xl text-center font-medium text-white",3,"routerLink",4,"ngIf"],["class","grid grid-cols-2 xs:grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-x-2 gap-y-6",4,"ngLet"],[1,"grid","grid-cols-2","xs:grid-cols-3","sm:grid-cols-4","md:grid-cols-5","lg:grid-cols-6","gap-x-2","gap-y-6"],["class","block",3,"product","isBiddingMode","canLaunchPool","isLogin",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"block",3,"product","isBiddingMode","canLaunchPool","isLogin"],["class","block",4,"ngFor","ngForOf","ngForTrackBy"],[1,"block"],[1,"px-6","py-1","capitalize","mx-auto","mt-4","mb-2","see-more","block","w-fit","border","border-solid","rounded-lg","text-2xl","text-center","font-medium","text-white",3,"routerLink"]],template:function(i,a){1&i&&(n.YNc(0,W,4,4,"ng-container",0),n.ALo(1,"async")),2&i&&n.Q6J("ngLet",n.lcZ(1,1,a.biddingService.canLaunchPool$))},dependencies:[P.aw,P.X$,v.ez,v.sg,v.O5,v.Ov,S.Pc,S.Fo,w.m,x.Y,A.h,O.I,C.Bz,C.yS],styles:[".see-more[_ngcontent-%COMP%]{background:linear-gradient(to right,#8467ff 0%,#eb00ff 100%);border-color:#9d2ec3;min-width:160px}.see-more[_ngcontent-%COMP%]:hover{color:#fff;background:linear-gradient(to right,#7454ff 0%,#bb00cb 100%)}"],changeDetection:0}),c})()},65509:(z,M,r)=>{r.r(M),r.d(M,{MartModule:()=>y});var d=r(36895),_=r(7507),m=r(24499);const h=[{name:"mart-fresh-groceries",icon:"/assets/images/mart-fresh-groceries.png",activityId:"70833251"},{name:"category-beautiy-health",icon:"/assets/images/mart-category-beauty-min.png",activityId:"49845326"},{name:"category-FOOD-&-DINING",icon:"/assets/images/mart-category-food-min.png",activityId:"49846331"},{name:"mart-health-wellness",icon:"/assets/images/mart-category-health-min.png",activityId:"49846966"},{name:"mart-home-living",icon:"/assets/images/mart-category-home-living-min.png",activityId:"49847602"},{name:"mart-kids-babies",icon:"/assets/images/mart-category-kids-min.png",activityId:"49848814"}];var t=r(94650),f=r(95133),S=r(85898),P=r(81152),v=r(46032),w=r(8136),O=r(49127),I=r(45210),R=r(18215),C=r(54463);const n=function(o){return{activityId:o}};let T=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-mart-category"]],inputs:{martCategory:"martCategory"},decls:6,vars:9,consts:[[1,"mart-category","flex","flex-col","items-center","justify-center","mx-2",3,"routerLink","queryParams"],[1,"mart-category__icon","rounded-full","mb-2"],[3,"src","alt"],[1,"mart-category__name","text-white","text-center"]],template:function(e,s){1&e&&(t.TgZ(0,"a",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"p",3),t._uU(4),t.ALo(5,"translate"),t.qZA()()),2&e&&(t.Q6J("routerLink","/product/search")("queryParams",t.VKq(7,n,s.martCategory.activityId)),t.xp6(2),t.Q6J("src",s.martCategory.icon,t.LSH)("alt",s.martCategory.name),t.xp6(2),t.hij(" ",t.lcZ(5,5,s.martCategory.name)," "))},dependencies:[_.yS,f.Fo,C.X$],styles:[".mart-category__icon[_ngcontent-%COMP%]{width:67px;height:67px;box-shadow:0 4px 16px #4a4af8}@media (min-width: 1024px){.mart-category__icon[_ngcontent-%COMP%]{width:77px;height:77px}}.mart-category__name[_ngcontent-%COMP%]{width:67px;font-size:11px;line-height:1.25}@media (min-width: 1024px){.mart-category__name[_ngcontent-%COMP%]{width:77px;font-size:12.5px}}"]}),o})();var E=r(24837),b=r(54968),x=r(99485);const A=["swiper"];function L(o,p){if(1&o&&t._UZ(0,"app-mart-category",6),2&o){const e=t.oxw().$implicit;t.Q6J("martCategory",e)}}function B(o,p){1&o&&t.YNc(0,L,1,1,"ng-template",5)}const Z=function(o){return{"is-swiping":o}};function D(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"div",1),t.NdJ("touchstart",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.handleElementTouch())}),t.TgZ(1,"swiper",2,3),t.NdJ("init",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.handleInit())})("breakpoint",function(l){t.CHM(e);const g=t.oxw();return t.KtG(g.handleBreakPointChange(l))})("mouseenter",function(l){t.CHM(e);const g=t.oxw();return t.KtG(g.handleMouseEnter(l))})("mouseleave",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.handleMouseLeave())})("touchEnd",function(l){t.CHM(e);const g=t.oxw();return t.KtG(g.handleTouchEnd(l))})("transitionEnd",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.handleTransitionEnd())}),t.YNc(3,B,1,0,null,4),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,Z,e.isSwiping))("config",e.slideOpts),t.xp6(2),t.Q6J("ngForOf",e.categories)}}let U=(()=>{class o{constructor(){this.categories=h,this.isInitalize=!1,this.slideOpts={speed:2e4,freeMode:!0,loop:!0,autoplay:!1,slidesPerView:"auto",breakpoints:{340:{speed:2e4},640:{speed:2e4}}},this.oneRoundWidth=0,this.isSwiping=!1,this.isMouseEnter=!1,this.handleTransitionEnd=()=>{if(this.isInitalize&&!this.isSwiping&&!this.isMouseEnter){const e=this.categorySwiper?.swiperRef,s=e?.getTranslate();s===this.end1RoundPosition?setTimeout(()=>{e?.translateTo(this.initPosition,0,!0,!1)},0):(s<this.end1RoundPosition&&e?.translateTo(this.initPosition+(s-this.end1RoundPosition),0,!1,!1),setTimeout(()=>{e?.translateTo(this.end1RoundPosition,Math.abs(this.end1RoundPosition-e.getTranslate())/this.oneRoundWidth*this.speed1Round,!0,!1)},0))}}}ngOnInit(){}ngOnDestroy(){this.subscription?.unsubscribe()}handleInit(){E.Z.isServer||this.setTranslate()}handleMouseEnter(e){this.isMouseEnter=!0;const s=this.categorySwiper?.swiperRef,l=s?.getTranslate();s?.translateTo(l-10,0,!1,!1)}handleElementTouch(){const e=this.categorySwiper?.swiperRef;this.isMouseEnter=!0;const s=e?.getTranslate();e?.translateTo(s-10,0,!1,!1)}handleTouchStart([e,s]){this.isSwiping=!0}handleTouchEnd([e,s]){this.isSwiping=!1,"mouse"!==s.pointerType&&(this.isMouseEnter=!1);const l=this.categorySwiper?.swiperRef;l&&setTimeout(()=>{const g=l.getTranslate();l.translateTo(g>=this.end1RoundPosition?g:this.initPosition+(g-this.end1RoundPosition),0,!1,!1)},0),setTimeout(()=>{this.resumeSlide()},10)}handleMouseLeave(){this.isMouseEnter=!1,setTimeout(()=>{this.resumeSlide()},10)}resumeSlide(){if(!this.isSwiping&&!this.isMouseEnter){const e=this.categorySwiper?.swiperRef;if(e){const s=e.getTranslate();s>=this.end1RoundPosition||e?.translateTo(this.initPosition+(s-this.end1RoundPosition),0,!1,!1),e.translateTo(this.end1RoundPosition,Math.abs(this.end1RoundPosition-s)/this.oneRoundWidth*this.speed1Round,!0,!1)}}}setTranslate(){setTimeout(()=>{const e=this.categorySwiper?.swiperRef;if(e){const s=e.wrapperEl.querySelector(".swiper-slide");this.oneRoundWidth=(s?.clientWidth||0)*this.categories.length,e.translateTo(this.end1RoundPosition,this.speed1Round,!0,!1),this.isInitalize=!0,this.subscription=(0,b.R)(e.wrapperEl,"transitionend").subscribe(this.handleTransitionEnd)}},2e3)}get speed1Round(){const e=this.categorySwiper?.swiperRef;return e?.params.breakpoints?.[e.currentBreakpoint]?.speed||e?.params.speed||0}get initPosition(){return-this.oneRoundWidth}get end1RoundPosition(){return 2*this.initPosition}handleBreakPointChange([e,s]){setTimeout(()=>{const g=this.categorySwiper?.swiperRef?.wrapperEl.querySelector(".swiper-slide");this.oneRoundWidth=(g?.clientWidth||0)*this.categories.length},100)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-mart-category-slider"]],viewQuery:function(e,s){if(1&e&&t.Gf(A,5),2&e){let l;t.iGM(l=t.CRH())&&(s.categorySwiper=l.first)}},decls:1,vars:1,consts:[[3,"touchstart",4,"ngIf"],[3,"touchstart"],[1,"category-swiper",3,"ngClass","config","init","breakpoint","mouseenter","mouseleave","touchEnd","transitionEnd"],["swiper",""],[4,"ngFor","ngForOf"],["swiperSlide",""],[1,"w-full","h-full",3,"martCategory"]],template:function(e,s){1&e&&t.YNc(0,D,4,5,"div",0),2&e&&t.Q6J("ngIf",s.categories)},dependencies:[d.mk,d.sg,d.O5,x.nF,x.YC,T],styles:["swiper[_ngcontent-%COMP%]:not(.is-swiping)     .swiper-wrapper{transition-timing-function:linear!important}swiper[_ngcontent-%COMP%]     .swiper-wrapper{margin-left:-.25rem;margin-right:-.25rem}swiper[_ngcontent-%COMP%]     .swiper-slide{width:87px;padding:8px 4px 0;flex-shrink:0}@media (min-width: 1024px){swiper[_ngcontent-%COMP%]     .swiper-slide{width:97px}}"]}),o})();function F(o,p){1&o&&t._UZ(0,"app-mart-category",8),2&o&&t.Q6J("martCategory",p.$implicit)}let K=(()=>{class o{constructor(e){this.translateService=e,this.categories=h}ngOnInit(){}getTyqoonMartImageSm(){return"cn"===this.translateService.currentLang?"assets/images/tyqoon-mart-cn.png":"assets/images/tyqoon-mart.png"}getTyqoonMartImageLg(){switch(this.translateService.currentLang){case"cn":case"tr":return"assets/images/Tyqoon-mart-logo-cnv2-720px.png";default:return"assets/images/Tyqoon-mart-logo-720px-min.png"}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-mart-banner"]],decls:9,vars:3,consts:[[1,"mart-banner","w-full"],[1,"tyqoon-container","flex","flex-col","md:flex-row","md:items-center","py-6"],[1,"mart-logo","mb-4","md:mb-0"],["alt","Tyqoon mart mobile logo",1,"sm:hidden","h-full","object-contain",3,"src"],["alt","Tyqoon mart mobile logo",1,"hidden","sm:flex","h-full","object-contain",3,"src"],[1,"hidden","md:flex","flex-auto","justify-center","ml-4"],["class","h-full",3,"martCategory",4,"ngFor","ngForOf"],[1,"flex","md:hidden"],[1,"h-full",3,"martCategory"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3)(4,"img",4),t.qZA(),t.TgZ(5,"div",5),t.YNc(6,F,1,1,"app-mart-category",6),t.qZA(),t.TgZ(7,"div",7),t._UZ(8,"app-mart-category-slider"),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("src",s.getTyqoonMartImageSm(),t.LSH),t.xp6(1),t.Q6J("src",s.getTyqoonMartImageLg(),t.LSH),t.xp6(2),t.Q6J("ngForOf",s.categories))},dependencies:[d.sg,T,U],styles:[".mart-banner[_ngcontent-%COMP%]{background-image:linear-gradient(to right,#0189ff,#013dff)}.mart-banner[_ngcontent-%COMP%]   .mart-logo[_ngcontent-%COMP%]{height:118px}@media (min-width: 640px){.mart-banner[_ngcontent-%COMP%]   .mart-logo[_ngcontent-%COMP%]{height:136px}}@media (min-width: 768px){.mart-banner[_ngcontent-%COMP%]   .mart-logo[_ngcontent-%COMP%]{height:236px}}"]}),o})();const W=function(o){return{isRecommended:!1,activityId:o}},c=[{path:"",component:(()=>{class o extends m.c{constructor(e,s){super(e,s),this.categories=h,this.defaultCategory=h[0].activityId}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq),t.Y36(t.Qsj))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-mart"]],features:[t.qOj],decls:12,vars:6,consts:[["fullscreen","true","scrollEvents","true","backToTopBtn","",3,"ionScroll"],["ionContent",""],["appOverflowVisible","",1,"sticky","top-0","shadow-lg","z-50"],["header",""],[3,"forceFullWidthSearch"],[1,"tyqoon-container","min-h-[50vh]","mt-4"],[3,"additionalParams","scrollContainer","isSSR"],[1,"mt-4","md:hidden"]],template:function(e,s){if(1&e&&(t.TgZ(0,"ion-content",0,1),t.NdJ("ionScroll",function(g){return s.onContentScroll(g)}),t._UZ(2,"app-global-customer-service"),t.TgZ(3,"ion-toolbar",2,3),t._UZ(5,"app-top-navbar",4)(6,"app-top-menu"),t.qZA(),t._UZ(7,"app-mart-banner"),t.TgZ(8,"div",5),t._UZ(9,"app-products-infinite-scroll",6),t.qZA()(),t.TgZ(10,"ion-footer",7),t._UZ(11,"app-bottom-navbar"),t.qZA()),2&e){const l=t.MAs(1);t.xp6(5),t.Q6J("forceFullWidthSearch",!0),t.xp6(4),t.Q6J("additionalParams",t.VKq(4,W,s.defaultCategory))("scrollContainer",l)("isSSR",!0)}},dependencies:[f.W2,f.fr,f.sr,S.b,P.p,v.K,w.z,O.H,I.B,R.Z,K]}),o})()}];let u=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[_.Bz.forChild(c),_.Bz]}),o})();var i=r(44466),a=r(1927);let y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.ez,u,f.Pc,C.aw,x.kz,S.b,i.m,a.n]}),o})()},59809:(z,M,r)=>{r.d(M,{I:()=>_});var d=r(94650);let _=(()=>{class m{}return m.\u0275fac=function(t){return new(t||m)},m.\u0275cmp=d.Xpm({type:m,selectors:[["app-product-card-skeleton"]],standalone:!0,features:[d.jDz],decls:9,vars:0,consts:[[1,"cursor-pointer","flex","flex-col","w-full","max-w-[246px]","lg:max-w-[220px]","xl:max-w-[245px]"],[1,"relative","w-full","mb-2",2,"padding-top","100%"],[1,"absolute","inset-0","pulSate","rounded-lg"],[1,"product-title","truncate","mb-1","pulSate","text-sm",2,"letter-spacing","20px"],[1,"text-xs","leading-3","text-center","pulSate",2,"letter-spacing","20px"],[1,"text-base","text-center","pulSate",2,"letter-spacing","20px"]],template:function(t,f){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d._UZ(2,"div",2),d.qZA(),d.TgZ(3,"p",3),d._uU(4," \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),d.qZA(),d.TgZ(5,"p",4),d._uU(6," \xa0\xa0 "),d.qZA(),d.TgZ(7,"p",5),d._uU(8," \xa0\xa0 "),d.qZA()())}}),m})()}}]);