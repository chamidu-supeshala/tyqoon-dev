"use strict";(self.webpackChunkangular_tyqoon_client=self.webpackChunkangular_tyqoon_client||[]).push([[5509],{85898:(J,v,i)=>{i.d(v,{b:()=>z});var l=i(15861),h=i(77579),u=i(82722),_=i(59468),t=i(49808),f=i(24837),x=i(95133),T=i(54463),C=i(36895),w=i(44466),I=i(59809),R=i(5565),A=i(18110),S=i(7507),n=i(94650),E=i(35482),O=i(45329),b=i(56889),P=i(23284),B=i(90147);function Z(d,m){if(1&d&&n._UZ(0,"app-product-card",6),2&d){const r=m.$implicit,a=n.oxw().ngLet,y=n.oxw().ngLet;n.Q6J("product",r)("isBiddingMode",!!a)("isLogin",!!y)}}function D(d,m){1&d&&n._UZ(0,"app-product-card-skeleton",8)}const L=function(){return[]};function U(d,m){if(1&d&&(n.ynx(0),n.YNc(1,D,1,0,"app-product-card-skeleton",7),n.BQk()),2&d){const r=n.oxw(3);n.xp6(1),n.Q6J("ngForOf",n.DdM(2,L).constructor(r.pageSize).fill(1))("ngForTrackBy",r.trackByFn2)}}function F(d,m){if(1&d&&(n.TgZ(0,"div",3),n.YNc(1,Z,1,3,"app-product-card",4),n.YNc(2,U,2,3,"ng-container",5),n.qZA()),2&d){const r=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",r.products)("ngForTrackBy",r.trackByFn),n.xp6(1),n.Q6J("ngIf",r.isLoading)}}function K(d,m){if(1&d&&(n.TgZ(0,"div"),n.YNc(1,F,3,3,"div",2),n.ALo(2,"async"),n.qZA()),2&d){const r=n.oxw();n.xp6(1),n.Q6J("ngLet",n.lcZ(2,1,r.biddingService.isBiddingMode$))}}function W(d,m){1&d&&(n.TgZ(0,"a",9),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&d&&(n.Q6J("routerLink","product/search"),n.xp6(1),n.hij(" ",n.lcZ(2,2,"see-more"),"\n"))}let z=(()=>{class d extends R.V{constructor(r,a,y,M){super(),this.productService=r,this.userService=a,this.biddingService=y,this.cdr=M,this.offsetScroll=2e3,this.additionalParams={},this.isSSR=!1,this.biddingProductsSortOrder=0,this.shoppingModePageSize=20,this.biddingModePageSize=18,this.throttleScroll=new h.x,this.pageSize=20,this.page=-1,this.isLoading=!1,this.total=0,this.products=[],this.isBiddingMode=!1,this.scrollActive$=new h.x}ngOnInit(){console.log(8787878,this.biddingProductsSortOrder),!this.isSSR&&f.Z.isServer?this.isLoading=!0:this.biddingService.isBiddingMode$.pipe((0,u.R)(this.destroyStream$)).subscribe(r=>{this.isBiddingMode=r,this.page=-1,this.products=[],this.pageSize=this.isBiddingMode?this.biddingModePageSize:this.shoppingModePageSize,this.cdr.detectChanges(),this.refreshProducts(),this.initInfiniteScrolling()})}ngOnDestroy(){super.ngOnDestroy(),this.clearSubscriptions()}clearSubscriptions(){this.scrollActive$?.next(!1),this.scrollActive$?.complete()}ngAfterViewInit(){f.Z.isServer||this.initInfiniteScrolling()}initInfiniteScrolling(){var r=this;return(0,l.Z)(function*(){r.clearSubscriptions(),r.scrollContainer&&!r.isBiddingMode&&(r.scrollActive$=new h.x,r.scrollElement=yield r.scrollContainer.getScrollElement(),r.scrollContainer.ionScroll.pipe((0,u.R)(r.scrollActive$)).subscribe(a=>{r.scrollElement.scrollHeight-a.detail.scrollTop<r.offsetScroll&&r.throttleScroll.next(1)}),r.throttleScroll.pipe((0,_.p)(300),(0,u.R)(r.scrollActive$)).subscribe(()=>{r.fetchData()}))})()}ngOnChanges(r){}refreshProducts(){this.page=-1,this.total=0,this.products=[],this.fetchData()}fetchData(r=null){var a=this;return(0,l.Z)(function*(){const y=r??a.page+1;if(!a.isLoading&&(0===y||a.products.length<a.total)){a.isLoading=!0,a.page=y,a.cdr.markForCheck();const M=a.isBiddingMode?yield(0,t.n)(a.biddingService.getProductsWithPoolInfo({page:a.page,rows:a.pageSize,sortType:a.biddingProductsSortOrder,isRecommended:!0,...a.additionalParams})):yield(0,t.n)(a.productService.getProductsByMetaParamsV2({page:a.page,rows:a.pageSize,traceId:a.userService.traceId,isRecommended:!0,...a.additionalParams}));M.rows=(0,A.DI)(M.rows||[]),a.products=[...a.products,...M.rows||[]],a.total=M.total,a.isLoading=!1,a.cdr.markForCheck()}})()}clear(){this.page=-1,this.isLoading=!1,this.total=0,this.products=[]}trackByFn(r,a){return a.id}trackByFn2(r){return r}}return d.\u0275fac=function(r){return new(r||d)(n.Y36(E.s),n.Y36(O.K),n.Y36(b.g),n.Y36(n.sBO))},d.\u0275cmp=n.Xpm({type:d,selectors:[["app-products-infinite-scroll"]],inputs:{scrollContainer:"scrollContainer",offsetScroll:"offsetScroll",additionalParams:"additionalParams",isSSR:"isSSR",biddingProductsSortOrder:"biddingProductsSortOrder",shoppingModePageSize:"shoppingModePageSize",biddingModePageSize:"biddingModePageSize"},standalone:!0,features:[n.qOj,n.TTD,n.jDz],decls:3,vars:4,consts:[[4,"ngLet"],["class","px-6 py-1 capitalize mx-auto mt-4 mb-2 see-more block w-fit border border-solid rounded-lg text-2xl text-center font-medium text-white",3,"routerLink",4,"ngIf"],["class","grid grid-cols-2 xs:grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-x-2 gap-y-6",4,"ngLet"],[1,"grid","grid-cols-2","xs:grid-cols-3","sm:grid-cols-4","md:grid-cols-5","lg:grid-cols-6","gap-x-2","gap-y-6"],["class","block",3,"product","isBiddingMode","isLogin",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"block",3,"product","isBiddingMode","isLogin"],["class","block",4,"ngFor","ngForOf","ngForTrackBy"],[1,"block"],[1,"px-6","py-1","capitalize","mx-auto","mt-4","mb-2","see-more","block","w-fit","border","border-solid","rounded-lg","text-2xl","text-center","font-medium","text-white",3,"routerLink"]],template:function(r,a){1&r&&(n.YNc(0,K,3,3,"div",0),n.ALo(1,"async"),n.YNc(2,W,3,4,"a",1)),2&r&&(n.Q6J("ngLet",n.lcZ(1,2,a.userService.userInfo$)),n.xp6(2),n.Q6J("ngIf",a.isBiddingMode))},dependencies:[T.aw,T.X$,C.ez,C.sg,C.O5,C.Ov,x.Pc,x.Fo,w.m,P.Y,B.h,I.I,S.Bz,S.yS],styles:[".see-more[_ngcontent-%COMP%]{background:linear-gradient(to right,#8467ff 0%,#eb00ff 100%);border-color:#9d2ec3;min-width:160px}.see-more[_ngcontent-%COMP%]:hover{color:#fff;background:linear-gradient(to right,#7454ff 0%,#bb00cb 100%)}"],changeDetection:0}),d})()},65509:(J,v,i)=>{i.r(v),i.d(v,{MartModule:()=>Q});var l=i(36895),h=i(7507),u=i(24499);const _=[{name:"mart-fresh-groceries",icon:"/assets/images/mart-fresh-groceries.png",activityId:"70833251"},{name:"category-beautiy-health",icon:"/assets/images/mart-category-beauty-min.png",activityId:"49845326"},{name:"category-FOOD-&-DINING",icon:"/assets/images/mart-category-food-min.png",activityId:"49846331"},{name:"mart-health-wellness",icon:"/assets/images/mart-category-health-min.png",activityId:"49846966"},{name:"mart-home-living",icon:"/assets/images/mart-category-home-living-min.png",activityId:"49847602"},{name:"mart-kids-babies",icon:"/assets/images/mart-category-kids-min.png",activityId:"49848814"}];var t=i(94650),f=i(95133),x=i(85898),T=i(46032),C=i(49127),w=i(45210),I=i(18215),R=i(93426),A=i(93774),S=i(54463);const n=function(o){return{activityId:o}};let E=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-mart-category"]],inputs:{martCategory:"martCategory"},decls:6,vars:9,consts:[[1,"mart-category","flex","flex-col","items-center","justify-center","mx-2",3,"routerLink","queryParams"],[1,"mart-category__icon","rounded-full","mb-2"],[3,"src","alt"],[1,"mart-category__name","text-white","text-center"]],template:function(e,s){1&e&&(t.TgZ(0,"a",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"p",3),t._uU(4),t.ALo(5,"translate"),t.qZA()()),2&e&&(t.Q6J("routerLink","/product/search")("queryParams",t.VKq(7,n,s.martCategory.activityId)),t.xp6(2),t.Q6J("src",s.martCategory.icon,t.LSH)("alt",s.martCategory.name),t.xp6(2),t.hij(" ",t.lcZ(5,5,s.martCategory.name)," "))},dependencies:[h.yS,f.Fo,S.X$],styles:[".mart-category__icon[_ngcontent-%COMP%]{width:67px;height:67px;box-shadow:0 4px 16px #4a4af8}@media (min-width: 1024px){.mart-category__icon[_ngcontent-%COMP%]{width:77px;height:77px}}.mart-category__name[_ngcontent-%COMP%]{width:67px;font-size:11px;line-height:1.25}@media (min-width: 1024px){.mart-category__name[_ngcontent-%COMP%]{width:77px;font-size:12.5px}}"]}),o})();var O=i(24837),b=i(54968),P=i(99485);const B=["swiper"];function Z(o,p){if(1&o&&t._UZ(0,"app-mart-category",6),2&o){const e=t.oxw().$implicit;t.Q6J("martCategory",e)}}function D(o,p){1&o&&t.YNc(0,Z,1,1,"ng-template",5)}const L=function(o){return{"is-swiping":o}};function U(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"div",1),t.NdJ("touchstart",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.handleElementTouch())}),t.TgZ(1,"swiper",2,3),t.NdJ("init",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.handleInit())})("breakpoint",function(c){t.CHM(e);const g=t.oxw();return t.KtG(g.handleBreakPointChange(c))})("mouseenter",function(c){t.CHM(e);const g=t.oxw();return t.KtG(g.handleMouseEnter(c))})("mouseleave",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.handleMouseLeave())})("touchEnd",function(c){t.CHM(e);const g=t.oxw();return t.KtG(g.handleTouchEnd(c))})("transitionEnd",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.handleTransitionEnd())}),t.YNc(3,D,1,0,null,4),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,L,e.isSwiping))("config",e.slideOpts),t.xp6(2),t.Q6J("ngForOf",e.categories)}}let F=(()=>{class o{constructor(){this.categories=_,this.isInitalize=!1,this.slideOpts={speed:2e4,freeMode:!0,loop:!0,autoplay:!1,slidesPerView:"auto",breakpoints:{340:{speed:2e4},640:{speed:2e4}}},this.oneRoundWidth=0,this.isSwiping=!1,this.isMouseEnter=!1,this.handleTransitionEnd=()=>{if(this.isInitalize&&!this.isSwiping&&!this.isMouseEnter){const e=this.categorySwiper?.swiperRef,s=e?.getTranslate();s===this.end1RoundPosition?setTimeout(()=>{e?.translateTo(this.initPosition,0,!0,!1)},0):(s<this.end1RoundPosition&&e?.translateTo(this.initPosition+(s-this.end1RoundPosition),0,!1,!1),setTimeout(()=>{e?.translateTo(this.end1RoundPosition,Math.abs(this.end1RoundPosition-e.getTranslate())/this.oneRoundWidth*this.speed1Round,!0,!1)},0))}}}ngOnInit(){}ngOnDestroy(){this.subscription?.unsubscribe()}handleInit(){O.Z.isServer||this.setTranslate()}handleMouseEnter(e){this.isMouseEnter=!0;const s=this.categorySwiper?.swiperRef,c=s?.getTranslate();s?.translateTo(c-10,0,!1,!1)}handleElementTouch(){const e=this.categorySwiper?.swiperRef;this.isMouseEnter=!0;const s=e?.getTranslate();e?.translateTo(s-10,0,!1,!1)}handleTouchStart([e,s]){this.isSwiping=!0}handleTouchEnd([e,s]){this.isSwiping=!1,"mouse"!==s.pointerType&&(this.isMouseEnter=!1);const c=this.categorySwiper?.swiperRef;c&&setTimeout(()=>{const g=c.getTranslate();c.translateTo(g>=this.end1RoundPosition?g:this.initPosition+(g-this.end1RoundPosition),0,!1,!1)},0),setTimeout(()=>{this.resumeSlide()},10)}handleMouseLeave(){this.isMouseEnter=!1,setTimeout(()=>{this.resumeSlide()},10)}resumeSlide(){if(!this.isSwiping&&!this.isMouseEnter){const e=this.categorySwiper?.swiperRef;if(e){const s=e.getTranslate();s>=this.end1RoundPosition||e?.translateTo(this.initPosition+(s-this.end1RoundPosition),0,!1,!1),e.translateTo(this.end1RoundPosition,Math.abs(this.end1RoundPosition-s)/this.oneRoundWidth*this.speed1Round,!0,!1)}}}setTranslate(){setTimeout(()=>{const e=this.categorySwiper?.swiperRef;if(e){const s=e.wrapperEl.querySelector(".swiper-slide");this.oneRoundWidth=(s?.clientWidth||0)*this.categories.length,e.translateTo(this.end1RoundPosition,this.speed1Round,!0,!1),this.isInitalize=!0,this.subscription=(0,b.R)(e.wrapperEl,"transitionend").subscribe(this.handleTransitionEnd)}},2e3)}get speed1Round(){const e=this.categorySwiper?.swiperRef;return e?.params.breakpoints?.[e.currentBreakpoint]?.speed||e?.params.speed||0}get initPosition(){return-this.oneRoundWidth}get end1RoundPosition(){return 2*this.initPosition}handleBreakPointChange([e,s]){setTimeout(()=>{const g=this.categorySwiper?.swiperRef?.wrapperEl.querySelector(".swiper-slide");this.oneRoundWidth=(g?.clientWidth||0)*this.categories.length},100)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-mart-category-slider"]],viewQuery:function(e,s){if(1&e&&t.Gf(B,5),2&e){let c;t.iGM(c=t.CRH())&&(s.categorySwiper=c.first)}},decls:1,vars:1,consts:[[3,"touchstart",4,"ngIf"],[3,"touchstart"],[1,"category-swiper",3,"ngClass","config","init","breakpoint","mouseenter","mouseleave","touchEnd","transitionEnd"],["swiper",""],[4,"ngFor","ngForOf"],["swiperSlide",""],[1,"w-full","h-full",3,"martCategory"]],template:function(e,s){1&e&&t.YNc(0,U,4,5,"div",0),2&e&&t.Q6J("ngIf",s.categories)},dependencies:[l.mk,l.sg,l.O5,P.nF,P.YC,E],styles:["swiper[_ngcontent-%COMP%]:not(.is-swiping)     .swiper-wrapper{transition-timing-function:linear!important}swiper[_ngcontent-%COMP%]     .swiper-wrapper{margin-left:-.25rem;margin-right:-.25rem}swiper[_ngcontent-%COMP%]     .swiper-slide{width:87px;padding:8px 4px 0;flex-shrink:0}@media (min-width: 1024px){swiper[_ngcontent-%COMP%]     .swiper-slide{width:97px}}"]}),o})();function K(o,p){1&o&&t._UZ(0,"app-mart-category",8),2&o&&t.Q6J("martCategory",p.$implicit)}let W=(()=>{class o{constructor(e){this.translateService=e,this.categories=_}ngOnInit(){}getTyqoonMartImageSm(){return"cn"===this.translateService.currentLang?"assets/images/tyqoon-mart-cn.png":"assets/images/tyqoon-mart.png"}getTyqoonMartImageLg(){switch(this.translateService.currentLang){case"cn":case"tr":return"assets/images/Tyqoon-mart-logo-cnv2-720px.png";default:return"assets/images/Tyqoon-mart-logo-720px-min.png"}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(S.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-mart-banner"]],decls:9,vars:3,consts:[[1,"mart-banner","w-full"],[1,"tyqoon-container","flex","flex-col","md:flex-row","md:items-center","py-6"],[1,"mart-logo","mb-4","md:mb-0"],["alt","Tyqoon mart mobile logo",1,"sm:hidden","h-full","object-contain",3,"src"],["alt","Tyqoon mart mobile logo",1,"hidden","sm:flex","h-full","object-contain",3,"src"],[1,"hidden","md:flex","flex-auto","justify-center","ml-4"],["class","h-full",3,"martCategory",4,"ngFor","ngForOf"],[1,"flex","md:hidden"],[1,"h-full",3,"martCategory"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3)(4,"img",4),t.qZA(),t.TgZ(5,"div",5),t.YNc(6,K,1,1,"app-mart-category",6),t.qZA(),t.TgZ(7,"div",7),t._UZ(8,"app-mart-category-slider"),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("src",s.getTyqoonMartImageSm(),t.LSH),t.xp6(1),t.Q6J("src",s.getTyqoonMartImageLg(),t.LSH),t.xp6(2),t.Q6J("ngForOf",s.categories))},dependencies:[l.sg,E,F],styles:[".mart-banner[_ngcontent-%COMP%]{background-image:linear-gradient(to right,#0189ff,#013dff)}.mart-banner[_ngcontent-%COMP%]   .mart-logo[_ngcontent-%COMP%]{height:118px}@media (min-width: 640px){.mart-banner[_ngcontent-%COMP%]   .mart-logo[_ngcontent-%COMP%]{height:136px}}@media (min-width: 768px){.mart-banner[_ngcontent-%COMP%]   .mart-logo[_ngcontent-%COMP%]{height:236px}}"]}),o})();const z=function(o){return{isRecommended:!1,activityId:o}},m=[{path:"",component:(()=>{class o extends u.c{constructor(e,s){super(e,s),this.categories=_,this.defaultCategory=_[0].activityId}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq),t.Y36(t.Qsj))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-mart"]],features:[t.qOj],decls:12,vars:6,consts:[["fullscreen","true","scrollEvents","true","backToTopBtn","",3,"ionScroll"],["ionContent",""],["appOverflowVisible","",1,"sticky","top-0","shadow-lg","z-50"],["header",""],[3,"forceFullWidthSearch"],[1,"tyqoon-container","min-h-[50vh]","mt-4"],[3,"additionalParams","scrollContainer","isSSR"],[1,"mt-4","md:hidden"]],template:function(e,s){if(1&e&&(t.TgZ(0,"ion-content",0,1),t.NdJ("ionScroll",function(g){return s.onContentScroll(g)}),t._UZ(2,"app-global-customer-service"),t.TgZ(3,"ion-toolbar",2,3),t._UZ(5,"app-top-navbar",4)(6,"app-top-menu"),t.qZA(),t._UZ(7,"app-mart-banner"),t.TgZ(8,"div",5),t._UZ(9,"app-products-infinite-scroll",6),t.qZA()(),t.TgZ(10,"ion-footer",7),t._UZ(11,"app-bottom-navbar"),t.qZA()),2&e){const c=t.MAs(1);t.xp6(5),t.Q6J("forceFullWidthSearch",!0),t.xp6(4),t.Q6J("additionalParams",t.VKq(4,z,s.defaultCategory))("scrollContainer",c)("isSSR",!0)}},dependencies:[f.W2,f.fr,f.sr,x.b,T.K,C.H,w.B,I.Z,R.p,A.z,W]}),o})()}];let r=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.Bz.forChild(m),h.Bz]}),o})();var a=i(44466),y=i(1927),M=i(1241);let Q=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.ez,r,f.Pc,S.aw,P.kz,x.b,a.m,y.n,M.x]}),o})()},59809:(J,v,i)=>{i.d(v,{I:()=>h});var l=i(94650);let h=(()=>{class u{}return u.\u0275fac=function(t){return new(t||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["app-product-card-skeleton"]],standalone:!0,features:[l.jDz],decls:9,vars:0,consts:[[1,"cursor-pointer","flex","flex-col","w-full","max-w-[246px]","lg:max-w-[220px]","xl:max-w-[245px]"],[1,"relative","w-full","mb-2",2,"padding-top","100%"],[1,"absolute","inset-0","pulSate","rounded-lg"],[1,"product-title","truncate","mb-1","pulSate","text-sm",2,"letter-spacing","20px"],[1,"text-xs","leading-3","text-center","pulSate",2,"letter-spacing","20px"],[1,"text-base","text-center","pulSate",2,"letter-spacing","20px"]],template:function(t,f){1&t&&(l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"div",2),l.qZA(),l.TgZ(3,"p",3),l._uU(4," \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),l.qZA(),l.TgZ(5,"p",4),l._uU(6," \xa0\xa0 "),l.qZA(),l.TgZ(7,"p",5),l._uU(8," \xa0\xa0 "),l.qZA()())}}),u})()}}]);