"use strict";(self.webpackChunkangular_tyqoon_client=self.webpackChunkangular_tyqoon_client||[]).push([[9688],{69688:(j,h,n)=>{n.r(h),n.d(h,{ForgotPasswordModule:()=>I});var f=n(36895),p=n(24006),l=n(95133),x=n(7492),y=n(44466),u=n(54463),e=n(94650),c=n(15861),g=n(82722),v=n(5565),C=n(10960),w=n(26704),b=n(21075),Z=n(80519),T=n(32482);let S=(()=>{class o extends v.V{constructor(t,s,a){super(),this.loginService=t,this.toast=s,this.i18n=a,this.params={current:0,mobileArea:"+86",mobile:"",smsCode:""},this.paramsValueChange=new e.vpe}ngOnInit(){}get paramsValue(){return this.params}set paramsValue(t){this.params=t,this.paramsValueChange.emit(this.paramsValue)}toastError(t){var s=this;return(0,c.Z)(function*(){yield s.presentToast({position:"bottom",message:t,icon:"alert-circle-outline",duration:1e3,color:"danger"})})()}toastSuccess(t){var s=this;return(0,c.Z)(function*(){yield s.presentToast({position:"bottom",message:t,duration:1e3,icon:"checkmark-circle-outline",color:"success"})})()}presentToast(t){var s=this;return(0,c.Z)(function*(){yield(yield s.toast.create(t)).present()})()}nextStep(){this.loginService.getSmsCodeChange(w.e.ResetPassword,this.params.mobileArea.toString(),this.params.mobile.toString()).pipe((0,g.R)(this.destroyStream$)).subscribe(t=>{console.log(t),(0,b.d8)(Z._5,(Date.now()+6e4).toString()),0===t.code?(this.params.current=1,this.paramsValueChange.emit(this.params)):this.toastError(t.message)})}onSelectPhoneCountry(t){t&&(this.params.mobileArea=t)}onPhoneNumberChange(t){this.params.mobile=t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.r),e.Y36(l.yF),e.Y36(u.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-step-one"]],inputs:{paramsValue:"paramsValue"},outputs:{paramsValueChange:"paramsValueChange"},features:[e._Bn([C.r]),e.qOj],decls:4,vars:3,consts:[[3,"onSelectPhoneCountry","onPhoneNumberChange"],[1,"text-base","text-center","w-full","bg-[#fb8811]","text-[#ffffff]","rounded-[5px]","py-[8px]","hover:bg-[#ffa73b]",3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"app-phone-control",0),e.NdJ("onSelectPhoneCountry",function(i){return s.onSelectPhoneCountry(i)})("onPhoneNumberChange",function(i){return s.onPhoneNumberChange(i)}),e.qZA(),e.TgZ(1,"button",1),e.NdJ("click",function(){return s.nextStep()}),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"login-page-get-verification-code"),"\n"))},dependencies:[T.b,u.X$]}),o})();var V=n(94542),P=n(49769),A=n(94830);let F=(()=>{class o extends v.V{constructor(t,s,a,i){super(),this.fb=t,this.userService=s,this.toastController=a,this.toast=i,this.confirmationValidator=m=>m.value?m.value!==this.validateForm.controls.newPassword.value?{confirm:!0,error:!0}:{}:{required:!0},this.params={current:0,mobileArea:"+86",mobile:"",smsCode:""},this.paramsValueChange=new e.vpe}ngOnInit(){this.validateForm=this.fb.group({newPassword:[null,[V.d.password]],checkPassword:[null,[p.kI.required,this.confirmationValidator]],smsCode:[null,p.kI.required]})}toastError(t){var s=this;return(0,c.Z)(function*(){yield s.presentToast({position:"bottom",message:t,icon:"alert-circle-outline",duration:1e3,color:"danger"})})()}toastSuccess(t){var s=this;return(0,c.Z)(function*(){yield s.presentToast({position:"bottom",message:t,duration:1e3,icon:"checkmark-circle-outline",color:"success"})})()}presentToast(t){var s=this;return(0,c.Z)(function*(){yield(yield s.toast.create(t)).present()})()}validate(){this.validateForm.valid?this.submit():Object.values(this.validateForm.controls).forEach(t=>{t.invalid&&(t.markAsDirty(),t.updateValueAndValidity({onlySelf:!0}))})}showMessage(t,s,a,i){var m=this;return(0,c.Z)(function*(){yield(yield m.toastController.create({message:t,duration:s,position:a,color:i})).present()})()}submit(){const t={mobileArea:this.params.mobileArea,mobile:this.params.mobile,smsCode:this.validateForm.value.smsCode.toString(),newPassword:P(this.validateForm.value.newPassword).toString()};console.log(t),this.userService.resetPaymentPassWord(t).pipe((0,g.R)(this.destroyStream$)).subscribe(s=>{s?.code>0?this.toastError(s.message):(this.showMessage("\u8bbe\u7f6e\u6210\u529f",3e3,"top","success"),this.nextStep())})}get paramsValue(){return this.params}set paramsValue(t){this.params=t,this.paramsValueChange.emit(this.paramsValue)}nextStep(){this.params.current=2,this.paramsValueChange.emit(this.params)}previousStep(){this.params.current=0,this.paramsValueChange.emit(this.params)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.qu),e.Y36(A.K),e.Y36(l.yF),e.Y36(l.yF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-step-two"]],inputs:{paramsValue:"paramsValue"},outputs:{paramsValueChange:"paramsValueChange"},features:[e.qOj],decls:30,vars:16,consts:[[1,"form-container",3,"formGroup"],[1,"flex","items-center","mb-6","relative"],[1,"flex","items-center","absolute","left-[11px]","z-10"],["viewBox","64 64 896 896","focusable","false","fill","currentColor","width","1em","height","1em","data-icon","lock","aria-hidden","true"],["d","M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"],[1,"icon-input","w-full","py-2.5","pl-8","pr-3","border","focus:outline-none","focus:border-[#ffa73b]","focus:shadow-lg","focus:shadow-[#fb881133]"],["ngModel","","formControlName","newPassword","type","password","maxlength","30",3,"placeholder"],["slot","error"],[1,"flex","items-center","absolute","left-[11px]"],["ngModel","","formControlName","checkPassword","type","password","maxlength","30",3,"placeholder"],[1,"flex","items-center","mb-6"],["ngModel","","formControlName","smsCode","type","number","maxlength","6",1,"verification-input",3,"placeholder"],[1,"button-group","flex","justify-between"],[1,"text-base","text-center","w-[49%]","bg-[#ffffff]","border","border-[#f0f0f0]","text-[#000000]","rounded-[5px]","py-[8px]","hover:bg-[#ffffff]",3,"click"],[1,"text-base","text-center","w-[49%]","bg-[#fb8811]","text-[#ffffff]","rounded-[5px]","py-[8px]","hover:bg-[#ffa73b]",3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e.O4$(),e.TgZ(3,"svg",3),e._UZ(4,"path",4),e.qZA()(),e.kcU(),e.TgZ(5,"ion-item",5),e._UZ(6,"ion-input",6),e.ALo(7,"translate"),e.TgZ(8,"ion-note",7),e._uU(9),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"div",1)(12,"span",8),e.O4$(),e.TgZ(13,"svg",3),e._UZ(14,"path",4),e.qZA()(),e.kcU(),e.TgZ(15,"ion-item",5),e._UZ(16,"ion-input",9),e.ALo(17,"translate"),e.TgZ(18,"ion-note",7),e._uU(19),e.ALo(20,"translate"),e.qZA()()(),e.TgZ(21,"div",10)(22,"ion-item",5),e._UZ(23,"ion-input",11),e.ALo(24,"translate"),e.qZA()(),e.TgZ(25,"div",12)(26,"button",13),e.NdJ("click",function(){return s.previousStep()}),e._uU(27," \u4e0a\u4e00\u6b65 "),e.qZA(),e.TgZ(28,"button",14),e.NdJ("click",function(){return s.validate()}),e._uU(29," \u4e0b\u4e00\u6b65 "),e.qZA()()()),2&t&&(e.Q6J("formGroup",s.validateForm),e.xp6(6),e.s9C("placeholder",e.lcZ(7,6,"register-page-password")),e.xp6(3),e.Oqu(e.lcZ(10,8,"register-password-validation-symbols-types")),e.xp6(7),e.s9C("placeholder",e.lcZ(17,10,"register-page-password-confirm")),e.xp6(3),e.Oqu(e.lcZ(20,12,"register-passwords-not-match-error")),e.xp6(4),e.s9C("placeholder",e.lcZ(24,14,"login-page-verification-code")))},dependencies:[p.JJ,p.JL,p.nD,p.sg,p.u,l.pK,l.Ie,l.uN,l.as,l.j9,u.X$]}),o})();var d=n(7507);let _=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-step-three"]],decls:8,vars:0,consts:[[1,"success-container"],[1,"image-container","flex","justify-center"],[1,"checkmark","w-5","text-4xl","flex","justify-center","items-center","w-20","h-20","text-[#ffffff]","bg-[#58C52A]","rounded-[50%]","text-center"],[1,"success","py-3","text-2xl"],["routerLink","/",1,"text-base","text-center","w-full","bg-[#fb8811]","text-[#ffffff]","rounded-[5px]","py-[8px]","hover:bg-[#ffa73b]"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"\u2714"),e.qZA()(),e.TgZ(4,"div",3),e._uU(5,"\u5bc6\u7801\u91cd\u7f6e\u6210\u529f"),e.qZA(),e.TgZ(6,"button",4),e._uU(7," \u9996\u9875 "),e.qZA()())},dependencies:[d.rH,l.YI]}),o})();function O(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"app-step-one",5),e.NdJ("paramsValueChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.params=a)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("paramsValue",t.params)}}function U(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"app-step-two",5),e.NdJ("paramsValueChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.params=a)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("paramsValue",t.params)}}function N(o,r){1&o&&e._UZ(0,"app-step-three")}const J=[{path:"",component:(()=>{class o{constructor(){this.steps=[{id:1,title:"\u7b2c\u4e00\u6b65",description:"\u83b7\u53d6\u77ed\u4fe1\u9a8c\u8bc1\u7801",async:!0,percentage:0},{id:2,title:"\u7b2c\u4e8c\u6b65",description:"\u91cd\u7f6e\u5bc6\u7801",async:!0,percentage:0},{id:3,title:"\u5b8c\u6210",description:"\u91cd\u7f6e\u6210\u529f",async:!0,percentage:0}],this.params={current:0,mobileArea:"+86",mobile:"",smsCode:""},this.processing=!1}ngOnInit(){}pre(){this.params.current-=1}next(){this.loadingAndStep()}trackById(t,s){return s.id}loadingAndStep(){if(this.params.current<this.steps.length){const t=this.steps[this.params.current];t.async?(t.percentage=0,this.processing=!1,this.params.current+=1):this.params.current+=1}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-forgot-password"]],decls:7,vars:4,consts:[[1,"forgot-password-container","pb-3","min-h-[379px]","relative","flex","items-center","justify-evenly","flex-col","my-6"],[1,"text-2xl","mb-3","step","font-bold"],[1,"steps-container"],[3,"paramsValue","paramsValueChange",4,"ngIf"],[4,"ngIf"],[3,"paramsValue","paramsValueChange"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,O,1,1,"app-step-one",3),e.YNc(5,U,1,1,"app-step-two",3),e.YNc(6,N,1,0,"app-step-three",4),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",s.steps[s.params.current].title," "),e.xp6(2),e.Q6J("ngIf",0===s.params.current),e.xp6(1),e.Q6J("ngIf",1===s.params.current),e.xp6(1),e.Q6J("ngIf",2===s.params.current))},dependencies:[f.O5,S,F,_]}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild(J),d.Bz]}),o})(),I=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.ez,M,p.UX,p.u5,l.Pc,x.R,y.m,u.aw]}),o})()}}]);