"use strict";(self.webpackChunkangular_tyqoon_client=self.webpackChunkangular_tyqoon_client||[]).push([[7781],{18215:(E,x,i)=>{i.d(x,{Z:()=>g});var t=i(94650),d=i(68514),b=i(54463);function c(p,m){if(1&p){const h=t.EpF();t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){const v=t.CHM(h).method,s=t.oxw();return t.KtG(s.handleBtnClick(v))}),t._UZ(2,"img",2),t.TgZ(3,"div",3),t._uU(4),t.ALo(5,"translate"),t.qZA()()()}2&p&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"toolkit-official-button")))}let g=(()=>{class p{constructor(){}handleBtnClick(h){h(this.additionalData)}}return p.\u0275fac=function(h){return new(h||p)},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-global-customer-service"]],inputs:{additionalData:"additionalData"},decls:2,vars:0,consts:[[1,"content-wrapper","hidden","md:block","rounded-l-2xl","border-y","border-l","border-solid","py-4","px-2","bg-white","shadow-xl","absolute","right-0","w-16","transform","-translate-y-1/2",2,"z-index","999"],[1,"inline",3,"click"],["src","assets/images/toolkit-item1.png","alt","",1,"m-auto","h-10","mb-1","support-img"],[1,"text-xs","font-light","text-center"]],template:function(h,y){1&h&&(t.TgZ(0,"app-customer-service"),t.YNc(1,c,6,3,"ng-template"),t.qZA())},dependencies:[d.M,b.X$],styles:["[_nghost-%COMP%]{position:sticky;top:50%;right:0;z-index:100;display:block}.content-wrapper[_ngcontent-%COMP%]{background-color:var(--bgSecondaryColor);color:var(--textColor)}  .dark-mode app-global-customer-service .content-wrapper{border-color:var(--borderColor)}  .dark-mode app-global-customer-service .content-wrapper .support-img{filter:invert(1)}  .light-mode app-global-customer-service .content-wrapper{border-color:#e9e9e9}"]}),p})()},71832:(E,x,i)=>{i.d(x,{Y:()=>s});var t=i(94650),d=i(56889),b=i(6074),c=i(36895);function g(o,l){1&o&&t._UZ(0,"img",6)}function p(o,l){1&o&&t._UZ(0,"img",7)}function m(o,l){if(1&o&&(t.ynx(0),t.YNc(1,g,1,0,"img",4),t.YNc(2,p,1,0,"img",5),t.BQk()),2&o){const r=t.oxw(2);t.xp6(1),t.Q6J("ngIf",r.showLeft),t.xp6(1),t.Q6J("ngIf",r.showRight)}}function h(o,l){1&o&&t._UZ(0,"img",10)}function y(o,l){1&o&&t._UZ(0,"img",11)}function C(o,l){if(1&o&&(t.YNc(0,h,1,0,"img",8),t.YNc(1,y,1,0,"img",9)),2&o){const r=t.oxw(2);t.Q6J("ngIf",r.showLeft),t.xp6(1),t.Q6J("ngIf",r.showRight)}}function v(o,l){if(1&o&&(t.TgZ(0,"div",1),t.YNc(1,m,3,2,"ng-container",2),t.ALo(2,"async"),t.YNc(3,C,2,2,"ng-template",null,3,t.W1O),t.qZA()),2&o){const r=t.MAs(4),f=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,f.biddingService.isBiddingMode$))("ngIfElse",r)}}let s=(()=>{class o{constructor(r,f){this.biddingService=r,this.themeService=f,this.showLeft=!0,this.showRight=!0}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(d.g),t.Y36(b.f))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-new-year-dragons"]],inputs:{showLeft:"showLeft",showRight:"showRight"},decls:1,vars:1,consts:[["class","flex w-full justify-between z-100",4,"ngIf"],[1,"flex","w-full","justify-between","z-100"],[4,"ngIf","ngIfElse"],["shoppingMode",""],["class","left bidding hidden xl:block absolute h-auto dragon-jumping","src","/assets/images/new-year/Mascot-CNY-2024-1.png","alt","Bidding",4,"ngIf"],["class","right bidding hidden xl:block absolute h-auto dragon-scaling","style","--distance: 2px","src","/assets/images/new-year/Mascot-CNY-2024-2.png","alt","Bidding",4,"ngIf"],["src","/assets/images/new-year/Mascot-CNY-2024-1.png","alt","Bidding",1,"left","bidding","hidden","xl:block","absolute","h-auto","dragon-jumping"],["src","/assets/images/new-year/Mascot-CNY-2024-2.png","alt","Bidding",1,"right","bidding","hidden","xl:block","absolute","h-auto","dragon-scaling",2,"--distance","2px"],["class","left shopping hidden xl:block absolute h-auto dragon-scaling","style","--distance: -2px","src","/assets/images/new-year/Mascot-CNY-2024-3.png","alt","Bidding",4,"ngIf"],["class","right shopping hidden xl:block absolute h-auto dragon-jumping","src","/assets/images/new-year/Mascot-CNY-2024-4.png","alt","Bidding",4,"ngIf"],["src","/assets/images/new-year/Mascot-CNY-2024-3.png","alt","Bidding",1,"left","shopping","hidden","xl:block","absolute","h-auto","dragon-scaling",2,"--distance","-2px"],["src","/assets/images/new-year/Mascot-CNY-2024-4.png","alt","Bidding",1,"right","shopping","hidden","xl:block","absolute","h-auto","dragon-jumping"]],template:function(r,f){1&r&&t.YNc(0,v,5,4,"div",0),2&r&&t.Q6J("ngIf",f.themeService.isNewYearMode)},dependencies:[c.O5,c.Ov],styles:["[_nghost-%COMP%]{pointer-events:none;-webkit-user-select:none;user-select:none;z-index:1;position:absolute;top:140px;width:100%;max-width:2000px;margin:auto;left:0;right:0;min-height:calc(100vh - 140px)}.shopping.left[_ngcontent-%COMP%]{max-width:350px;bottom:13%}@media (min-width: 1280px){.shopping.left[_ngcontent-%COMP%]{width:calc(50vw - 545px);margin-left:-12px}}@media (min-width: 1440px){.shopping.left[_ngcontent-%COMP%]{width:calc(50vw - 615px);margin-left:-40px}}.shopping.right[_ngcontent-%COMP%]{max-width:330px;top:0;right:0}@media (min-width: 1280px){.shopping.right[_ngcontent-%COMP%]{width:calc(50vw - 545px);margin-right:-12px}}@media (min-width: 1440px){.shopping.right[_ngcontent-%COMP%]{width:calc(50vw - 620px);margin-right:-35px}}.bidding.left[_ngcontent-%COMP%]{max-width:370px;top:5px}@media (min-width: 1280px){.bidding.left[_ngcontent-%COMP%]{width:calc(50vw - 528px);margin-left:-30px}}@media (min-width: 1440px){.bidding.left[_ngcontent-%COMP%]{width:calc(50vw - 595px);margin-left:-65px}}.bidding.right[_ngcontent-%COMP%]{max-width:340px;bottom:3%;right:0}@media (min-width: 1280px){.bidding.right[_ngcontent-%COMP%]{width:calc(50vw - 545px);margin-right:-12px}}@media (min-width: 1440px){.bidding.right[_ngcontent-%COMP%]{width:calc(50vw - 625px);margin-right:-40px}}.dragon-jumping[_ngcontent-%COMP%]{animation:3s dragon-jumping 2s linear forwards infinite}@keyframes dragon-jumping{0%{transform:translateY(0)}25%{transform:translateY(-10px)}50%{transform:translateY(0)}to{transform:translateY(0)}}.dragon-scaling[_ngcontent-%COMP%]{animation:6s dragon-scaling 4s linear forwards infinite}@keyframes dragon-scaling{0%{transform:scale(1)}15%{transform:scale(1.05) translateY(-3px) translate(var(--distance))}30%{transform:scale(1)}to{transform:scale(1)}}"]}),o})()},13194:(E,x,i)=>{i.d(x,{d:()=>f});var t=i(15861),d=i(61135),b=i(77579),c=i(18505),g=i(54004),p=i(39646),m=i(49808),h=i(39841),y=i(5963),C=i(38419),v=i(24837),s=i(92340),o=i(94650),l=i(80529),r=i(45329);let f=(()=>{class u{constructor(e,n,a){this.http=e,this.req=n,this.userService=a,this.freeGiftCount$=new d.X(0),this.isTransferWord$=new d.X(!1),this.boardGameGift$=new d.X([]),this._notificationWinners=[],this.notificationWinnner$=new b.x,this.spinCount$=new d.X(0),this.wheelTurn$=new d.X([]),this.count=0,this.init(),this.userService.loginStateChange.subscribe(_=>{this.userService.isLogin()&&this.updateBoardGameGift()})}init(){v.Z.isServer||this.userService.isLogin()&&this.updateBoardGameGift()}getFreeGiftPagination(e=0,n=10){return this.http.get(`${s.N.BASE_URL}/shop/groupBuying/lottery/queryLotteryRecordList`,{params:{page:e,rows:n,giftType:1,recordStatus:1}}).pipe((0,c.b)(({data:a})=>{this.freeGiftCount$.next(a?.total||0)}),(0,g.U)(({data:a})=>a?.rows||[]))}getUltimatePrizeCount(){return this.http.get(`${s.N.BASE_URL}/shop/groupBuying/lottery/queryUserExchangeInfo`,{params:{lotteryType:1}})}updateBoardGameGift(e=!1,n=!1){var a=this;return(0,t.Z)(function*(){return yield(0,m.n)(a.getBoardGameGift(e,n).pipe((0,c.b)(_=>{a.boardGameGift$.next(_)})))})()}getBoardGameGift(e=!1,n=!1){return this.http.get(`${s.N.BASE_URL}/shop/groupBuying/lottery/queryLotteryStatisticsInfo`).pipe((0,g.U)(a=>a.data||[]))}getConfig(){return this.http.get(`${s.N.BASE_URL}/user/lottery/getNewYearGiftConfig`).pipe((0,g.U)(e=>e?.data?.rows||[]))}queryWinner(e){return this.http.get(`${s.N.BASE_URL}/shop/groupBuying/lottery/queryGrandPrizePage`,{params:{lotteryType:1,rows:e}}).pipe((0,g.U)(n=>n?.data||[]))}sendGift(e){return this.http.post(`${s.N.BASE_URL}/shop/groupBuying/lottery/giveWords`,{lotteryType:1,receiveWordsParam:e})}redeemMajorPrize(e){return this.http.post(`${s.N.BASE_URL}/shop/groupBuying/lottery/exchangeGift`,{lotteryType:1,giftCode:"Exchange-Gift-"+e})}initNotification(){var e=this;return(0,t.Z)(function*(){e._notificationWinners=yield(0,m.n)(e.queryWinner(10)),e.scheduleNotifcation()})()}scheduleNotifcation(){if(this._notificationWinners?.length){const e=M(6,10);this.timeoutId=setTimeout(()=>{const n=M(0,this._notificationWinners.length-1),a=this._notificationWinners.splice(n,1);this.notificationWinnner$.next(a[0]),this.scheduleNotifcation()},1e3*e)}}updateSpinCount(e=!1){var n=this;return(0,t.Z)(function*(){return yield(0,m.n)(n.getSpinCount(e).pipe((0,c.b)(a=>{n.spinCount$.next(a)})))})()}getSpinCount(e=!1){return(0,p.of)(6)}spinWheel(e="Small_wheel_1"){const n=this.http.post(`${s.N.BASE_URL}/shop/groupBuying/lottery/delGiftFromGrid`,{lotteryCode:e});return(0,h.a)([n,(0,y.H)(4e3)]).pipe((0,g.U)(a=>a[0]))}sendGiftsToGame(e,n=!1){return this.http.post(`${s.N.BASE_URL}/shop/groupBuying/lottery/addGiftToGrid`,{recordIds:e,isAll:n})}saveGameState(e){const n=`board-game-${this.userService.userInfo$.getValue()?.id}`;localStorage.setItem(n,JSON.stringify(e.map(a=>a.amount||0)))}getPreviousGameState(){const e=`board-game-${this.userService.userInfo$.getValue()?.id}`,n=JSON.parse(localStorage.getItem(e)||"[]");return this.boardGameGift$.getValue().map((_,B)=>({..._,amount:n[B]||0}))}getWheelTurns(e=!0){return console.log(1515156,e),this.http.get(`${s.N.BASE_URL}/shop/groupBuying/lottery/queryLotteryAmountInfo`).pipe((0,c.b)(n=>{n.data&&this.wheelTurn$.next(n.data)}),(0,g.U)(n=>n.data||[]))}exchangeGiftToTickets(e){return this.http.post(`${s.N.BASE_URL}/shop/groupBuying/lottery/exchangeGiftToTicket`,{businessIds:e,businessType:"BoardGame"})}claimFreeGift(e,n){return this.http.post(`${s.N.BASE_URL}/shop/groupBuying/lottery/addGiftOrder`,{businessId:e,receiverId:n,businessType:"BoardGame"})}}return u.\u0275fac=function(e){return new(e||u)(o.LFG(l.eN),o.LFG(C.Z,8),o.LFG(r.K))},u.\u0275prov=o.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();function M(u,w){return u=Math.ceil(u),w=Math.floor(w),Math.floor(Math.random()*(w-u+1))+u}}}]);