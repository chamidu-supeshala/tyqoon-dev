"use strict";(self.webpackChunkangular_tyqoon_client=self.webpackChunkangular_tyqoon_client||[]).push([[6165],{35482:(D,E,n)=>{n.d(E,{s:()=>P});var o=n(92340),e=n(39646),a=n(54004),v=n(24056),C=n(94650),b=n(80529),u=n(94830);let P=(()=>{class t{constructor(g,r){this.http=g,this.productsQueryStorage={},r.loginStateChange.subscribe(()=>{this.productsQueryStorage={}})}getProductsByMetaParams(g){const r=JSON.stringify(g);return this.productsQueryStorage[r]?(0,e.of)(this.productsQueryStorage[r]):this.http.get(`${o.N.BASE_URL}/shop/product/query`,{params:{...g}}).pipe((0,a.U)(({data:_})=>{const c={..._,rows:_.rows.map(f=>({...f,productImages:(0,v.x5)(f.productImages)})),total:_.rows.length?_.total:0};return this.productsQueryStorage[r]=c,c}))}getProductsByMetaParamsV2(g){const r=JSON.stringify(g);return this.productsQueryStorage[r]?(0,e.of)(this.productsQueryStorage[r]):this.http.get(`${o.N.BASE_URL}/shop/product/queryESV2`,{params:{...g}}).pipe((0,a.U)(({data:_})=>{const c=_?.rows||[],f={..._,rows:c.map(A=>({...A,productImages:(0,v.x5)(A.productImages)})),total:c.length?_.total:0};return this.productsQueryStorage[r]=f,f}))}getProductById(g){return this.http.get(`${o.N.BASE_URL}/shop/product/queryESV2`,{params:{rows:1,page:0,productId:g}}).pipe((0,a.U)(({data:r})=>({...r.rows[0],productImages:(0,v.x5)(r.rows[0]?.productImages||"[]")})))}getProductReview(g,r,_=0,c=3){return this.http.get(`${o.N.BASE_URL}/shop/product/queryReview`,{params:{rows:c,page:_,productId:g,scoreType:r}}).pipe((0,a.U)(f=>f.data))}getSkusByProductId(g){return this.http.get(`${o.N.BASE_URL}/shop/product/querySkuByProductId`,{params:{productId:g}}).pipe((0,a.U)(({data:r})=>r.map(_=>({..._,specifications:JSON.parse(_.specificationValues||"[]")}))))}getSkuById(g){return this.http.get(`${o.N.BASE_URL}/shop/product/querySkuById`,{params:{skuId:g.join(",")}}).pipe((0,a.U)(({data:r})=>r.map(_=>({..._,specifications:JSON.parse(_.specificationValues||"[]")}))))}getBrandById(g){return this.http.get(`${o.N.BASE_URL}/shop/brand/queryById`,{params:{id:g}}).pipe((0,a.U)(r=>r.data))}}return t.\u0275fac=function(g){return new(g||t)(C.LFG(b.eN),C.LFG(u.K))},t.\u0275prov=C.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},3365:(D,E,n)=>{n.d(E,{N:()=>e,j:()=>o});var o=(()=>{return(a=o||(o={}))[a.OPEN=0]="OPEN",a[a.DRAWN=1]="DRAWN",a[a.DRAWING=2]="DRAWING",a[a.NOT_STARTED=3]="NOT_STARTED",a[a.EXPIRED=4]="EXPIRED",a[a.PAUSED=5]="PAUSED",a[a.WON=6]="WON",a[a.DRAWING_START_SOON=10]="DRAWING_START_SOON",a[a.LOADING_NEXT_POOL=100]="LOADING_NEXT_POOL",a[a.ALL=-1]="ALL",o;var a})(),e=(()=>{return(a=e||(e={}))[a.POOL_SIZE=0]="POOL_SIZE",a[a.CREATED_DATE=1]="CREATED_DATE",a[a.LAST_MODIFIED_DATE=4]="LAST_MODIFIED_DATE",e;var a})()},70325:(D,E,n)=>{n.d(E,{P:()=>N});var o=n(15861),e=n(94650),a=n(77579),v=n(82722),C=n(78372),b=n(5565),u=n(18110),P=n(56889),t=n(7507),M=n(36895),g=n(54463);const r=["biddingButton"],_=["bidWrapper"];function c(h,T){1&h&&(e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&h&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"my-entries")))}function f(h,T){1&h&&(e.TgZ(0,"div",13),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&h&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"max")," "))}function A(h,T){if(1&h&&e._uU(0),2&h){const x=e.oxw(3);e.hij(" ",x.pool.bidAmount," ")}}const I=function(h){return[h]};function R(h,T){if(1&h&&(e.TgZ(0,"div",7,8),e.YNc(2,c,3,3,"div",9),e.YNc(3,f,3,3,"div",10),e.YNc(4,A,1,1,"ng-template",null,11,e.W1O),e.qZA()),2&h){const x=e.MAs(5),l=e.oxw(2);e.Q6J("ngClass",e.VKq(4,I,l.pool.bidAmount>0?"font-bold":"font-medium")),e.xp6(2),e.Q6J("ngIf",!l.customBidAmount),e.xp6(1),e.Q6J("ngIf",l.pool.bidAmount>=l.pool.userMaxTickets)("ngIfElse",x)}}function Z(h,T){if(1&h&&(e.ynx(0),e.YNc(1,R,6,6,"div",6),e.BQk()),2&h){const x=e.oxw(),l=e.MAs(7);e.xp6(1),e.Q6J("ngIf",x.pool.bidAmount>0||x.customBidAmount||x.pool.currentPoolPercentage>=100)("ngIfElse",l)}}function S(h,T){1&h&&(e.TgZ(0,"div",14),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&h&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"login-to-bid")," "))}function W(h,T){1&h&&(e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&h&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"enter-now")," "))}let N=(()=>{class h extends b.V{constructor(x,l,s){super(),this.biddingService=x,this.router=l,this.cdr=s,this.biddingButton=null,this.bidWrapper=null,this.isLogin=!0,this.animationTarget=null,this.disableFlyingAnimation=!1,this.isReadOnly=!1,this.customBidAmount=null,this.onPoolCompleted=new e.vpe,this.busy=!1,this.biddingClicked$=new a.x,this.bidAmount=0}ngOnInit(){this.biddingClicked$.pipe((0,v.R)(this.destroyStream$),(0,C.b)(1e3)).subscribe(x=>{const l=this.bidAmount;this.bidAmount=0,l>0&&this.pool?.poolId&&this.biddingService.onBid(l,this.pool)})}onBid(x,l){var s=this;return(0,o.Z)(function*(){if(!s.isLogin)return void s.router.navigateByUrl("auth/login");if(s.isReadOnly||s.busy||l.currentPoolPercentage>=100||l.bidAmount>=l.userMaxTickets)return;if(s.biddingService.ticketCount$.getValue()<=0)return void(s.biddingService.isOpenGetTicketsModal=!0);if(!s.pool.poolId)return void s.biddingService.onLaunchInitialPool$.next(s.product);s.busy=!0;const B=Math.min(l.poolLimit-l.currentPoolSize,l.userMaxTickets-l.bidAmount,s.customBidAmount??s.biddingService.bidAmount,s.biddingService.ticketCount$.getValue());B?(s.biddingService.animationTarget=s.animationTarget,s.biddingService.biddingClicked$.next({event:x,element:s.biddingButton?.nativeElement,offsetY:5,launchDelay:20,disableFlyingAnimation:s.disableFlyingAnimation}),s.biddingService.trackingProduct==s.product.id&&s.biddingService.trackingPool==s.pool.poolId?s.biddingService.noOfClicks+=1:(s.biddingService.trackingProduct=s.product.id,s.biddingService.trackingPool=s.pool.poolId,s.biddingService.noOfClicks=1),l.bidAmount+=B,l.currentPoolSize+=B,l.currentPoolPercentage=(0,u.DU)(l.currentPoolSize,l.poolLimit),s.bidAmount+=B,s.bidAmount>0&&0==l.currentPoolPercentage&&(l.currentPoolPercentage=1),s.biddingService.ticketCount$.next(s.biddingService.ticketCount$.getValue()-B),s.biddingClicked$.next(!0),s.busy=!1,console.log("busy",s.busy),l.currentPoolPercentage>=100&&s.onPoolCompleted.emit(s.pool),s.cdr.detectChanges()):s.busy=!1})()}animateValue(x,l,s,L,w=500){let B=null;const y=U=>{B||(B=U);const k=Math.min((U-B)/w,1);l.innerHTML=Math.floor(k*(L-s)+s),k<1&&window.requestAnimationFrame(y)};window.requestAnimationFrame(y),x.bidAmount=L}}return h.\u0275fac=function(x){return new(x||h)(e.Y36(P.g),e.Y36(t.F0),e.Y36(e.sBO))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-bid-button"]],viewQuery:function(x,l){if(1&x&&(e.Gf(r,5),e.Gf(_,5)),2&x){let s;e.iGM(s=e.CRH())&&(l.biddingButton=s.first),e.iGM(s=e.CRH())&&(l.bidWrapper=s.first)}},inputs:{product:"product",pool:"pool",isLogin:"isLogin",animationTarget:"animationTarget",disableFlyingAnimation:"disableFlyingAnimation",isReadOnly:"isReadOnly",customBidAmount:"customBidAmount"},outputs:{onPoolCompleted:"onPoolCompleted"},features:[e.qOj],decls:8,vars:10,consts:[[1,"bidding-bar","overflow-hidden","h-12","relative","z-10","flex","items-center","w-36","rounded-lg",3,"click"],["biddingButton",""],["src","assets/images/ticket.png",1,"mx-1","md:mx-2","absolute","select-none"],[4,"ngIf","ngIfElse"],["noLogin",""],["notEntered",""],["class","bid-amount w-full pool-text select-none mt-px md:mt-0 pl-4 text-center",3,"ngClass",4,"ngIf","ngIfElse"],[1,"bid-amount","w-full","pool-text","select-none","mt-px","md:mt-0","pl-4","text-center",3,"ngClass"],["bidWrapper",""],["class","my-entries-label",4,"ngIf"],["class","uppercase max",4,"ngIf","ngIfElse"],["bidAmout",""],[1,"my-entries-label"],[1,"uppercase","max"],[1,"no-login","w-full","font-medium","select-none","mt-px","md:mt-0"],[1,"enter-now","w-full","font-medium","select-none","mt-px","md:mt-0"]],template:function(x,l){if(1&x&&(e.TgZ(0,"div",0,1),e.NdJ("click",function(L){return l.onBid(L,l.pool)}),e._UZ(2,"img",2),e.YNc(3,Z,2,2,"ng-container",3),e.qZA(),e.YNc(4,S,3,3,"ng-template",null,4,e.W1O),e.YNc(6,W,3,3,"ng-template",null,5,e.W1O)),2&x){const s=e.MAs(5);e.ekj("disabled",l.pool.currentPoolPercentage>=100||l.pool.bidAmount>=l.pool.userMaxTickets)("read-only",l.isReadOnly)("can-bid",l.isLogin)("not-entered",!(l.pool.bidAmount>0||l.customBidAmount)),e.xp6(3),e.Q6J("ngIf",l.isLogin)("ngIfElse",s)}},dependencies:[M.mk,M.O5,g.X$],styles:['.bidding-bar[_ngcontent-%COMP%]{background-color:#ffdc40;transition:transform .2s ease-out;transform-origin:bottom;transform:scale(1);overflow:hidden;border:1px solid rgb(255,188,133);cursor:pointer!important}.bidding-bar.disabled[_ngcontent-%COMP%]{color:#686868;background-color:#d9d9d9;border-color:#cacaca}.bidding-bar[_ngcontent-%COMP%]:not(.disabled).not-entered:after{animation:3s shinebg 1.2s forwards infinite}.bidding-bar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:19px;transition:transform .2s ease-out}@media (min-width: 768px){.bidding-bar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:25px}}@media (min-width: 1440px){.bidding-bar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:30px}}.bidding-bar[_ngcontent-%COMP%]   .bid-amount[_ngcontent-%COMP%]{transition:transform .2s ease-out}.bidding-bar[_ngcontent-%COMP%]:after{content:"";top:0;transform:translate(100%);width:100%;height:100%;position:absolute;background:linear-gradient(to right,rgba(255,255,255,0) 0%,rgba(255,255,255,.6) 50%,rgba(128,186,232,0) 99%,rgba(125,185,232,0) 100%)}.bidding-bar[_ngcontent-%COMP%]:not(.disabled):hover:after{animation:shinebg 1.2s forwards}@keyframes shinebg{0%{transform:translate(-100%)}to{transform:translate(100%)}}.pool-text[_ngcontent-%COMP%]{font-size:23px;line-height:23px}.pool-text[_ngcontent-%COMP%]   .my-entries-label[_ngcontent-%COMP%]{font-size:10px;line-height:10px;margin-top:1px}.pool-text[_ngcontent-%COMP%]   .max[_ngcontent-%COMP%]{font-size:20px;line-height:20px}.no-login[_ngcontent-%COMP%]{font-size:13px;line-height:1.1;margin-left:15px;text-align:center!important}@media (min-width: 768px){.no-login[_ngcontent-%COMP%]{font-size:15px;margin-left:15px}}.enter-now[_ngcontent-%COMP%]{font-size:13px;line-height:1.1;margin-left:15px;text-align:center!important;transition:transform .2s ease-out}@media (min-width: 640px){.enter-now[_ngcontent-%COMP%]{font-size:15px}}@media (min-width: 768px){.enter-now[_ngcontent-%COMP%]{font-size:18px;margin-left:15px}}@media (min-width: 1024px){.enter-now[_ngcontent-%COMP%]{margin-left:7px}}']}),h})()},10709:(D,E,n)=>{n.d(E,{u:()=>g});var o=n(3365),e=n(94650),a=n(36895),v=n(1470),C=n(54463);function b(r,_){1&r&&(e.TgZ(0,"div",4),e._UZ(1,"app-text-jumping",5),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Q6J("text",e.lcZ(2,1,"you-won")))}function u(r,_){if(1&r&&(e.ynx(0),e.YNc(1,b,3,3,"div",3),e.BQk()),2&r){const c=e.oxw(),f=e.MAs(2);e.xp6(1),e.Q6J("ngIf",c.pool.hasCurrentUserWon)("ngIfElse",f)}}function P(r,_){if(1&r&&(e.TgZ(0,"div",7)(1,"div",8),e._UZ(2,"img",9),e.qZA(),e.TgZ(3,"div",10),e._uU(4),e.qZA(),e.TgZ(5,"span",11),e._uU(6),e.ALo(7,"translate"),e.qZA()()),2&r){const c=e.oxw(2);e.xp6(2),e.Q6J("src",c.pool.winnerAvatar||"assets/images/sign-up-user.svg",e.LSH),e.xp6(2),e.hij(" ",c.pool.winnerName," "),e.xp6(2),e.Oqu(e.lcZ(7,3,"pool-winner"))}}function t(r,_){if(1&r&&e.YNc(0,P,8,5,"div",6),2&r){const c=e.oxw(),f=e.MAs(4);e.Q6J("ngIf",c.finished)("ngIfElse",f)}}function M(r,_){if(1&r&&(e.TgZ(0,"p",12),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r){const c=e.oxw();e.ekj("animated-elipsis",2===c.pool.status||100===c.pool.status)("invisible",0==c.pool.status),e.xp6(1),e.hij(" ",e.lcZ(2,5,c.statusMap[c.pool.status])," ")}}let g=(()=>{class r{constructor(){this.showLoadingNextPool=!0,this.statusMap={0:"100%",1:"lottery-drawn",2:"drawing-winner",3:"drawing-start-soon",4:"expired",5:"paused",10:"drawing-start-soon",100:"drawing-start-soon"}}get finished(){return this.pool?.status==o.j.DRAWN||this.pool?.status==o.j.EXPIRED}ngOnInit(){this.showLoadingNextPool&&(this.statusMap[100]="loading-next-pool")}}return r.\u0275fac=function(c){return new(c||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-bidding-pool-status"]],inputs:{pool:"pool",showLoadingNextPool:"showLoadingNextPool"},decls:5,vars:1,consts:[[4,"ngIf"],["notWon",""],["notFinished",""],["class","you-won pt-0.5 pb-px px-2 uppercase text-xs font-bold rounded-md text-black",4,"ngIf","ngIfElse"],[1,"you-won","pt-0.5","pb-px","px-2","uppercase","text-xs","font-bold","rounded-md","text-black"],[3,"text"],["class","font-medium text-base flex flex-nowrap items-center mt-0.5 mb-1",4,"ngIf","ngIfElse"],[1,"font-medium","text-base","flex","flex-nowrap","items-center","mt-0.5","mb-1"],[1,"w-8","h-8","rounded-full","relative","overflow-hidden","mr-1"],[1,"mr-1","object-cover","w-full","h-full",3,"src"],[1,"truncate","text-black"],[1,"tag","capitalize",2,"--color","#FFDC3F"],[1,"pool-status","text-black","text-base","font-bold","text-center","whitespace-nowrap","select-none"]],template:function(c,f){1&c&&(e.YNc(0,u,2,2,"ng-container",0),e.YNc(1,t,1,2,"ng-template",null,1,e.W1O),e.YNc(3,M,3,7,"ng-template",null,2,e.W1O)),2&c&&e.Q6J("ngIf",f.pool)},dependencies:[a.O5,v.P,C.X$],styles:['@charset "UTF-8";.animated-elipsis[_ngcontent-%COMP%]:after{overflow:hidden;display:inline-block;vertical-align:bottom;transform:translate(-2px);animation:ellipsis-animation steps(1,end) 2s infinite;content:"\\2026"}@keyframes ellipsis-animation{0%{clip-path:inset(0 100% 0 0)}25%{clip-path:inset(0 66.6% 0 0)}50%{clip-path:inset(0 33.3% 0 0)}75%{clip-path:inset(0 0 0 0)}}.you-won[_ngcontent-%COMP%]{position:relative;overflow:hidden}.you-won[_ngcontent-%COMP%]:after{content:"";top:0;transform:translate(100%);width:100%;height:100%;position:absolute;background:linear-gradient(to right,rgba(255,255,255,0) 0%,rgba(255,255,255,.6) 50%,rgba(128,186,232,0) 99%,rgba(125,185,232,0) 100%);animation:3s shinebg 1.2s forwards infinite}@keyframes shinebg{0%{transform:translate(-100%)}to{transform:translate(100%)}}.avatar[_ngcontent-%COMP%]{width:20px!important;height:20px;min-width:20px}.tag[_ngcontent-%COMP%]{display:inline-block;z-index:1;text-align:center;color:#000;height:20px;position:relative;border-left:none;background-color:var(--color);min-width:50px;margin-left:12px;padding-left:6px;border-radius:0 4px 4px 0;font-size:14px;line-height:20px;padding-right:6px}.tag[_ngcontent-%COMP%]:before{content:"";z-index:-1;position:absolute;top:3px;left:-7px;width:14px;height:14px;background-color:var(--color);border-right:none;border-top:none;transform:rotate(45deg)}']}),r})()},60928:(D,E,n)=>{n.d(E,{w:()=>C});var o=n(24837),e=n(94650),a=n(36895);const v=function(b){return{width:b}};let C=(()=>{class b{constructor(P){this.cdr=P,this.hasEntered=!1,this.hasInit=!1}ngAfterViewInit(){o.Z.isBrowser&&setTimeout(()=>{this.hasInit=!0,this.cdr.detectChanges()},500)}get showPercentage(){return this.currentPoolPercentage>0&&this.currentPoolPercentage<1?1:this.currentPoolPercentage}}return b.\u0275fac=function(P){return new(P||b)(e.Y36(e.sBO))},b.\u0275cmp=e.Xpm({type:b,selectors:[["app-bidding-progress-bar"]],inputs:{currentPoolPercentage:"currentPoolPercentage",hasEntered:"hasEntered"},decls:2,vars:7,consts:[[1,"progress-bar","border","border-solid","w-full","bg-white","rounded-full","h-3","md:h-3.5","overflow-hidden"],[1,"progress","h-full","rounded-full","rounded-r-none",3,"ngStyle"]],template:function(P,t){1&P&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.qZA()),2&P&&(e.ekj("entered",t.hasEntered&&t.showPercentage<100)("filled",t.showPercentage>=100),e.xp6(1),e.Q6J("ngStyle",e.VKq(5,v,(t.hasInit?t.showPercentage:0)+"%")))},dependencies:[a.PC],styles:['.progress-bar[_ngcontent-%COMP%]{border-color:#49a4fd;background-color:#f0f0f0}.progress-bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{position:relative;background:linear-gradient(to right,rgb(122,234,254),rgb(1,126,255));box-shadow:0 0 .1em #b0dcff inset,0 0 .1em #97d0ff inset;transition:width .4s ease}.progress-bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]:after{content:"";top:0;transform:translate(100%);width:100%;height:100%;position:absolute;background:linear-gradient(to right,rgba(255,255,255,0) 0%,rgba(255,255,255,.3) 50%,rgba(255,255,255,0) 100%);animation:progress 3s infinite}.progress-bar.entered[_ngcontent-%COMP%]{border-color:#c45afc}.progress-bar.entered[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(251,91,251),rgb(128,7,250));box-shadow:0 0 .1em #b758fb inset,0 0 .1em #ad3ffb inset}.progress-bar.filled[_ngcontent-%COMP%]{border-color:#c45afc}.progress-bar.filled[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(251,218,90),rgb(255,168,77));box-shadow:0 0 .1em #ffa84d inset,0 0 .1em #ffa84d inset}@keyframes progress{0%{transform:translate(-100%)}to{transform:translate(100%)}}']}),b})()},18215:(D,E,n)=>{n.d(E,{Z:()=>C});var o=n(94650),e=n(68514),a=n(54463);function v(b,u){if(1&b){const P=o.EpF();o.TgZ(0,"div",0)(1,"button",1),o.NdJ("click",function(){const g=o.CHM(P).method,r=o.oxw();return o.KtG(r.handleBtnClick(g))}),o._UZ(2,"img",2),o.TgZ(3,"div",3),o._uU(4),o.ALo(5,"translate"),o.qZA()()()}2&b&&(o.xp6(4),o.Oqu(o.lcZ(5,1,"toolkit-official-button")))}let C=(()=>{class b{constructor(){}handleBtnClick(P){P(this.additionalData)}}return b.\u0275fac=function(P){return new(P||b)},b.\u0275cmp=o.Xpm({type:b,selectors:[["app-global-customer-service"]],inputs:{additionalData:"additionalData"},decls:2,vars:0,consts:[[1,"hidden","md:block","rounded-l-2xl","border-y","border-l","border-solid","border-[#e9e9e9]","py-4","px-2","bg-white","shadow-xl","absolute","right-0","w-16","transform","-translate-y-1/2",2,"z-index","999"],[1,"inline",3,"click"],["src","assets/images/toolkit-item1.png","alt","",1,"m-auto","h-10","mb-1"],[1,"text-xs","font-light","text-center"]],template:function(P,t){1&P&&(o.TgZ(0,"app-customer-service"),o.YNc(1,v,6,3,"ng-template"),o.qZA())},dependencies:[e.M,a.X$],styles:["[_nghost-%COMP%]{position:sticky;top:50%;right:0;z-index:100;display:block}"]}),b})()},23284:(D,E,n)=>{n.d(E,{Y:()=>H});var o=n(15861),e=n(49808),a=n(5963),v=n(83905),C=n(70262),b=n(39646),u=n(24837),P=n(18110),t=n(94650),M=n(56889),g=n(36895),r=n(95133),_=n(7507),c=n(7858),f=n(63225),A=n(56095),I=n(60928),R=n(10709),Z=n(70325),S=n(16879);const W=["biddingButton"];function N(d,O){1&d&&(t.TgZ(0,"div",13),t._UZ(1,"span"),t.qZA())}function h(d,O){if(1&d&&t.GkF(0,14),2&d){const i=t.oxw(),p=t.MAs(13),m=t.MAs(11);t.Q6J("ngTemplateOutlet",i.isBiddingMode?p:m)}}function T(d,O){if(1&d&&t._UZ(0,"img",15),2&d){const i=t.oxw();t.Q6J("ngClass",i.isBiddingMode?"!w-10 top-0 left-0":"!w-12 bottom-0 right-0")}}function x(d,O){if(1&d){const i=t.EpF();t.TgZ(0,"app-bid-button",16),t.NdJ("onPoolCompleted",function(m){t.CHM(i);const K=t.oxw();return t.KtG(K.onPoolCompleted(m))}),t.qZA()}if(2&d){const i=t.oxw();t.Q6J("product",i.product)("pool",i.pool)("animationTarget",i.animationTarget)("isLogin",i.isLogin)}}const l=function(){return["/product","detail"]},s=function(d,O){return{id:d,poolId:O}};function L(d,O){if(1&d&&(t.TgZ(0,"a",2)(1,"p",17),t._uU(2),t.qZA(),t.TgZ(3,"p",18),t._uU(4),t.ALo(5,"currency"),t.qZA(),t.TgZ(6,"p",19),t._uU(7),t.ALo(8,"currency"),t.qZA()()),2&d){const i=t.oxw();t.Q6J("routerLink",t.DdM(9,l))("queryParams",t.WLB(10,s,i.product.id,i.pool.poolId||null)),t.xp6(2),t.hij(" ",i.product.name," "),t.xp6(2),t.hij(" ",t.lcZ(5,5,i.price)," "),t.xp6(3),t.hij(" ",t.lcZ(8,7,i.realPrice)," ")}}function w(d,O){if(1&d&&t._UZ(0,"img",25),2&d){const i=t.oxw().isBelong;t.Q6J("src",i?"assets/svgs/heart-full.svg":"assets/svgs/heart-empty.svg",t.LSH)}}function B(d,O){if(1&d&&t._UZ(0,"app-heart-animated",27),2&d){const i=t.oxw(2).isBelong;t.Q6J("active",i)}}function y(d,O){1&d&&t.YNc(0,B,1,1,"app-heart-animated",26)}function U(d,O){if(1&d){const i=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(m){const Q=t.CHM(i).method,$=t.oxw(2);return t.KtG($.handleClickFavorite(m,Q))}),t.YNc(1,w,1,1,"img",23),t.YNc(2,y,1,0,"ng-template",null,24,t.W1O),t.qZA()}if(2&d){const i=O.isDisabled,p=t.MAs(3),m=t.oxw(2);t.Q6J("disabled",i),t.xp6(1),t.Q6J("ngIf",!m.didClicked)("ngIfElse",p)}}function k(d,O){if(1&d){const i=t.EpF();t.TgZ(0,"div",20)(1,"app-product-favorite",21),t.NdJ("isBelongChange",function(){t.CHM(i);const m=t.oxw();return t.KtG(m.triggerChange())}),t.YNc(2,U,4,3,"ng-template"),t.qZA()()}if(2&d){const i=t.oxw();t.xp6(1),t.Q6J("product",i.product)}}function J(d,O){if(1&d){const i=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(m){const Q=t.CHM(i).method;return m.preventDefault(),m.stopPropagation(),t.KtG(Q())}),t.TgZ(1,"div",30),t._UZ(2,"img",31),t.qZA()()}if(2&d){const i=t.oxw(2);t.Q6J("ngClass",i.canLaunchPool?"bg-rainbow-animated !shadow-none !p-px":"bg-black")}}function F(d,O){if(1&d&&(t.TgZ(0,"div",20)(1,"app-launch-pool",28),t.YNc(2,J,3,1,"ng-template"),t.qZA()()),2&d){const i=t.oxw();t.xp6(1),t.Q6J("canLaunchPool",i.canLaunchPool)("product",i.product)}}function Y(d,O){if(1&d&&(t.TgZ(0,"p",37),t._uU(1),t.ALo(2,"number"),t.qZA()),2&d){const i=t.oxw(2);t.xp6(1),t.hij(" ",t.xi3(2,1,i.pool.currentPoolPercentage,"0.0-0"),"% ")}}function j(d,O){if(1&d&&t._UZ(0,"app-bidding-pool-status",38),2&d){const i=t.oxw(2);t.Q6J("pool",i.pool)}}const z=function(d){return{id:d,poolId:null}};function G(d,O){if(1&d&&(t.TgZ(0,"div",32)(1,"a",33),t._uU(2),t.qZA(),t._UZ(3,"app-bidding-progress-bar",34),t.YNc(4,Y,3,4,"p",35),t.YNc(5,j,1,1,"ng-template",null,36,t.W1O),t.qZA()),2&d){const i=t.MAs(6),p=t.oxw();t.xp6(1),t.Q6J("routerLink",t.DdM(7,l))("queryParams",t.VKq(8,z,p.product.id)),t.xp6(1),t.hij(" ",p.product.name," "),t.xp6(1),t.Q6J("currentPoolPercentage",p.pool.currentPoolPercentage)("hasEntered",p.pool.bidAmount>0),t.xp6(1),t.Q6J("ngIf",p.pool.currentPoolPercentage<100)("ngIfElse",i)}}const V=function(d){return{glowing:d}};let H=(()=>{class d{constructor(i,p){this.cdr=i,this.biddingService=p,this.biddingButton=null,this.isBiddingMode=!1,this.identifierPrefix="",this.canLaunchPool=!0,this.didClicked=!1,this.hideLoader=!1}ngOnInit(){this.setPoolConfig(),this.animationTarget=`#${this.identifierPrefix}home-product-${this.product.id}`}get realPrice(){let i=0;return this.product.defaultSku&&(i=this.product.defaultSku.cashBack),this.product.defaultSku?.price-(i||0)}get price(){return this.product.defaultSku?.price}handleClickFavorite(i,p){i.preventDefault(),i.stopPropagation(),this.isLogin?(this.didClicked=!0,setTimeout(()=>{p()},100)):p()}triggerChange(){this.cdr.markForCheck()}onPoolCompleted(i){var p=this;return(0,o.Z)(function*(){console.log("Pool completed!"),u.Z.isBrowser&&(p.pool.status=2,p.cdr.detectChanges(),yield(0,e.n)((0,a.H)(3e3)),p.pool.status=100,p.cdr.detectChanges(),yield(0,e.n)((0,a.H)(2e3))),p.getNewProductPool(),p.cdr.detectChanges()})()}setPoolConfig(){this.pool={poolId:this.product.poolId,poolOwner:{id:this.product.sponsorId,userId:this.product.sponsorName,avatar:this.product.sponsorAvatar??"assets/images/sign-up-user.svg"},currentPoolSize:this.product.currentTickets,currentPoolPercentage:(0,P.DU)(this.product.currentTickets,this.product.maxTickets),poolLimit:this.product.maxTickets,userMaxTickets:this.product.userMaxTickets,bidAmount:this.product.userTotalTickets,status:this.product.status}}getNewProductPool(){var i=this;return(0,o.Z)(function*(){console.log("Refresh pool");const p=yield(0,v.z)(i.biddingService.getProductPools({rows:1,page:0,skuId:i.product.productSkuId,status:0}).pipe((0,C.K)(m=>(0,b.of)({error:m}))));if(p?.rows?.length>0){const m=p.rows[0];console.log(i.pool,m),i.pool={poolId:m.id,poolOwner:{id:m.sponsorId,userId:m.sponsorName,avatar:m.sponsorAvatar??"/assets/images/sign-up-user.svg",maskedUserId:i.getMaskedUsername(m.sponsorName)},currentPoolSize:m.currentTickets,currentPoolPercentage:(0,P.DU)(m.currentTickets,m.maxTickets),poolLimit:m.maxTickets,userMaxTickets:i.product.userMaxTickets,bidAmount:m.userTotalTickets,status:m.status}}i.cdr.detectChanges()})()}getMaskedUsername(i){return i.replace(i.substring(2,i.length-2),"***")??"**"}}return d.\u0275fac=function(i){return new(i||d)(t.Y36(t.sBO),t.Y36(M.g))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-product-card"]],viewQuery:function(i,p){if(1&i&&t.Gf(W,5),2&i){let m;t.iGM(m=t.CRH())&&(p.biddingButton=m.first)}},inputs:{product:"product",isLogin:"isLogin",isBiddingMode:"isBiddingMode",identifierPrefix:"identifierPrefix",canLaunchPool:"canLaunchPool"},decls:16,vars:17,consts:[["draggable","false",1,"cursor-pointer","flex","flex-col","w-full","max-w-[246px]","lg:max-w-[220px]","xl:max-w-[245px]",3,"id"],[1,"product-image-wraper","rounded-lg","overflow-hidden","mb-2"],[3,"routerLink","queryParams"],[1,"absolute","inset-0","overflow-hidden",3,"ngClass"],[1,"object-cover","object-center","!w-full","!h-full","relative","z-10","product-img",3,"src","alt","load"],["class","loader-container absolute inset-0",4,"ngIf"],[3,"ngTemplateOutlet",4,"isBrowser"],["class","absolute fire-animation z-10","src","assets/svgs/fire-animation.svg","alt","",3,"ngClass",4,"ngIf"],["class","w-full",3,"product","pool","animationTarget","isLogin","onPoolCompleted",4,"ngIf"],[3,"routerLink","queryParams",4,"ngIf","ngIfElse"],["favoriteBtn",""],["launchBtn",""],["biddingInfo",""],[1,"loader-container","absolute","inset-0"],[3,"ngTemplateOutlet"],["src","assets/svgs/fire-animation.svg","alt","",1,"absolute","fire-animation","z-10",3,"ngClass"],[1,"w-full",3,"product","pool","animationTarget","isLogin","onPoolCompleted"],[1,"product-title","truncate","text-[#333333]","text-center","font-medium","mb-1","text-sm"],[1,"text-[#ff1a44]","leading-3","line-through","text-center","whitespace-nowrap","text-xs"],[1,"text-black","text-base","text-center","whitespace-nowrap","font-bold"],[1,"absolute","top-0","right-0","mr-1.5","mt-1.5","z-10"],[3,"product","isBelongChange"],[1,"rounded-full","border","border-solid","border-[#dddddd]","bg-white","w-full","flex","p-1","justify-center","items-center","text-[#dddddd]",3,"disabled","click"],["class","heart-img","alt","",3,"src",4,"ngIf","ngIfElse"],["haveNotClicked",""],["alt","",1,"heart-img",3,"src"],[3,"active",4,"isBrowser"],[3,"active"],[3,"canLaunchPool","product"],[1,"launch-pool","w-full","launch-btn","p-0.5","rounded-full",3,"ngClass","click"],[1,"content","bg-white","p-1","rounded-full","border-2","border-black","w-full","flex","items-center"],["src","assets/images/bidding/star.png",1,"!h-4","2xl:!h-5"],[1,"cursor-default"],[1,"product-title","block","truncate","text-black","text-center","font-medium","mb-2.5","text-sm","select-none",3,"routerLink","queryParams"],[3,"currentPoolPercentage","hasEntered"],["class","invisible -mt-1 text-black font-bold mb-px text-center whitespace-nowrap text-sm select-none",4,"ngIf","ngIfElse"],["drawingWinner",""],[1,"invisible","-mt-1","text-black","font-bold","mb-px","text-center","whitespace-nowrap","text-sm","select-none"],[3,"pool"]],template:function(i,p){if(1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"a",2)(3,"div",3)(4,"img",4),t.NdJ("load",function(){return p.hideLoader=!0}),t.qZA(),t.YNc(5,N,2,0,"div",5),t.qZA(),t.YNc(6,h,1,1,"ng-container",6),t.YNc(7,T,1,1,"img",7),t.qZA(),t.YNc(8,x,1,4,"app-bid-button",8),t.qZA(),t.YNc(9,L,9,13,"a",9),t.qZA(),t.YNc(10,k,3,1,"ng-template",null,10,t.W1O),t.YNc(12,F,3,2,"ng-template",null,11,t.W1O),t.YNc(14,G,7,10,"ng-template",null,12,t.W1O)),2&i){const m=t.MAs(15);t.s9C("id",p.identifierPrefix+"home-product-"+p.product.id),t.xp6(2),t.Q6J("routerLink",t.DdM(11,l))("queryParams",t.WLB(12,s,p.product.id,p.pool.poolId||null)),t.xp6(1),t.Q6J("ngClass",t.VKq(15,V,p.product.isSpecialSale&&!p.isBiddingMode)),t.xp6(1),t.Q6J("src",p.product.productImages[0].medium,t.LSH)("alt",p.product.name),t.xp6(1),t.Q6J("ngIf",!p.hideLoader),t.xp6(2),t.Q6J("ngIf",p.product.isSpecialSale),t.xp6(1),t.Q6J("ngIf",p.isBiddingMode),t.xp6(1),t.Q6J("ngIf",!p.isBiddingMode)("ngIfElse",m)}},dependencies:[g.mk,g.O5,g.tP,r.Fo,_.yS,c.j,f.E,A.y,I.w,R.u,Z.P,S.j,g.JJ,g.H9],styles:['.product-image-wraper[_ngcontent-%COMP%]{position:relative;width:100%;height:unset;padding-top:100%}.product-image-wraper[_ngcontent-%COMP%]   .product-img[_ngcontent-%COMP%]{border-radius:9px}.product-image-wraper[_ngcontent-%COMP%]:hover     .bidding-bar.can-bid{transform:scaleY(1.3);transform-origin:bottom}.product-image-wraper[_ngcontent-%COMP%]:hover     .bidding-bar.can-bid img, .product-image-wraper[_ngcontent-%COMP%]:hover     .bidding-bar.can-bid .bid-amount, .product-image-wraper[_ngcontent-%COMP%]:hover     .bidding-bar.can-bid .enter-now{transform:scaleY(.76)}  .bidding-mode-global app-product-card .product-img{border:1px solid #ebebeb}app-bid-button[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0}app-bid-button[_ngcontent-%COMP%]     .bidding-bar{width:100%;border-radius:0;border:none;height:40px}app-bid-button[_ngcontent-%COMP%]     .bidding-bar .bid-amount.large-value{padding-left:3.5rem}app-bid-button[_ngcontent-%COMP%]     .pool-text{font-size:1.5rem;line-height:1.5rem}@media (min-width: 1440px){app-bid-button[_ngcontent-%COMP%]     .no-login{margin-left:20px}}app-heart-animated[_ngcontent-%COMP%], .heart-img[_ngcontent-%COMP%]{height:28px!important;width:28px!important}.glowing[_ngcontent-%COMP%]{border-radius:.5rem;padding:2px;box-shadow:0 0 5px 2px #ffd80099}.glowing[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;border-radius:inherit;border-radius:.5rem;z-index:1;background:linear-gradient(to top,#f68104,#ffd800)}.loader-container[_ngcontent-%COMP%]{z-index:3;margin:2px;border-radius:.5rem;background-color:#e7e8e7}.loader-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;position:absolute;height:32px;width:32px;clip:rect(16px,32px,32px,0);margin:auto;inset:0;animation:loader-2-2 1.5s cubic-bezier(.77,0,.175,1) infinite}@keyframes loader-2-2{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loader-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;inset:0;margin:auto;height:32px;width:32px;border:3px solid transparent;border-top:3px solid rgba(0,0,0,.3);border-radius:50%;animation:loader-2-3 1.5s cubic-bezier(.77,0,.175,1) infinite}@keyframes loader-2-3{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loader-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;inset:0;margin:auto;height:32px;width:32px;border:3px solid rgba(0,0,0,.3);border-radius:50%}app-bidding-pool-status[_ngcontent-%COMP%]     .pool-status{margin-bottom:1px;margin-top:-.25rem;font-size:.875rem;line-height:1.25rem}'],changeDetection:0}),d})()},56095:(D,E,n)=>{n.d(E,{y:()=>g});var o=n(94650),e=n(5565),a=n(94830),v=n(36895),C=n(63225),b=n(60753);function u(r,_){}function P(r,_){if(1&r){const c=o.EpF();o.TgZ(0,"app-require-login-modal",3),o.NdJ("isOpenChange",function(A){o.CHM(c);const I=o.oxw(2);return o.KtG(I.openRequireLoginModal=A)}),o.qZA()}if(2&r){const c=o.oxw(2);o.Q6J("isOpen",c.openRequireLoginModal)}}function t(r,_){if(1&r&&(o.ynx(0),o.YNc(1,P,1,1,"app-require-login-modal",2),o.BQk()),2&r){const c=o.oxw();o.xp6(1),o.Q6J("ngIf",c.openRequireLoginModal)}}const M=function(r,_,c,f){return{method:r,isBelong:_,isLoading:c,isDisabled:f}};let g=(()=>{class r extends e.V{constructor(c){super(),this.userService=c,this.isBelongChange=new o.vpe,this.isBelong=!1,this.isLoading=!1,this.openRequireLoginModal=!1,this.handleClick=()=>{this.userService.isLogin()?this.isBelong?(this.isLoading=!0,this.userService.removeFromWishList(this.product.id).subscribe({next:f=>{this.isBelong=!1,this.isBelongChange.emit(!1),this.isLoading=!1},error:f=>{this.isLoading=!1}})):(this.isLoading=!0,this.userService.addToWishList(this.product.id,this.skuId||this.product.defaultSku?.id).subscribe({next:f=>{this.isBelong=!0,this.isBelongChange.emit(!0),this.isLoading=!1},error:f=>{this.isLoading=!1}})):this.openRequireLoginModal=!0}}ngOnInit(){this.isBelong=this.product.collect}get isDisabled(){return!this.skuId&&!this.product?.defaultSku}}return r.\u0275fac=function(c){return new(c||r)(o.Y36(a.K))},r.\u0275cmp=o.Xpm({type:r,selectors:[["app-product-favorite"]],contentQueries:function(c,f,A){if(1&c&&o.Suo(A,o.Rgc,5),2&c){let I;o.iGM(I=o.CRH())&&(f.templateRef=I.first)}},inputs:{product:"product",skuId:"skuId"},outputs:{isBelongChange:"isBelongChange"},features:[o.qOj],decls:3,vars:7,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"isBrowser"],[3,"isOpen","isOpenChange",4,"ngIf"],[3,"isOpen","isOpenChange"]],template:function(c,f){1&c&&(o.ynx(0),o.YNc(1,u,0,0,"ng-template",0),o.YNc(2,t,2,1,"ng-container",1),o.BQk()),2&c&&(o.xp6(1),o.Q6J("ngTemplateOutlet",f.templateRef)("ngTemplateOutletContext",o.l5B(2,M,f.handleClick,f.isBelong,f.isLoading,f.isDisabled)))},dependencies:[v.O5,v.tP,C.E,b.C],encapsulation:2}),r})()},45210:(D,E,n)=>{n.d(E,{B:()=>v});var o=n(15861),e=n(24837),a=n(94650);let v=(()=>{class C{constructor(u){this.el=u,this.myValue=!0,this.content=u.nativeElement}ngAfterViewInit(){var u=this;return(0,o.Z)(function*(){e.Z.isServer||(u.btn=document.createElement("button"),u.btn.innerHTML='\n    <svg class="icon__arrow-up" viewBox="0 0 24 24">\n      <title>Back to top</title>\n      <path d="M18.71,11.71a1,1,0,0,1-1.42,0L13,7.41V19a1,1,0,0,1-2,0V7.41l-4.29,4.3a1,1,0,0,1-1.42-1.42l6-6a1,1,0,0,1,1.42,0l6,6A1,1,0,0,1,18.71,11.71Z"/>\n    </svg>',u.btn.classList.add("back-to-top-btn"),u.btn.addEventListener("click",()=>{u.content.scrollToTop(500)}),document.body.appendChild(u.btn),u.el.nativeElement.append(u.btn))})()}onScroll(u){u.detail.scrollTop>200?this.btn.classList.add("show-btn"):this.btn.classList.remove("show-btn")}}return C.\u0275fac=function(u){return new(u||C)(a.Y36(a.SBq))},C.\u0275dir=a.lG2({type:C,selectors:[["","backToTopBtn",""]],hostVars:1,hostBindings:function(u,P){1&u&&a.NdJ("ionScroll",function(M){return P.onScroll(M)}),2&u&&a.Ikx("overflow-scroll",P.myValue)}}),C})()}}]);