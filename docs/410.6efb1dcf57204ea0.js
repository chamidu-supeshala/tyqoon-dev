"use strict";(self.webpackChunkangular_tyqoon_client=self.webpackChunkangular_tyqoon_client||[]).push([[410],{50410:(J,d,o)=>{o.r(d),o.d(d,{PayCancelModule:()=>T});var h=o(88595),g=o(44466),i=o(84787),l=o(15861),m=o(11781),u=o(6104),t=o(98274),p=o(36895),C=o(80164),s=o(95133),Z=o(2628),y=o(54463);function f(n,c){1&n&&(t.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-label")(3,"h3"),t._UZ(4,"ion-skeleton-text",3),t.qZA(),t.TgZ(5,"p"),t._UZ(6,"ion-skeleton-text",3),t.qZA(),t.TgZ(7,"p"),t._UZ(8,"ion-skeleton-text",3),t.qZA(),t.TgZ(9,"h3"),t._UZ(10,"ion-skeleton-text",3),t.qZA(),t.TgZ(11,"p"),t._UZ(12,"ion-skeleton-text",3),t.qZA(),t.TgZ(13,"p"),t._UZ(14,"ion-skeleton-text",3),t.qZA()()()()),2&n&&(t.xp6(4),t.Q6J("animated",!0),t.xp6(2),t.Q6J("animated",!0),t.xp6(2),t.Q6J("animated",!0),t.xp6(2),t.Q6J("animated",!0),t.xp6(2),t.Q6J("animated",!0),t.xp6(2),t.Q6J("animated",!0))}function x(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t._UZ(1,"app-pay-content",4),t.TgZ(2,"div")(3,"button",5),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.gotoHome())}),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.back())}),t._uU(7),t.ALo(8,"translate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("content",e.payResult),t.xp6(3),t.Oqu(t.lcZ(5,3,"order-cancelled-go-home")),t.xp6(3),t.Oqu(t.lcZ(8,5,"order-cancelled-return"))}}const P=[{path:"",component:(()=>{class n{constructor(e,a,r,A,k,O){this.activeRoute=e,this.location=a,this.router=r,this.dict=A,this.CheckoutService=k,this.toast=O,this.loading={queryPaymentOrder:!1},this.errorTxt=this.dict.transform(m.P1.CANCEL,u.f.PAY_STATUS,"tips")}ngOnInit(){this.orderId=this.activeRoute.snapshot.params.id,this.queryPaymentOrder()}toastError(e){var a=this;return(0,l.Z)(function*(){yield a.presentToast({position:"bottom",message:e,icon:"alert-circle-outline",duration:1e3,color:"danger"})})()}toastSuccess(e){var a=this;return(0,l.Z)(function*(){yield a.presentToast({position:"bottom",message:e,duration:1e3,icon:"checkmark-circle-outline",color:"success"})})()}presentToast(e){var a=this;return(0,l.Z)(function*(){yield(yield a.toast.create(e)).present()})()}queryPaymentOrder(){this.loading.queryPaymentOrder=!0,this.CheckoutService.queryPaymentOrder(this.orderId).subscribe({next:e=>{this.payResult={...e,status:m.P1.CANCEL},this.CheckoutService.cancel({id:this.orderId}).subscribe()},error:e=>{console.error(e),this.toastError(e.message),this.errorTxt=e.message}}).add(()=>this.loading.queryPaymentOrder=!1)}gotoHome(){this.router.navigateByUrl("/",{replaceUrl:!0})}back(){this.location.back()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(i.gz),t.Y36(p.Ye),t.Y36(i.F0),t.Y36(u.e),t.Y36(C.Z),t.Y36(s.yF))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-pay-cancel"]],features:[t._Bn([u.e])],decls:4,vars:2,consts:[[1,"container","page-pay-cancel"],[4,"ngIf","ngIfElse"],["result",""],[2,"width","100%",3,"animated"],[3,"content"],[3,"click"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,f,15,6,"ion-list",1),t.YNc(2,x,9,7,"ng-template",null,2,t.W1O),t.qZA()),2&e){const r=t.MAs(3);t.xp6(1),t.Q6J("ngIf",a.loading.queryPaymentOrder)("ngIfElse",r)}},dependencies:[Z.k,p.O5,s.Ie,s.Q$,s.q_,s.CK,y.X$],styles:[".page-pay-cancel[_ngcontent-%COMP%]{min-height:70vh;display:flex;justify-content:center;align-items:center}"]}),n})()}];let v=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[i.Bz.forChild(P),i.Bz]}),n})(),T=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.m,v,h.g,y.aw,s.Pc]}),n})()}}]);