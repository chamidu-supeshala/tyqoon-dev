"use strict";(self.webpackChunkangular_tyqoon_client=self.webpackChunkangular_tyqoon_client||[]).push([[5509],{85898:(L,y,i)=>{i.d(y,{b:()=>B});var c=i(15861),f=i(77579),m=i(82722),g=i(59468),t=i(49808),h=i(24837),v=i(95133),S=i(54463),C=i(36895),w=i(44466),E=i(59809),O=i(5565),R=i(18110),a=i(94650),I=i(35482),x=i(94830),T=i(23284);function A(p,_){1&p&&a._UZ(0,"app-product-card",3),2&p&&a.Q6J("product",_.$implicit)}function M(p,_){1&p&&a._UZ(0,"app-product-card-skeleton",5)}const Z=function(){return[]};function D(p,_){if(1&p&&(a.ynx(0),a.YNc(1,M,1,0,"app-product-card-skeleton",4),a.BQk()),2&p){const o=a.oxw();a.xp6(1),a.Q6J("ngForOf",a.DdM(2,Z).constructor(o.pageSize).fill(1))("ngForTrackBy",o.trackByFn2)}}let B=(()=>{class p extends O.V{constructor(o,d,P){super(),this.productService=o,this.userService=d,this.cdr=P,this.pageSize=20,this.offsetScroll=2e3,this.additionalParams={},this.isSSR=!1,this.throttleScroll=new f.x,this.page=-1,this.isLoading=!1,this.total=0,this.products=[]}ngOnInit(){!this.isSSR&&h.Z.isServer?this.isLoading=!0:this.fetchData()}ngAfterViewInit(){var o=this;return(0,c.Z)(function*(){h.Z.isServer||o.scrollContainer&&(o.scrollElement=yield o.scrollContainer.getScrollElement(),o.scrollContainer.ionScroll.pipe((0,m.R)(o.destroyStream$)).subscribe(d=>{o.scrollElement.scrollHeight-d.detail.scrollTop<o.offsetScroll&&o.throttleScroll.next(1)}),o.throttleScroll.pipe((0,g.p)(300),(0,m.R)(o.destroyStream$)).subscribe(()=>{o.fetchData()}))})()}fetchData(){var o=this;return(0,c.Z)(function*(){if(!o.isLoading&&(-1===o.page||o.products.length<o.total)){o.isLoading=!0,o.page++,o.cdr.markForCheck();const d=yield(0,t.n)(o.productService.getProductsByMetaParamsV2({page:o.page,rows:o.pageSize,traceId:o.userService.traceId,isRecommended:!0,...o.additionalParams}));o.products=[...o.products,...d.rows||[]],o.products=(0,R.DI)(o.products),o.total=d.total,o.isLoading=!1,o.cdr.markForCheck()}})()}clear(){this.page=-1,this.isLoading=!1,this.total=0,this.products=[]}trackByFn(o,d){return d.id}trackByFn2(o){return o}}return p.\u0275fac=function(o){return new(o||p)(a.Y36(I.s),a.Y36(x.K),a.Y36(a.sBO))},p.\u0275cmp=a.Xpm({type:p,selectors:[["app-products-infinite-scroll"]],inputs:{pageSize:"pageSize",scrollContainer:"scrollContainer",offsetScroll:"offsetScroll",additionalParams:"additionalParams",isSSR:"isSSR"},standalone:!0,features:[a.qOj,a.jDz],decls:4,vars:3,consts:[[1,"flex","flex-wrap","-mx-1"],["class","px-1 flex-shrink-0 mb-6 flex justify-center",3,"product",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"px-1","flex-shrink-0","mb-6","flex","justify-center",3,"product"],["class","px-1 flex-shrink-0 mb-6 flex justify-center",4,"ngFor","ngForOf","ngForTrackBy"],[1,"px-1","flex-shrink-0","mb-6","flex","justify-center"]],template:function(o,d){1&o&&(a.TgZ(0,"div")(1,"div",0),a.YNc(2,A,1,1,"app-product-card",1),a.YNc(3,D,2,3,"ng-container",2),a.qZA()()),2&o&&(a.xp6(2),a.Q6J("ngForOf",d.products)("ngForTrackBy",d.trackByFn),a.xp6(1),a.Q6J("ngIf",d.isLoading))},dependencies:[S.aw,C.ez,C.sg,C.O5,v.Pc,w.m,T.Y,E.I],styles:["app-product-card[_ngcontent-%COMP%], app-product-card-skeleton[_ngcontent-%COMP%]{width:50%}@media (min-width: 340px){app-product-card[_ngcontent-%COMP%], app-product-card-skeleton[_ngcontent-%COMP%]{width:33.3333333333%}}@media (min-width: 640px){app-product-card[_ngcontent-%COMP%], app-product-card-skeleton[_ngcontent-%COMP%]{width:25%}}@media (min-width: 768px){app-product-card[_ngcontent-%COMP%], app-product-card-skeleton[_ngcontent-%COMP%]{width:20%}}@media (min-width: 1024px){app-product-card[_ngcontent-%COMP%], app-product-card-skeleton[_ngcontent-%COMP%]{width:16.6666666667%}}"],changeDetection:0}),p})()},65509:(L,y,i)=>{i.r(y),i.d(y,{MartModule:()=>j});var c=i(36895),f=i(7507),m=i(24499);const g=[{name:"mart-fresh-groceries",icon:"/assets/images/mart-fresh-groceries.png",activityId:"70833251"},{name:"category-beautiy-health",icon:"/assets/images/mart-category-beauty-min.png",activityId:"49845326"},{name:"category-FOOD-&-DINING",icon:"/assets/images/mart-category-food-min.png",activityId:"49846331"},{name:"mart-health-wellness",icon:"/assets/images/mart-category-health-min.png",activityId:"49846966"},{name:"mart-home-living",icon:"/assets/images/mart-category-home-living-min.png",activityId:"49847602"},{name:"mart-kids-babies",icon:"/assets/images/mart-category-kids-min.png",activityId:"49848814"}];var t=i(94650),h=i(95133),v=i(85898),S=i(52313),C=i(46032),w=i(5068),E=i(49127),O=i(45210),R=i(18215),a=i(54463);const I=function(n){return{activityId:n}};let x=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mart-category"]],inputs:{martCategory:"martCategory"},decls:6,vars:9,consts:[[1,"mart-category","flex","flex-col","items-center","justify-center","mx-2",3,"routerLink","queryParams"],[1,"mart-category__icon","rounded-full","mb-2"],[3,"src","alt"],[1,"mart-category__name","text-white","text-center"]],template:function(e,r){1&e&&(t.TgZ(0,"a",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"p",3),t._uU(4),t.ALo(5,"translate"),t.qZA()()),2&e&&(t.Q6J("routerLink","/product/search")("queryParams",t.VKq(7,I,r.martCategory.activityId)),t.xp6(2),t.Q6J("src",r.martCategory.icon,t.LSH)("alt",r.martCategory.name),t.xp6(2),t.hij(" ",t.lcZ(5,5,r.martCategory.name)," "))},dependencies:[f.yS,h.Fo,a.X$],styles:[".mart-category__icon[_ngcontent-%COMP%]{width:67px;height:67px;box-shadow:0 4px 16px #4a4af8}@media (min-width: 1024px){.mart-category__icon[_ngcontent-%COMP%]{width:77px;height:77px}}.mart-category__name[_ngcontent-%COMP%]{width:67px;font-size:11px;line-height:1.25}@media (min-width: 1024px){.mart-category__name[_ngcontent-%COMP%]{width:77px;font-size:12.5px}}"]}),n})();var T=i(24837),A=i(54968),M=i(99485);const Z=["swiper"];function D(n,l){if(1&n&&t._UZ(0,"app-mart-category",6),2&n){const e=t.oxw().$implicit;t.Q6J("martCategory",e)}}function B(n,l){1&n&&t.YNc(0,D,1,1,"ng-template",5)}const p=function(n){return{"is-swiping":n}};function _(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"div",1),t.NdJ("touchstart",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleElementTouch())}),t.TgZ(1,"swiper",2,3),t.NdJ("init",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleInit())})("breakpoint",function(s){t.CHM(e);const u=t.oxw();return t.KtG(u.handleBreakPointChange(s))})("mouseenter",function(s){t.CHM(e);const u=t.oxw();return t.KtG(u.handleMouseEnter(s))})("mouseleave",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleMouseLeave())})("touchEnd",function(s){t.CHM(e);const u=t.oxw();return t.KtG(u.handleTouchEnd(s))})("transitionEnd",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleTransitionEnd())}),t.YNc(3,B,1,0,null,4),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,p,e.isSwiping))("config",e.slideOpts),t.xp6(2),t.Q6J("ngForOf",e.categories)}}let o=(()=>{class n{constructor(){this.categories=g,this.isInitalize=!1,this.slideOpts={speed:2e4,freeMode:!0,loop:!0,autoplay:!1,slidesPerView:"auto",breakpoints:{340:{speed:2e4},640:{speed:2e4}}},this.oneRoundWidth=0,this.isSwiping=!1,this.isMouseEnter=!1,this.handleTransitionEnd=()=>{if(this.isInitalize&&!this.isSwiping&&!this.isMouseEnter){const e=this.categorySwiper?.swiperRef,r=e?.getTranslate();r===this.end1RoundPosition?setTimeout(()=>{e?.translateTo(this.initPosition,0,!0,!1)},0):(r<this.end1RoundPosition&&e?.translateTo(this.initPosition+(r-this.end1RoundPosition),0,!1,!1),setTimeout(()=>{e?.translateTo(this.end1RoundPosition,Math.abs(this.end1RoundPosition-e.getTranslate())/this.oneRoundWidth*this.speed1Round,!0,!1)},0))}}}ngOnInit(){}ngOnDestroy(){this.subscription?.unsubscribe()}handleInit(){T.Z.isServer||this.setTranslate()}handleMouseEnter(e){this.isMouseEnter=!0;const r=this.categorySwiper?.swiperRef,s=r?.getTranslate();r?.translateTo(s-10,0,!1,!1)}handleElementTouch(){const e=this.categorySwiper?.swiperRef;this.isMouseEnter=!0;const r=e?.getTranslate();e?.translateTo(r-10,0,!1,!1)}handleTouchStart([e,r]){this.isSwiping=!0}handleTouchEnd([e,r]){this.isSwiping=!1,"mouse"!==r.pointerType&&(this.isMouseEnter=!1);const s=this.categorySwiper?.swiperRef;s&&setTimeout(()=>{const u=s.getTranslate();s.translateTo(u>=this.end1RoundPosition?u:this.initPosition+(u-this.end1RoundPosition),0,!1,!1)},0),setTimeout(()=>{this.resumeSlide()},10)}handleMouseLeave(){this.isMouseEnter=!1,setTimeout(()=>{this.resumeSlide()},10)}resumeSlide(){if(!this.isSwiping&&!this.isMouseEnter){const e=this.categorySwiper?.swiperRef;if(e){const r=e.getTranslate();r>=this.end1RoundPosition||e?.translateTo(this.initPosition+(r-this.end1RoundPosition),0,!1,!1),e.translateTo(this.end1RoundPosition,Math.abs(this.end1RoundPosition-r)/this.oneRoundWidth*this.speed1Round,!0,!1)}}}setTranslate(){setTimeout(()=>{const e=this.categorySwiper?.swiperRef;if(e){const r=e.wrapperEl.querySelector(".swiper-slide");this.oneRoundWidth=(r?.clientWidth||0)*this.categories.length,e.translateTo(this.end1RoundPosition,this.speed1Round,!0,!1),this.isInitalize=!0,this.subscription=(0,A.R)(e.wrapperEl,"transitionend").subscribe(this.handleTransitionEnd)}},2e3)}get speed1Round(){const e=this.categorySwiper?.swiperRef;return e?.params.breakpoints?.[e.currentBreakpoint]?.speed||e?.params.speed||0}get initPosition(){return-this.oneRoundWidth}get end1RoundPosition(){return 2*this.initPosition}handleBreakPointChange([e,r]){setTimeout(()=>{const u=this.categorySwiper?.swiperRef?.wrapperEl.querySelector(".swiper-slide");this.oneRoundWidth=(u?.clientWidth||0)*this.categories.length},100)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mart-category-slider"]],viewQuery:function(e,r){if(1&e&&t.Gf(Z,5),2&e){let s;t.iGM(s=t.CRH())&&(r.categorySwiper=s.first)}},decls:1,vars:1,consts:[[3,"touchstart",4,"ngIf"],[3,"touchstart"],[1,"category-swiper",3,"ngClass","config","init","breakpoint","mouseenter","mouseleave","touchEnd","transitionEnd"],["swiper",""],[4,"ngFor","ngForOf"],["swiperSlide",""],[1,"w-full","h-full",3,"martCategory"]],template:function(e,r){1&e&&t.YNc(0,_,4,5,"div",0),2&e&&t.Q6J("ngIf",r.categories)},dependencies:[c.mk,c.sg,c.O5,M.nF,M.YC,x],styles:["swiper[_ngcontent-%COMP%]:not(.is-swiping)     .swiper-wrapper{transition-timing-function:linear!important}swiper[_ngcontent-%COMP%]     .swiper-wrapper{margin-left:-.25rem;margin-right:-.25rem}swiper[_ngcontent-%COMP%]     .swiper-slide{width:87px;padding:8px 4px 0;flex-shrink:0}@media (min-width: 1024px){swiper[_ngcontent-%COMP%]     .swiper-slide{width:97px}}"]}),n})();function d(n,l){1&n&&t._UZ(0,"app-mart-category",8),2&n&&t.Q6J("martCategory",l.$implicit)}let P=(()=>{class n{constructor(e){this.translateService=e,this.categories=g}ngOnInit(){}getTyqoonMartImageSm(){return"cn"===this.translateService.currentLang?"assets/images/tyqoon-mart-cn.png":"assets/images/tyqoon-mart.png"}getTyqoonMartImageLg(){switch(this.translateService.currentLang){case"cn":case"tr":return"assets/images/Tyqoon-mart-logo-cnv2-720px.png";default:return"assets/images/Tyqoon-mart-logo-720px-min.png"}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mart-banner"]],decls:9,vars:3,consts:[[1,"mart-banner","w-full"],[1,"tyqoon-container","flex","flex-col","md:flex-row","md:items-center","py-6"],[1,"mart-logo","mb-4","md:mb-0"],["alt","Tyqoon mart mobile logo",1,"sm:hidden","h-full","object-contain",3,"src"],["alt","Tyqoon mart mobile logo",1,"hidden","sm:flex","h-full","object-contain",3,"src"],[1,"hidden","md:flex","flex-auto","justify-center","ml-4"],["class","h-full",3,"martCategory",4,"ngFor","ngForOf"],[1,"flex","md:hidden"],[1,"h-full",3,"martCategory"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3)(4,"img",4),t.qZA(),t.TgZ(5,"div",5),t.YNc(6,d,1,1,"app-mart-category",6),t.qZA(),t.TgZ(7,"div",7),t._UZ(8,"app-mart-category-slider"),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("src",r.getTyqoonMartImageSm(),t.LSH),t.xp6(1),t.Q6J("src",r.getTyqoonMartImageLg(),t.LSH),t.xp6(2),t.Q6J("ngForOf",r.categories))},dependencies:[c.sg,x,o],styles:[".mart-banner[_ngcontent-%COMP%]{background-image:linear-gradient(to right,#0189ff,#013dff)}.mart-banner[_ngcontent-%COMP%]   .mart-logo[_ngcontent-%COMP%]{height:118px}@media (min-width: 640px){.mart-banner[_ngcontent-%COMP%]   .mart-logo[_ngcontent-%COMP%]{height:136px}}@media (min-width: 768px){.mart-banner[_ngcontent-%COMP%]   .mart-logo[_ngcontent-%COMP%]{height:236px}}"]}),n})();const F=function(n){return{isRecommended:!1,activityId:n}},U=[{path:"",component:(()=>{class n extends m.c{constructor(e,r){super(e,r),this.categories=g,this.defaultCategory=g[0].activityId}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.Qsj))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mart"]],features:[t.qOj],decls:12,vars:6,consts:[["fullscreen","true","scrollEvents","true","backToTopBtn","",3,"ionScroll"],["ionContent",""],["appOverflowVisible","",1,"sticky","top-0","shadow-lg","z-50"],["header",""],[3,"forceFullWidthSearch"],[1,"tyqoon-container","min-h-[50vh]","mt-4"],[3,"additionalParams","scrollContainer","isSSR"],[1,"mt-4","md:hidden"]],template:function(e,r){if(1&e&&(t.TgZ(0,"ion-content",0,1),t.NdJ("ionScroll",function(u){return r.onContentScroll(u)}),t._UZ(2,"app-global-customer-service"),t.TgZ(3,"ion-toolbar",2,3),t._UZ(5,"app-top-navbar",4)(6,"app-top-menu"),t.qZA(),t._UZ(7,"app-mart-banner"),t.TgZ(8,"div",5),t._UZ(9,"app-products-infinite-scroll",6),t.qZA()(),t.TgZ(10,"ion-footer",7),t._UZ(11,"app-bottom-navbar"),t.qZA()),2&e){const s=t.MAs(1);t.xp6(5),t.Q6J("forceFullWidthSearch",!0),t.xp6(4),t.Q6J("additionalParams",t.VKq(4,F,r.defaultCategory))("scrollContainer",s)("isSSR",!0)}},dependencies:[h.W2,h.fr,h.sr,v.b,S.p,C.K,w.z,E.H,O.B,R.Z,P]}),n})()}];let b=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.Bz.forChild(U),f.Bz]}),n})();var K=i(44466),W=i(22193);let j=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,b,h.Pc,a.aw,M.kz,v.b,K.m,W.n]}),n})()},59809:(L,y,i)=>{i.d(y,{I:()=>f});var c=i(94650);let f=(()=>{class m{}return m.\u0275fac=function(t){return new(t||m)},m.\u0275cmp=c.Xpm({type:m,selectors:[["app-product-card-skeleton"]],standalone:!0,features:[c.jDz],decls:9,vars:0,consts:[[1,"cursor-pointer","flex","flex-col","w-full","max-w-[246px]","lg:max-w-[220px]","xl:max-w-[245px]"],[1,"relative","w-full","mb-2",2,"padding-top","100%"],[1,"absolute","inset-0","pulSate","rounded-lg"],[1,"product-title","truncate","mb-1","pulSate","text-sm",2,"letter-spacing","20px"],[1,"text-xs","leading-3","text-center","pulSate",2,"letter-spacing","20px"],[1,"text-base","text-center","pulSate",2,"letter-spacing","20px"]],template:function(t,h){1&t&&(c.TgZ(0,"div",0)(1,"div",1),c._UZ(2,"div",2),c.qZA(),c.TgZ(3,"p",3),c._uU(4," \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),c.qZA(),c.TgZ(5,"p",4),c._uU(6," \xa0\xa0 "),c.qZA(),c.TgZ(7,"p",5),c._uU(8," \xa0\xa0 "),c.qZA()())}}),m})()}}]);