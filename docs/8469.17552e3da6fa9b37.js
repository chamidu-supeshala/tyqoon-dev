"use strict";(self.webpackChunkangular_tyqoon_client=self.webpackChunkangular_tyqoon_client||[]).push([[8469,9127],{24499:(y,v,e)=>{e.d(v,{c:()=>f});var o=e(5565),c=e(94650);const h=["header"];let f=(()=>{class u extends o.V{constructor(r,p){super(),this.element=r,this.renderer=p,this.lastScrollTop=0}onContentScroll(r){const p=r.detail.scrollTop;p>=50&&this.lastScrollTop<p?this.renderer.addClass(this.header.el,"top-toolbar-hide"):this.renderer.removeClass(this.header.el,"top-toolbar-hide"),this.lastScrollTop=p}}return u.\u0275fac=function(r){return new(r||u)(c.Y36(c.SBq),c.Y36(c.Qsj))},u.\u0275cmp=c.Xpm({type:u,selectors:[["ng-component"]],viewQuery:function(r,p){if(1&r&&c.Gf(h,5),2&r){let C;c.iGM(C=c.CRH())&&(p.header=C.first)}},features:[c.qOj],decls:0,vars:0,template:function(r,p){},encapsulation:2}),u})()},48469:(y,v,e)=>{e.r(v),e.d(v,{NotificationsComponent:()=>Q});var o=e(36895),c=e(24006),h=e(95133),f=e(54463),u=e(24499),l=e(55502),r=e(1241),p=e(21639),C=e(44466),t=e(94650),O=e(81212),P=e(93132),s=e(70957),x=e(49127),g=e(90147),w=e(71832),M=e(15861),T=e(82722),b=e(49808),A=e(5963),Y=e(5565),L=e(7228),E=e(21801),Z=e(13746);function D(a,_){if(1&a){const i=t.EpF();t.TgZ(0,"app-notification-item",9),t.NdJ("click",function(){const d=t.CHM(i).$implicit,N=t.oxw(2);return t.KtG(N.onAction(d))}),t.qZA()}2&a&&t.Q6J("notification",_.$implicit)}function I(a,_){if(1&a&&(t.ynx(0),t.YNc(1,D,1,1,"app-notification-item",8),t.BQk()),2&a){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.notifications)}}function U(a,_){if(1&a&&(t.TgZ(0,"div",10),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a){const i=t.oxw();t.Q6J("ngClass",i.notifications.length?"py-6":"mt-28"),t.xp6(1),t.hij(" ",t.lcZ(2,2,i.notifications.length?"no-more-notifications":"no-notifications")," ")}}function S(a,_){1&a&&t._UZ(0,"app-loading-animation",11)}let F=(()=>{class a extends Y.V{constructor(i,n){super(),this.notificationService=i,this.cdr=n,this.selectedFilter=l.E.All,this.onUserAction=new t.vpe,this.unreadCount=0,this.notifications=[],this.isOpenNotificationDetailModal=!1,this.selectedNotification=null,this.isLoading=!0,this.totalNotifications=0,this.notificationParams={rows:20,page:0,status:l.E.All},this.clientId="",this.token=null}ngOnInit(){var i=this;return(0,M.Z)(function*(){i.notificationService.count$.pipe((0,T.R)(i.destroyStream$)).subscribe(n=>{i.unreadCount=n}),i.notificationService.readAll$.pipe((0,T.R)(i.destroyStream$)).subscribe(()=>{i.initContent()})})()}ngAfterViewInit(){this.notificationParams.status=this.selectedFilter,this.initContent()}ngOnChanges(i){i.selectedFilter&&i.selectedFilter.currentValue!=this.notificationParams.status&&this.initContent()}initContent(){var i=this;return(0,M.Z)(function*(){if(i.isLoading=!0,i.notifications=[],i.notificationParams={rows:20,page:0,status:i.selectedFilter},yield i.getNotifications(),i.pageContainer){let n=yield i.hasScrollbar();for(;!n&&!i.allNotificationsLoaded&&i.notificationParams.page<3;)yield i.getNotifications(),yield(0,b.n)((0,A.H)(100)),n=yield i.hasScrollbar()}})()}get allNotificationsLoaded(){return this.totalNotifications<=this.notifications.length}hasScrollbar(){var i=this;return(0,M.Z)(function*(){const n=yield i.pageContainer.getScrollElement();return n.scrollHeight>n.clientHeight})()}onAction(i){i.isRead||this.notificationService.markAsRead(i.id).then(()=>{this.selectedFilter===l.E.Unread?this.initContent():i.isRead=!0}),this.selectedNotification=i,this.isOpenNotificationDetailModal=!0}getNotifications(i=null){var n=this;return(0,M.Z)(function*(){const m=yield(0,b.n)(n.notificationService.getNotifications(n.notificationParams));if(i&&i.complete(),m?.data){const d=m.data.rows;n.notifications=n.notificationParams.page?[...n.notifications,...d]:d,n.cdr.detectChanges(),0==n.notificationParams.page&&(n.totalNotifications=m.data.total),n.notificationParams.page+=1}n.isLoading=!1})()}loadMore(i){var n=this;return(0,M.Z)(function*(){yield n.getNotifications(i.target),i.state="closed"})()}seeAll(){this.onUserAction.emit(!0)}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(P.g),t.Y36(t.sBO))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-notification-list"]],inputs:{selectedFilter:"selectedFilter",pageContainer:"pageContainer"},outputs:{onUserAction:"onUserAction"},features:[t.qOj,t.TTD],decls:8,vars:6,consts:[[1,"flex","flex-col","h-full"],[1,"flex","flex-col","flex-auto","w-full","border-t"],[4,"ngIf"],["class","w-full text-center text-gray-500 text-base font-medium no-notifications",3,"ngClass",4,"ngIf"],["class","mx-auto mt-5 block w-fit",4,"ngIf"],["threshold","0","position","bottom",3,"disabled","ionInfinite"],[1,"pt-2"],[3,"isOpen","notification","isOpenChange","onUserAction"],[3,"notification","click",4,"ngFor","ngForOf"],[3,"notification","click"],[1,"w-full","text-center","text-gray-500","text-base","font-medium","no-notifications",3,"ngClass"],[1,"mx-auto","mt-5","block","w-fit"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,I,2,1,"ng-container",2),t.YNc(3,U,3,4,"div",3),t.YNc(4,S,1,0,"app-loading-animation",4),t.TgZ(5,"ion-infinite-scroll",5),t.NdJ("ionInfinite",function(d){return n.loadMore(d)}),t._UZ(6,"ion-infinite-scroll-content",6),t.qZA()()(),t.TgZ(7,"app-notification-detail-modal",7),t.NdJ("isOpenChange",function(d){return n.isOpenNotificationDetailModal=d})("onUserAction",function(){return n.onUserAction.emit(!0)}),t.qZA()),2&i&&(t.xp6(2),t.Q6J("ngIf",n.notifications.length>0),t.xp6(1),t.Q6J("ngIf",!n.isLoading&&n.allNotificationsLoaded),t.xp6(1),t.Q6J("ngIf",n.isLoading&&0===n.notificationParams.page),t.xp6(1),t.Q6J("disabled",n.allNotificationsLoaded),t.xp6(2),t.Q6J("isOpen",n.isOpenNotificationDetailModal)("notification",n.selectedNotification))},dependencies:[o.mk,o.sg,o.O5,h.ju,h.MB,L.r,E.r,Z.X,f.X$]}),a})();var B=e(85470),j=e(93774);function J(a,_){if(1&a&&(t.TgZ(0,"div",19),t._uU(1),t.qZA()),2&a){const i=t.oxw().ngLet;t.xp6(1),t.hij(" ",i>99?"99+":i," ")}}function R(a,_){if(1&a){const i=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(i);const m=t.oxw(),d=t.MAs(1);return m.selectedFilter=m.notificationStatus.Unread,t.KtG(d.scrollToTop())}),t._uU(1),t.ALo(2,"translate"),t.YNc(3,J,2,1,"div",18),t.qZA()}if(2&a){const i=_.ngLet,n=t.oxw();t.ekj("active",n.selectedFilter===n.notificationStatus.Unread),t.xp6(1),t.hij(" ",t.lcZ(2,4,"unread")," "),t.xp6(2),t.Q6J("ngIf",i>0)}}let Q=(()=>{class a extends u.c{constructor(i,n,m,d,N){super(i,n),this.route=m,this.notificationService=d,this.router=N,this.selectedFilter=l.E.All,this.notificationStatus=l.E}ngOnInit(){this.originUrl=this.route.snapshot.queryParamMap.get("originUrl")}handleBack(){this.router.navigateByUrl(this.originUrl??"/")}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(O.gz),t.Y36(P.g),t.Y36(O.F0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-notifications"]],standalone:!0,features:[t.qOj,t.jDz],decls:24,vars:17,consts:[["scrollTop","","fullscreen","true","scrollEvents","true",3,"ionScroll"],["ionContent",""],["appOverflowVisible","",1,"sticky","top-0","shadow-lg","z-50"],["header",""],[3,"hidePageName","hideLogo","hideCart","hideSearch"],[1,"grey-bg","pt-4"],[1,"tyqoon-container","px-2","md:px-0","h-full","flex","flex-col"],[1,"hidden","md:flex","flex-auto","items-center","w-full","py-3","pt-4","top-0"],[1,"cursor-pointer","w-8","h-8","ml-2",3,"click"],["name","chevron-back-outline",1,"w-8","h-8"],[1,"text-3xl","font-medium"],[1,"flex","flex-col","sm:flex-row","gap-4","sm:gap-0","sm:px-4","pb-2","justify-between"],[1,"flex","text-xl"],[1,"filter-item","px-3","py-1.5","rounded-lg","font-medium",3,"click"],["class","filter-item px-3 py-1.5 rounded-lg font-medium flex items-center gap-1",3,"active","click",4,"ngLet"],[1,"flex","flex-col","h-full","sm:px-4"],[3,"pageContainer","selectedFilter"],[1,"filter-item","px-3","py-1.5","rounded-lg","font-medium","flex","items-center","gap-1",3,"click"],["class","text-white unread-notification flex items-center justify-center rounded-full h-6 px-1 text-base ml-2",4,"ngIf"],[1,"text-white","unread-notification","flex","items-center","justify-center","rounded-full","h-6","px-1","text-base","ml-2"]],template:function(i,n){if(1&i){const m=t.EpF();t.TgZ(0,"ion-content",0,1),t.NdJ("ionScroll",function(N){return n.onContentScroll(N)}),t.TgZ(2,"ion-toolbar",2,3),t._UZ(4,"app-top-navbar",4)(5,"app-top-menu"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"a",8),t.NdJ("click",function(){return n.handleBack()}),t._UZ(10,"ion-icon",9),t.qZA(),t.TgZ(11,"h1",10),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",11)(15,"div",12)(16,"button",13),t.NdJ("click",function(){t.CHM(m);const N=t.MAs(1);return n.selectedFilter=n.notificationStatus.All,t.KtG(N.scrollToTop())}),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.YNc(19,R,4,6,"button",14),t.ALo(20,"async"),t.qZA()(),t.TgZ(21,"div",15),t._UZ(22,"app-notification-list",16),t.qZA()()(),t._UZ(23,"app-new-year-dragons"),t.qZA()}if(2&i){const m=t.MAs(1);let d;t.xp6(4),t.Q6J("hidePageName",!1)("hideLogo",!0)("hideCart",!0)("hideSearch",!0),t.xp6(8),t.hij(" ",t.lcZ(13,11,"notifications")," "),t.xp6(4),t.ekj("active",n.selectedFilter===n.notificationStatus.All),t.xp6(1),t.hij(" ",t.lcZ(18,13,"all")," "),t.xp6(2),t.Q6J("ngLet",null!==(d=t.lcZ(20,15,n.notificationService.count$))&&void 0!==d?d:0),t.xp6(3),t.Q6J("pageContainer",m)("selectedFilter",n.selectedFilter)}},dependencies:[o.ez,o.O5,o.Ov,h.Pc,h.W2,h.gu,h.sr,f.aw,f.X$,C.m,s.V,x.H,g.h,w.Y,p.F,F,r.x,B.p,j.z,c.u5],styles:[".unread-notification[_ngcontent-%COMP%]{background-color:#ff0242;min-width:1.5rem;font-size:15px}ion-toolbar[appOverflowVisible][_ngcontent-%COMP%]{contain:none}.filter-item.active[_ngcontent-%COMP%]{background-color:#fff0e9;color:#ff7e18;border-color:#ff7e18}.filter-item[_ngcontent-%COMP%]:focus-visible{outline:0}.notifications-search[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--placeholder-opacity: 1;--placeholder-font-weight: 500;--placeholder-color: #999;--padding-start: 6px;--color: #555}@media (min-width: 640px){.notifications-search[_ngcontent-%COMP%]{min-width:248px}}app-top-navbar[_ngcontent-%COMP%]     app-notification-indicator{display:none}@media (min-width: 768px){app-top-navbar[_ngcontent-%COMP%]     app-notification-indicator{display:block}app-notification-list[_ngcontent-%COMP%]     .notification .notification-img{height:5rem;width:5rem}app-notification-list[_ngcontent-%COMP%]     .notification .notification-text{font-size:1.125rem!important;line-height:1.75rem!important}app-notification-list[_ngcontent-%COMP%]     .notification .notification-type{font-size:1.125rem;line-height:1.75rem}app-notification-list[_ngcontent-%COMP%]     .notification .notification-time{font-size:1rem;line-height:1.5rem}}"]}),a})()},71832:(y,v,e)=>{e.d(v,{Y:()=>P});var o=e(94650),c=e(56889),h=e(6074),f=e(36895);function u(s,x){1&s&&o._UZ(0,"img",6)}function l(s,x){1&s&&o._UZ(0,"img",7)}function r(s,x){if(1&s&&(o.ynx(0),o.YNc(1,u,1,0,"img",4),o.YNc(2,l,1,0,"img",5),o.BQk()),2&s){const g=o.oxw(2);o.xp6(1),o.Q6J("ngIf",g.showLeft),o.xp6(1),o.Q6J("ngIf",g.showRight)}}function p(s,x){1&s&&o._UZ(0,"img",10)}function C(s,x){1&s&&o._UZ(0,"img",11)}function t(s,x){if(1&s&&(o.YNc(0,p,1,0,"img",8),o.YNc(1,C,1,0,"img",9)),2&s){const g=o.oxw(2);o.Q6J("ngIf",g.showLeft),o.xp6(1),o.Q6J("ngIf",g.showRight)}}function O(s,x){if(1&s&&(o.TgZ(0,"div",1),o.YNc(1,r,3,2,"ng-container",2),o.ALo(2,"async"),o.YNc(3,t,2,2,"ng-template",null,3,o.W1O),o.qZA()),2&s){const g=o.MAs(4),w=o.oxw();o.xp6(1),o.Q6J("ngIf",o.lcZ(2,2,w.biddingService.isBiddingMode$))("ngIfElse",g)}}let P=(()=>{class s{constructor(g,w){this.biddingService=g,this.themeService=w,this.showLeft=!0,this.showRight=!0}}return s.\u0275fac=function(g){return new(g||s)(o.Y36(c.g),o.Y36(h.f))},s.\u0275cmp=o.Xpm({type:s,selectors:[["app-new-year-dragons"]],inputs:{showLeft:"showLeft",showRight:"showRight"},decls:1,vars:1,consts:[["class","flex w-full justify-between z-100",4,"ngIf"],[1,"flex","w-full","justify-between","z-100"],[4,"ngIf","ngIfElse"],["shoppingMode",""],["class","left bidding hidden xl:block absolute h-auto dragon-jumping","src","/assets/images/new-year/Mascot-CNY-2024-1.png","alt","Bidding",4,"ngIf"],["class","right bidding hidden xl:block absolute h-auto dragon-scaling","style","--distance: 2px","src","/assets/images/new-year/Mascot-CNY-2024-2.png","alt","Bidding",4,"ngIf"],["src","/assets/images/new-year/Mascot-CNY-2024-1.png","alt","Bidding",1,"left","bidding","hidden","xl:block","absolute","h-auto","dragon-jumping"],["src","/assets/images/new-year/Mascot-CNY-2024-2.png","alt","Bidding",1,"right","bidding","hidden","xl:block","absolute","h-auto","dragon-scaling",2,"--distance","2px"],["class","left shopping hidden xl:block absolute h-auto dragon-scaling","style","--distance: -2px","src","/assets/images/new-year/Mascot-CNY-2024-3.png","alt","Bidding",4,"ngIf"],["class","right shopping hidden xl:block absolute h-auto dragon-jumping","src","/assets/images/new-year/Mascot-CNY-2024-4.png","alt","Bidding",4,"ngIf"],["src","/assets/images/new-year/Mascot-CNY-2024-3.png","alt","Bidding",1,"left","shopping","hidden","xl:block","absolute","h-auto","dragon-scaling",2,"--distance","-2px"],["src","/assets/images/new-year/Mascot-CNY-2024-4.png","alt","Bidding",1,"right","shopping","hidden","xl:block","absolute","h-auto","dragon-jumping"]],template:function(g,w){1&g&&o.YNc(0,O,5,4,"div",0),2&g&&o.Q6J("ngIf",w.themeService.isNewYearMode)},dependencies:[f.O5,f.Ov],styles:["[_nghost-%COMP%]{pointer-events:none;-webkit-user-select:none;user-select:none;z-index:1;position:absolute;top:140px;width:100%;max-width:2000px;margin:auto;left:0;right:0;min-height:calc(100vh - 140px)}.shopping.left[_ngcontent-%COMP%]{max-width:350px;bottom:13%}@media (min-width: 1280px){.shopping.left[_ngcontent-%COMP%]{width:calc(50vw - 545px);margin-left:-12px}}@media (min-width: 1440px){.shopping.left[_ngcontent-%COMP%]{width:calc(50vw - 615px);margin-left:-40px}}.shopping.right[_ngcontent-%COMP%]{max-width:330px;top:0;right:0}@media (min-width: 1280px){.shopping.right[_ngcontent-%COMP%]{width:calc(50vw - 545px);margin-right:-12px}}@media (min-width: 1440px){.shopping.right[_ngcontent-%COMP%]{width:calc(50vw - 620px);margin-right:-35px}}.bidding.left[_ngcontent-%COMP%]{max-width:370px;top:5px}@media (min-width: 1280px){.bidding.left[_ngcontent-%COMP%]{width:calc(50vw - 528px);margin-left:-30px}}@media (min-width: 1440px){.bidding.left[_ngcontent-%COMP%]{width:calc(50vw - 595px);margin-left:-65px}}.bidding.right[_ngcontent-%COMP%]{max-width:340px;bottom:3%;right:0}@media (min-width: 1280px){.bidding.right[_ngcontent-%COMP%]{width:calc(50vw - 545px);margin-right:-12px}}@media (min-width: 1440px){.bidding.right[_ngcontent-%COMP%]{width:calc(50vw - 625px);margin-right:-40px}}.dragon-jumping[_ngcontent-%COMP%]{animation:3s dragon-jumping 2s linear forwards infinite}@keyframes dragon-jumping{0%{transform:translateY(0)}25%{transform:translateY(-10px)}50%{transform:translateY(0)}to{transform:translateY(0)}}.dragon-scaling[_ngcontent-%COMP%]{animation:6s dragon-scaling 4s linear forwards infinite}@keyframes dragon-scaling{0%{transform:scale(1)}15%{transform:scale(1.05) translateY(-3px) translate(var(--distance))}30%{transform:scale(1)}to{transform:scale(1)}}"]}),s})()},49127:(y,v,e)=>{e.d(v,{H:()=>h});var o=e(24837),c=e(94650);let h=(()=>{class f{constructor(l){this.toolbar=l.nativeElement}ngAfterViewInit(){if(o.Z.isServer)return;const l=setInterval(()=>{if(this.toolbar.shadowRoot){let r=this.toolbar.shadowRoot.querySelector(".toolbar-container");r&&(r.style.contain="none",r.style.overflow="visible",clearInterval(l))}},500)}}return f.\u0275fac=function(l){return new(l||f)(c.Y36(c.SBq))},f.\u0275dir=c.lG2({type:f,selectors:[["","appOverflowVisible",""]]}),f})()},70957:(y,v,e)=>{e.d(v,{V:()=>u});var o=e(36895),c=e(94650),h=e(81212),f=e(95133);let u=(()=>{class l{constructor(p,C,t){this.content=p,this.router=C,this.platformId=t,(0,o.NF)(this.platformId)&&(this.subscription=this.router.events.subscribe(O=>{O instanceof h.m2&&this.content.scrollToTop(500)}))}ngOnDestroy(){this.subscription?.unsubscribe()}}return l.\u0275fac=function(p){return new(p||l)(c.Y36(f.W2),c.Y36(h.F0),c.Y36(c.Lbi))},l.\u0275dir=c.lG2({type:l,selectors:[["","scrollTop",""]]}),l})()}}]);