"use strict";(self.webpackChunkangular_tyqoon_client=self.webpackChunkangular_tyqoon_client||[]).push([[689],{85898:(O,C,o)=>{o.d(C,{b:()=>L});var c=o(15861),y=o(77579),p=o(82722),f=o(59468),t=o(49808),d=o(24837),M=o(95133),u=o(54463),h=o(36895),v=o(44466),w=o(59809),R=o(5565),I=o(18110),a=o(94650),A=o(35482),P=o(94830),S=o(23284);function D(m,x){1&m&&a._UZ(0,"app-product-card",3),2&m&&a.Q6J("product",x.$implicit)}function T(m,x){1&m&&a._UZ(0,"app-product-card-skeleton",5)}const Z=function(){return[]};function B(m,x){if(1&m&&(a.ynx(0),a.YNc(1,T,1,0,"app-product-card-skeleton",4),a.BQk()),2&m){const r=a.oxw();a.xp6(1),a.Q6J("ngForOf",a.DdM(2,Z).constructor(r.pageSize).fill(1))("ngForTrackBy",r.trackByFn2)}}let L=(()=>{class m extends R.V{constructor(r,g,E){super(),this.productService=r,this.userService=g,this.cdr=E,this.pageSize=20,this.offsetScroll=2e3,this.additionalParams={},this.isSSR=!1,this.throttleScroll=new y.x,this.page=-1,this.isLoading=!1,this.total=0,this.products=[]}ngOnInit(){!this.isSSR&&d.Z.isServer?this.isLoading=!0:this.fetchData()}ngAfterViewInit(){var r=this;return(0,c.Z)(function*(){d.Z.isServer||r.scrollContainer&&(r.scrollElement=yield r.scrollContainer.getScrollElement(),r.scrollContainer.ionScroll.pipe((0,p.R)(r.destroyStream$)).subscribe(g=>{r.scrollElement.scrollHeight-g.detail.scrollTop<r.offsetScroll&&r.throttleScroll.next(1)}),r.throttleScroll.pipe((0,f.p)(300),(0,p.R)(r.destroyStream$)).subscribe(()=>{r.fetchData()}))})()}fetchData(){var r=this;return(0,c.Z)(function*(){if(!r.isLoading&&(-1===r.page||r.products.length<r.total)){r.isLoading=!0,r.page++,r.cdr.markForCheck();const g=yield(0,t.n)(r.productService.getProductsByMetaParamsV2({page:r.page,rows:r.pageSize,traceId:r.userService.traceId,isRecommended:!0,...r.additionalParams}));r.products=[...r.products,...g.rows||[]],r.products=(0,I.DI)(r.products),r.total=g.total,r.isLoading=!1,r.cdr.markForCheck()}})()}clear(){this.page=-1,this.isLoading=!1,this.total=0,this.products=[]}trackByFn(r,g){return g.id}trackByFn2(r){return r}}return m.\u0275fac=function(r){return new(r||m)(a.Y36(A.s),a.Y36(P.K),a.Y36(a.sBO))},m.\u0275cmp=a.Xpm({type:m,selectors:[["app-products-infinite-scroll"]],inputs:{pageSize:"pageSize",scrollContainer:"scrollContainer",offsetScroll:"offsetScroll",additionalParams:"additionalParams",isSSR:"isSSR"},standalone:!0,features:[a.qOj,a.jDz],decls:4,vars:3,consts:[[1,"flex","flex-wrap","-mx-1"],["class","px-1 flex-shrink-0 mb-6 flex justify-center",3,"product",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"px-1","flex-shrink-0","mb-6","flex","justify-center",3,"product"],["class","px-1 flex-shrink-0 mb-6 flex justify-center",4,"ngFor","ngForOf","ngForTrackBy"],[1,"px-1","flex-shrink-0","mb-6","flex","justify-center"]],template:function(r,g){1&r&&(a.TgZ(0,"div")(1,"div",0),a.YNc(2,D,1,1,"app-product-card",1),a.YNc(3,B,2,3,"ng-container",2),a.qZA()()),2&r&&(a.xp6(2),a.Q6J("ngForOf",g.products)("ngForTrackBy",g.trackByFn),a.xp6(1),a.Q6J("ngIf",g.isLoading))},dependencies:[u.aw,h.ez,h.sg,h.O5,M.Pc,v.m,S.Y,w.I],styles:["app-product-card[_ngcontent-%COMP%], app-product-card-skeleton[_ngcontent-%COMP%]{width:50%}@media (min-width: 340px){app-product-card[_ngcontent-%COMP%], app-product-card-skeleton[_ngcontent-%COMP%]{width:33.3333333333%}}@media (min-width: 640px){app-product-card[_ngcontent-%COMP%], app-product-card-skeleton[_ngcontent-%COMP%]{width:25%}}@media (min-width: 768px){app-product-card[_ngcontent-%COMP%], app-product-card-skeleton[_ngcontent-%COMP%]{width:20%}}@media (min-width: 1024px){app-product-card[_ngcontent-%COMP%], app-product-card-skeleton[_ngcontent-%COMP%]{width:16.6666666667%}}"],changeDetection:0}),m})()},65509:(O,C,o)=>{o.r(C),o.d(C,{MartModule:()=>J});var c=o(36895),y=o(7507),p=o(24499);const f=[{name:"mart-fresh-groceries",icon:"/assets/images/mart-fresh-groceries.png",activityId:"70833251"},{name:"category-beautiy-health",icon:"/assets/images/mart-category-beauty-min.png",activityId:"49845326"},{name:"category-FOOD-&-DINING",icon:"/assets/images/mart-category-food-min.png",activityId:"49846331"},{name:"mart-health-wellness",icon:"/assets/images/mart-category-health-min.png",activityId:"49846966"},{name:"mart-home-living",icon:"/assets/images/mart-category-home-living-min.png",activityId:"49847602"},{name:"mart-kids-babies",icon:"/assets/images/mart-category-kids-min.png",activityId:"49848814"}];var t=o(94650),d=o(95133),M=o(85898),u=o(52313),h=o(46032),v=o(5068),w=o(49127),R=o(45210),I=o(18215),a=o(54463);const A=function(n){return{activityId:n}};let P=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mart-category"]],inputs:{martCategory:"martCategory"},decls:6,vars:9,consts:[[1,"mart-category","flex","flex-col","items-center","justify-center","mx-2",3,"routerLink","queryParams"],[1,"mart-category__icon","rounded-full","mb-2"],[3,"src","alt"],[1,"mart-category__name","text-white","text-center"]],template:function(e,i){1&e&&(t.TgZ(0,"a",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"p",3),t._uU(4),t.ALo(5,"translate"),t.qZA()()),2&e&&(t.Q6J("routerLink","/product/search")("queryParams",t.VKq(7,A,i.martCategory.activityId)),t.xp6(2),t.Q6J("src",i.martCategory.icon,t.LSH)("alt",i.martCategory.name),t.xp6(2),t.hij(" ",t.lcZ(5,5,i.martCategory.name)," "))},dependencies:[y.yS,d.Fo,a.X$],styles:[".mart-category__icon[_ngcontent-%COMP%]{width:67px;height:67px;box-shadow:0 4px 16px #4a4af8}@media (min-width: 1024px){.mart-category__icon[_ngcontent-%COMP%]{width:77px;height:77px}}.mart-category__name[_ngcontent-%COMP%]{width:67px;font-size:11px;line-height:1.25}@media (min-width: 1024px){.mart-category__name[_ngcontent-%COMP%]{width:77px;font-size:12.5px}}"]}),n})();var S=o(24837),D=o(54968),T=o(99485);const Z=["swiper"];function B(n,l){if(1&n&&t._UZ(0,"app-mart-category",6),2&n){const e=t.oxw().$implicit;t.Q6J("martCategory",e)}}function L(n,l){1&n&&t.YNc(0,B,1,1,"ng-template",5)}const m=function(n){return{"is-swiping":n}};function x(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"div",1),t.NdJ("touchstart",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleElementTouch())}),t.TgZ(1,"swiper",2,3),t.NdJ("init",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleInit())})("breakpoint",function(s){t.CHM(e);const _=t.oxw();return t.KtG(_.handleBreakPointChange(s))})("mouseenter",function(s){t.CHM(e);const _=t.oxw();return t.KtG(_.handleMouseEnter(s))})("mouseleave",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleMouseLeave())})("touchEnd",function(s){t.CHM(e);const _=t.oxw();return t.KtG(_.handleTouchEnd(s))})("transitionEnd",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleTransitionEnd())}),t.YNc(3,L,1,0,null,4),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,m,e.isSwiping))("config",e.slideOpts),t.xp6(2),t.Q6J("ngForOf",e.categories)}}let r=(()=>{class n{constructor(){this.categories=f,this.isInitalize=!1,this.slideOpts={speed:2e4,freeMode:!0,loop:!0,autoplay:!1,slidesPerView:"auto",breakpoints:{340:{speed:2e4},640:{speed:2e4}}},this.oneRoundWidth=0,this.isSwiping=!1,this.isMouseEnter=!1,this.handleTransitionEnd=()=>{if(this.isInitalize&&!this.isSwiping&&!this.isMouseEnter){const e=this.categorySwiper?.swiperRef,i=e?.getTranslate();i===this.end1RoundPosition?setTimeout(()=>{e?.translateTo(this.initPosition,0,!0,!1)},0):(i<this.end1RoundPosition&&e?.translateTo(this.initPosition+(i-this.end1RoundPosition),0,!1,!1),setTimeout(()=>{e?.translateTo(this.end1RoundPosition,Math.abs(this.end1RoundPosition-e.getTranslate())/this.oneRoundWidth*this.speed1Round,!0,!1)},0))}}}ngOnInit(){}ngOnDestroy(){this.subscription?.unsubscribe()}handleInit(){S.Z.isServer||this.setTranslate()}handleMouseEnter(e){this.isMouseEnter=!0;const i=this.categorySwiper?.swiperRef,s=i?.getTranslate();i?.translateTo(s-10,0,!1,!1)}handleElementTouch(){const e=this.categorySwiper?.swiperRef;this.isMouseEnter=!0;const i=e?.getTranslate();e?.translateTo(i-10,0,!1,!1)}handleTouchStart([e,i]){this.isSwiping=!0}handleTouchEnd([e,i]){this.isSwiping=!1,"mouse"!==i.pointerType&&(this.isMouseEnter=!1);const s=this.categorySwiper?.swiperRef;s&&setTimeout(()=>{const _=s.getTranslate();s.translateTo(_>=this.end1RoundPosition?_:this.initPosition+(_-this.end1RoundPosition),0,!1,!1)},0),setTimeout(()=>{this.resumeSlide()},10)}handleMouseLeave(){this.isMouseEnter=!1,setTimeout(()=>{this.resumeSlide()},10)}resumeSlide(){if(!this.isSwiping&&!this.isMouseEnter){const e=this.categorySwiper?.swiperRef;if(e){const i=e.getTranslate();i>=this.end1RoundPosition||e?.translateTo(this.initPosition+(i-this.end1RoundPosition),0,!1,!1),e.translateTo(this.end1RoundPosition,Math.abs(this.end1RoundPosition-i)/this.oneRoundWidth*this.speed1Round,!0,!1)}}}setTranslate(){setTimeout(()=>{const e=this.categorySwiper?.swiperRef;if(e){const i=e.wrapperEl.querySelector(".swiper-slide");this.oneRoundWidth=(i?.clientWidth||0)*this.categories.length,e.translateTo(this.end1RoundPosition,this.speed1Round,!0,!1),this.isInitalize=!0,this.subscription=(0,D.R)(e.wrapperEl,"transitionend").subscribe(this.handleTransitionEnd)}},2e3)}get speed1Round(){const e=this.categorySwiper?.swiperRef;return e?.params.breakpoints?.[e.currentBreakpoint]?.speed||e?.params.speed||0}get initPosition(){return-this.oneRoundWidth}get end1RoundPosition(){return 2*this.initPosition}handleBreakPointChange([e,i]){setTimeout(()=>{const _=this.categorySwiper?.swiperRef?.wrapperEl.querySelector(".swiper-slide");this.oneRoundWidth=(_?.clientWidth||0)*this.categories.length},100)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mart-category-slider"]],viewQuery:function(e,i){if(1&e&&t.Gf(Z,5),2&e){let s;t.iGM(s=t.CRH())&&(i.categorySwiper=s.first)}},decls:1,vars:1,consts:[[3,"touchstart",4,"ngIf"],[3,"touchstart"],[1,"category-swiper",3,"ngClass","config","init","breakpoint","mouseenter","mouseleave","touchEnd","transitionEnd"],["swiper",""],[4,"ngFor","ngForOf"],["swiperSlide",""],[1,"w-full","h-full",3,"martCategory"]],template:function(e,i){1&e&&t.YNc(0,x,4,5,"div",0),2&e&&t.Q6J("ngIf",i.categories)},dependencies:[c.mk,c.sg,c.O5,T.nF,T.YC,P],styles:["swiper[_ngcontent-%COMP%]:not(.is-swiping)     .swiper-wrapper{transition-timing-function:linear!important}swiper[_ngcontent-%COMP%]     .swiper-wrapper{margin-left:-.25rem;margin-right:-.25rem}swiper[_ngcontent-%COMP%]     .swiper-slide{width:87px;padding:8px 4px 0;flex-shrink:0}@media (min-width: 1024px){swiper[_ngcontent-%COMP%]     .swiper-slide{width:97px}}"]}),n})();function g(n,l){1&n&&t._UZ(0,"app-mart-category",8),2&n&&t.Q6J("martCategory",l.$implicit)}let E=(()=>{class n{constructor(e){this.translateService=e,this.categories=f}ngOnInit(){}getTyqoonMartImageSm(){return"cn"===this.translateService.currentLang?"assets/images/tyqoon-mart-cn.png":"assets/images/tyqoon-mart.png"}getTyqoonMartImageLg(){switch(this.translateService.currentLang){case"cn":case"tr":return"assets/images/Tyqoon-mart-logo-cnv2-720px.png";default:return"assets/images/Tyqoon-mart-logo-720px-min.png"}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mart-banner"]],decls:9,vars:3,consts:[[1,"mart-banner","w-full"],[1,"tyqoon-container","flex","flex-col","md:flex-row","md:items-center","py-6"],[1,"mart-logo","mb-4","md:mb-0"],["alt","Tyqoon mart mobile logo",1,"sm:hidden","h-full","object-contain",3,"src"],["alt","Tyqoon mart mobile logo",1,"hidden","sm:flex","h-full","object-contain",3,"src"],[1,"hidden","md:flex","flex-auto","justify-center","ml-4"],["class","h-full",3,"martCategory",4,"ngFor","ngForOf"],[1,"flex","md:hidden"],[1,"h-full",3,"martCategory"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3)(4,"img",4),t.qZA(),t.TgZ(5,"div",5),t.YNc(6,g,1,1,"app-mart-category",6),t.qZA(),t.TgZ(7,"div",7),t._UZ(8,"app-mart-category-slider"),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("src",i.getTyqoonMartImageSm(),t.LSH),t.xp6(1),t.Q6J("src",i.getTyqoonMartImageLg(),t.LSH),t.xp6(2),t.Q6J("ngForOf",i.categories))},dependencies:[c.sg,P,r],styles:[".mart-banner[_ngcontent-%COMP%]{background-image:linear-gradient(to right,#0189ff,#013dff)}.mart-banner[_ngcontent-%COMP%]   .mart-logo[_ngcontent-%COMP%]{height:118px}@media (min-width: 640px){.mart-banner[_ngcontent-%COMP%]   .mart-logo[_ngcontent-%COMP%]{height:136px}}@media (min-width: 768px){.mart-banner[_ngcontent-%COMP%]   .mart-logo[_ngcontent-%COMP%]{height:236px}}"]}),n})();const U=function(n){return{isRecommended:!1,activityId:n}},F=[{path:"",component:(()=>{class n extends p.c{constructor(e,i){super(e,i),this.categories=f,this.defaultCategory=f[0].activityId}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.Qsj))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mart"]],features:[t.qOj],decls:12,vars:6,consts:[["fullscreen","true","scrollEvents","true","backToTopBtn","",3,"ionScroll"],["ionContent",""],["appOverflowVisible","",1,"sticky","top-0","shadow-lg","z-50"],["header",""],[3,"forceFullWidthSearch"],[1,"tyqoon-container","min-h-[50vh]","mt-4"],[3,"additionalParams","scrollContainer","isSSR"],[1,"mt-4","md:hidden"]],template:function(e,i){if(1&e&&(t.TgZ(0,"ion-content",0,1),t.NdJ("ionScroll",function(_){return i.onContentScroll(_)}),t._UZ(2,"app-global-customer-service"),t.TgZ(3,"ion-toolbar",2,3),t._UZ(5,"app-top-navbar",4)(6,"app-top-menu"),t.qZA(),t._UZ(7,"app-mart-banner"),t.TgZ(8,"div",5),t._UZ(9,"app-products-infinite-scroll",6),t.qZA()(),t.TgZ(10,"ion-footer",7),t._UZ(11,"app-bottom-navbar"),t.qZA()),2&e){const s=t.MAs(1);t.xp6(5),t.Q6J("forceFullWidthSearch",!0),t.xp6(4),t.Q6J("additionalParams",t.VKq(4,U,i.defaultCategory))("scrollContainer",s)("isSSR",!0)}},dependencies:[d.W2,d.fr,d.sr,M.b,u.p,h.K,v.z,w.H,R.B,I.Z,E]}),n})()}];let K=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[y.Bz.forChild(F),y.Bz]}),n})();var W=o(44466),b=o(1927);let J=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,K,d.Pc,a.aw,T.kz,M.b,W.m,b.n]}),n})()},59809:(O,C,o)=>{o.d(C,{I:()=>y});var c=o(94650);let y=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275cmp=c.Xpm({type:p,selectors:[["app-product-card-skeleton"]],standalone:!0,features:[c.jDz],decls:9,vars:0,consts:[[1,"cursor-pointer","flex","flex-col","w-full","max-w-[246px]","lg:max-w-[220px]","xl:max-w-[245px]"],[1,"relative","w-full","mb-2",2,"padding-top","100%"],[1,"absolute","inset-0","pulSate","rounded-lg"],[1,"product-title","truncate","mb-1","pulSate","text-sm",2,"letter-spacing","20px"],[1,"text-xs","leading-3","text-center","pulSate",2,"letter-spacing","20px"],[1,"text-base","text-center","pulSate",2,"letter-spacing","20px"]],template:function(t,d){1&t&&(c.TgZ(0,"div",0)(1,"div",1),c._UZ(2,"div",2),c.qZA(),c.TgZ(3,"p",3),c._uU(4," \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),c.qZA(),c.TgZ(5,"p",4),c._uU(6," \xa0\xa0 "),c.qZA(),c.TgZ(7,"p",5),c._uU(8," \xa0\xa0 "),c.qZA()())}}),p})()},1470:(O,C,o)=>{o.d(C,{P:()=>t});var c=o(36895),y=o(24837),p=o(94650);const f=["container"];let t=(()=>{class d{constructor(){this.text="",this.cssClass="",this.innerHtml=""}ngOnChanges(u){if(u.text.currentValue!==u.text.previousValue){if(this.innerHtml=u.text.currentValue.replace(/\S/g,"<span>$&</span>"),y.Z.isServer)return;setTimeout(()=>{this.div.nativeElement.querySelectorAll("span").forEach((h,v)=>{h.style.setProperty("--delay",.05*v+"s")})},100)}}}return d.\u0275fac=function(u){return new(u||d)},d.\u0275cmp=p.Xpm({type:d,selectors:[["app-text-jumping"]],viewQuery:function(u,h){if(1&u&&p.Gf(f,5),2&u){let v;p.iGM(v=p.CRH())&&(h.div=v.first)}},inputs:{text:"text",cssClass:"cssClass"},standalone:!0,features:[p.TTD,p.jDz],decls:2,vars:2,consts:[[3,"ngClass","innerHTML"],["container",""]],template:function(u,h){1&u&&p._UZ(0,"div",0,1),2&u&&p.Q6J("ngClass",h.cssClass)("innerHTML",h.innerHtml,p.oJD)},dependencies:[c.ez,c.mk],styles:["div[_ngcontent-%COMP%]     span{display:inline-block;animation:textjump 2s infinite;animation-timing-function:ease-in-out;animation-delay:var(--delay)}@keyframes textjump{0%,20%{transform:translateY(0)}10%{transform:translateY(-15%)}to{transform:translateY(0)}}"]}),d})()}}]);