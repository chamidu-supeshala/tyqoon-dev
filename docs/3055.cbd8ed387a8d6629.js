"use strict";(self.webpackChunkangular_tyqoon_client=self.webpackChunkangular_tyqoon_client||[]).push([[3055],{69158:(O,P,r)=>{r.d(P,{M:()=>m});var t=r(94650),d=r(36895),c=r(95133),u=r(7507),_=r(54463);const l=function(){return["/product","detail"]},M=function(s,p){return{id:s,poolId:p}};function f(s,p){if(1&s&&(t.TgZ(0,"a",1)(1,"div",2)(2,"div",3),t._UZ(3,"img",4),t.qZA(),t.TgZ(4,"div",5)(5,"div",6),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",7)(9,"div",8),t._UZ(10,"img",9)(11,"img",10),t.qZA(),t.TgZ(12,"div",11),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"span",12),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",13),t._UZ(19,"img",14),t.TgZ(20,"div",15),t._uU(21),t.qZA()()()()()),2&s){const a=t.oxw();t.Q6J("routerLink",t.DdM(14,l))("queryParams",t.WLB(15,M,a.winner.productId,a.winner.poolId)),t.xp6(3),t.Q6J("src",a.winner.productImage,t.LSH),t.xp6(3),t.hij(" ",t.lcZ(7,8,a.winner.productName)," "),t.xp6(4),t.Q6J("src",a.winner.winnerAvatar,t.LSH),t.xp6(3),t.hij(" ",t.lcZ(14,10,a.winner.winnerId)," "),t.xp6(3),t.Oqu(t.lcZ(17,12,"pool-winner")),t.xp6(5),t.hij(" ",a.winner.ticketId," ")}}let m=(()=>{class s{constructor(){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-bidding-winner-card"]],inputs:{winner:"winner"},decls:1,vars:1,consts:[["class","winner-card rounded-xl flex border border-slate-300 text-xs items-center cursor-pointer",3,"routerLink","queryParams",4,"ngIf"],[1,"winner-card","rounded-xl","flex","border","border-slate-300","text-xs","items-center","cursor-pointer",3,"routerLink","queryParams"],[1,"flex","gap-1","w-full"],[1,"product","ml-1.5","mr-1","rounded-xl"],[1,"object-cover","rounded-lg",3,"src"],[1,"winner-info","flex","flex-col","justify-start","items-start","gap-1"],[1,"product-name","font-medium","text-left","pr-1.5","mb-0.5"],[1,"font-medium","flex","flex-nowrap","items-center","mt-px"],[1,"relative"],[1,"object-cover","rounded-full","avatar",3,"src"],["src","assets/images/golden-crown-100px.png","srcset","assets/images/golden-crown-100px.png 1x, assets/images/golden-crown-250px.png 2x",1,"absolute","crown"],[1,"truncate","ml-1"],[1,"tag","capitalize",2,"--color","#FFDC3F"],[1,"font-medium","flex","flex-nowrap","items-center"],["src","assets/images/ticket.png",1,"ticket-image","object-cover"],[1,"ticket","truncate","text-left","ml-1"]],template:function(a,v){1&a&&t.YNc(0,f,22,18,"a",0),2&a&&t.Q6J("ngIf",v.winner)},dependencies:[d.O5,c.Fo,u.yS,_.X$],styles:['.winner-card[_ngcontent-%COMP%]{height:100px;background-color:#f5f8f9;color:#333}.winner-card[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:88px;width:88px!important;height:88px}.winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%], .winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .ticket-image[_ngcontent-%COMP%]{width:20px!important;height:20px;min-width:20px}.winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .ticket[_ngcontent-%COMP%]{width:130px}.winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:break-spaces}.winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .crown[_ngcontent-%COMP%]{top:-9px;width:13px;left:0;right:0;margin-left:auto;margin-right:auto}.winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{display:inline-block;z-index:1;text-align:center;color:#000;height:20px;position:relative;border-left:none;background-color:var(--color);min-width:50px;margin-left:12px;padding-left:6px;border-radius:0 4px 4px 0;font-size:14px;line-height:20px;padding-right:6px;transform:scale(.9)}.winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]:before{content:"";z-index:-1;position:absolute;top:3px;left:-7px;width:14px;height:14px;background-color:var(--color);border-right:none;border-top:none;transform:rotate(45deg)}']}),s})()},85898:(O,P,r)=>{r.d(P,{b:()=>R});var t=r(15861),d=r(77579),c=r(82722),u=r(59468),_=r(49808),l=r(24837),M=r(95133),f=r(54463),m=r(36895),s=r(44466),p=r(59809),a=r(5565),v=r(18110),E=r(7507),n=r(94650),C=r(35482),S=r(94830),D=r(56889),A=r(23284),T=r(90147);function L(i,g){if(1&i&&n._UZ(0,"app-product-card",6),2&i){const e=g.$implicit,o=n.oxw().ngLet,h=n.oxw().ngLet,x=n.oxw().ngLet;n.Q6J("product",e)("isBiddingMode",!!o)("canLaunchPool",!!x)("isLogin",!!h)}}function I(i,g){1&i&&n._UZ(0,"app-product-card-skeleton",8)}const b=function(){return[]};function w(i,g){if(1&i&&(n.ynx(0),n.YNc(1,I,1,0,"app-product-card-skeleton",7),n.BQk()),2&i){const e=n.oxw(4);n.xp6(1),n.Q6J("ngForOf",n.DdM(2,b).constructor(e.pageSize).fill(1))("ngForTrackBy",e.trackByFn2)}}function B(i,g){if(1&i&&(n.TgZ(0,"div",3),n.YNc(1,L,1,4,"app-product-card",4),n.YNc(2,w,2,3,"ng-container",5),n.qZA()),2&i){const e=n.oxw(3);n.xp6(1),n.Q6J("ngForOf",e.products)("ngForTrackBy",e.trackByFn),n.xp6(1),n.Q6J("ngIf",e.isLoading)}}function y(i,g){if(1&i&&(n.TgZ(0,"div"),n.YNc(1,B,3,3,"div",2),n.ALo(2,"async"),n.qZA()),2&i){const e=n.oxw(2);n.xp6(1),n.Q6J("ngLet",n.lcZ(2,1,e.biddingService.isBiddingMode$))}}function U(i,g){1&i&&(n.TgZ(0,"a",9),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&i&&(n.Q6J("routerLink","product/search"),n.xp6(1),n.hij(" ",n.lcZ(2,2,"see-more")," "))}function Z(i,g){if(1&i&&(n.ynx(0),n.YNc(1,y,3,3,"div",0),n.ALo(2,"async"),n.YNc(3,U,3,4,"a",1),n.BQk()),2&i){const e=n.oxw();n.xp6(1),n.Q6J("ngLet",n.lcZ(2,2,e.userService.userInfo$)),n.xp6(2),n.Q6J("ngIf",e.isBiddingMode)}}let R=(()=>{class i extends a.V{constructor(e,o,h,x){super(),this.productService=e,this.userService=o,this.biddingService=h,this.cdr=x,this.offsetScroll=2e3,this.additionalParams={},this.isSSR=!1,this.biddingProductsSortOrder=0,this.shoppingModePageSize=20,this.biddingModePageSize=18,this.throttleScroll=new d.x,this.pageSize=20,this.page=-1,this.isLoading=!1,this.total=0,this.products=[],this.isBiddingMode=!1,this.scrollActive$=new d.x}ngOnInit(){console.log(8787878,this.biddingProductsSortOrder),!this.isSSR&&l.Z.isServer?this.isLoading=!0:this.biddingService.isBiddingMode$.pipe((0,c.R)(this.destroyStream$)).subscribe(e=>{this.isBiddingMode=e,this.page=-1,this.products=[],this.pageSize=this.isBiddingMode?this.biddingModePageSize:this.shoppingModePageSize,this.cdr.detectChanges(),this.refreshProducts(),this.initInfiniteScrolling()})}ngOnDestroy(){super.ngOnDestroy(),this.clearSubscriptions()}clearSubscriptions(){this.scrollActive$?.next(!1),this.scrollActive$?.complete()}ngAfterViewInit(){l.Z.isServer||this.initInfiniteScrolling()}initInfiniteScrolling(){var e=this;return(0,t.Z)(function*(){e.clearSubscriptions(),e.scrollContainer&&!e.isBiddingMode&&(e.scrollActive$=new d.x,e.scrollElement=yield e.scrollContainer.getScrollElement(),e.scrollContainer.ionScroll.pipe((0,c.R)(e.scrollActive$)).subscribe(o=>{e.scrollElement.scrollHeight-o.detail.scrollTop<e.offsetScroll&&e.throttleScroll.next(1)}),e.throttleScroll.pipe((0,u.p)(300),(0,c.R)(e.scrollActive$)).subscribe(()=>{e.fetchData()}))})()}ngOnChanges(e){}refreshProducts(){this.page=-1,this.total=0,this.products=[],this.fetchData()}fetchData(e=null){var o=this;return(0,t.Z)(function*(){const h=e??o.page+1;if(!o.isLoading&&(0===h||o.products.length<o.total)){o.isLoading=!0,o.page=h,o.cdr.markForCheck();const x=o.isBiddingMode?yield(0,_.n)(o.biddingService.getProductsWithPoolInfo({page:o.page,rows:o.pageSize,sortType:o.biddingProductsSortOrder,isRecommended:!0,...o.additionalParams})):yield(0,_.n)(o.productService.getProductsByMetaParamsV2({page:o.page,rows:o.pageSize,traceId:o.userService.traceId,isRecommended:!0,...o.additionalParams}));x.rows=(0,v.DI)(x.rows||[]),o.products=[...o.products,...x.rows||[]],o.total=x.total,o.isLoading=!1,o.cdr.markForCheck()}})()}clear(){this.page=-1,this.isLoading=!1,this.total=0,this.products=[]}trackByFn(e,o){return o.id}trackByFn2(e){return e}}return i.\u0275fac=function(e){return new(e||i)(n.Y36(C.s),n.Y36(S.K),n.Y36(D.g),n.Y36(n.sBO))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-products-infinite-scroll"]],inputs:{scrollContainer:"scrollContainer",offsetScroll:"offsetScroll",additionalParams:"additionalParams",isSSR:"isSSR",biddingProductsSortOrder:"biddingProductsSortOrder",shoppingModePageSize:"shoppingModePageSize",biddingModePageSize:"biddingModePageSize"},standalone:!0,features:[n.qOj,n.TTD,n.jDz],decls:2,vars:3,consts:[[4,"ngLet"],["class","px-6 py-1 capitalize mx-auto mt-4 mb-2 see-more block w-fit border border-solid rounded-lg text-2xl text-center font-medium text-white",3,"routerLink",4,"ngIf"],["class","grid grid-cols-2 xs:grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-x-2 gap-y-6",4,"ngLet"],[1,"grid","grid-cols-2","xs:grid-cols-3","sm:grid-cols-4","md:grid-cols-5","lg:grid-cols-6","gap-x-2","gap-y-6"],["class","block",3,"product","isBiddingMode","canLaunchPool","isLogin",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"block",3,"product","isBiddingMode","canLaunchPool","isLogin"],["class","block",4,"ngFor","ngForOf","ngForTrackBy"],[1,"block"],[1,"px-6","py-1","capitalize","mx-auto","mt-4","mb-2","see-more","block","w-fit","border","border-solid","rounded-lg","text-2xl","text-center","font-medium","text-white",3,"routerLink"]],template:function(e,o){1&e&&(n.YNc(0,Z,4,4,"ng-container",0),n.ALo(1,"async")),2&e&&n.Q6J("ngLet",n.lcZ(1,1,o.biddingService.canLaunchPool$))},dependencies:[f.aw,f.X$,m.ez,m.sg,m.O5,m.Ov,M.Pc,M.Fo,s.m,A.Y,T.h,p.I,E.Bz,E.yS],styles:[".see-more[_ngcontent-%COMP%]{background:linear-gradient(to right,#8467ff 0%,#eb00ff 100%);border-color:#9d2ec3;min-width:160px}.see-more[_ngcontent-%COMP%]:hover{color:#fff;background:linear-gradient(to right,#7454ff 0%,#bb00cb 100%)}"],changeDetection:0}),i})()},59809:(O,P,r)=>{r.d(P,{I:()=>d});var t=r(94650);let d=(()=>{class c{}return c.\u0275fac=function(_){return new(_||c)},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-product-card-skeleton"]],standalone:!0,features:[t.jDz],decls:9,vars:0,consts:[[1,"cursor-pointer","flex","flex-col","w-full","max-w-[246px]","lg:max-w-[220px]","xl:max-w-[245px]"],[1,"relative","w-full","mb-2",2,"padding-top","100%"],[1,"absolute","inset-0","pulSate","rounded-lg"],[1,"product-title","truncate","mb-1","pulSate","text-sm",2,"letter-spacing","20px"],[1,"text-xs","leading-3","text-center","pulSate",2,"letter-spacing","20px"],[1,"text-base","text-center","pulSate",2,"letter-spacing","20px"]],template:function(_,l){1&_&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.qZA(),t.TgZ(3,"p",3),t._uU(4," \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),t.qZA(),t.TgZ(5,"p",4),t._uU(6," \xa0\xa0 "),t.qZA(),t.TgZ(7,"p",5),t._uU(8," \xa0\xa0 "),t.qZA()())}}),c})()},70957:(O,P,r)=>{r.d(P,{V:()=>_});var t=r(36895),d=r(94650),c=r(7507),u=r(95133);let _=(()=>{class l{constructor(f,m,s){this.content=f,this.router=m,this.platformId=s,(0,t.NF)(this.platformId)&&(this.subscription=this.router.events.subscribe(p=>{p instanceof c.m2&&this.content.scrollToTop(500)}))}ngOnDestroy(){this.subscription?.unsubscribe()}}return l.\u0275fac=function(f){return new(f||l)(d.Y36(u.W2),d.Y36(c.F0),d.Y36(d.Lbi))},l.\u0275dir=d.lG2({type:l,selectors:[["","scrollTop",""]]}),l})()}}]);