"use strict";(self.webpackChunkangular_tyqoon_client=self.webpackChunkangular_tyqoon_client||[]).push([[244],{50244:(y,v,l)=>{l.r(v),l.d(v,{AccountInfoModule:()=>Io});var p=l(36895),b=l(81212),u=l(80529),s=l(24006),c=l(50727),h=l(28746),C=l(6104),g=l(15861),o=l(94650),d=l(95133),_=l(54463),Z=l(8316);const E=function(){return{minSize:"50px",maxSize:"1000px"}};let M=(()=>{class n{constructor(){this.onLoadImg=new o.vpe,this.onRemove=new o.vpe,this.isEditing=!1,this.cropImg=null,this.data=""}ngOnInit(){var e=this;return(0,g.Z)(function*(){yield e.loadScript();const{profilePicture:t}=window;e.cropImg=new t(".drop-img-container",null,{onLoad:i=>{console.log("on load"),e.onLoadImg.emit()},onChange:i=>{console.log("on change")},onRemove:i=>{console.log("on remove"),e.onRemove.emit()},onError:function(i){console.log("Error type: "+i)},dropZone:!1})})()}getAsDataUrl(){return this.cropImg?this.cropImg.getAsDataURL():null}readFile(e){if(this.cropImg)return this.cropImg.removeImage(),this.cropImg.readFile(e)}loadScript(){return new Promise(e=>{(0,Z.Z)({jquery:"assets/script/jquery.min.js"}).jquery.onLoad(()=>{(0,Z.Z)({cropImage:"assets/script/crop-image.js?v=1.0.1"}).cropImage.onLoad(()=>{e(!0)})})})}abcd(){this.data=this.getAsDataUrl()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-crop-image"]],inputs:{initUrl:"initUrl"},outputs:{onLoadImg:"onLoadImg",onRemove:"onRemove"},standalone:!0,features:[o.jDz],decls:36,vars:17,consts:[[1,"drop-img-container","m-auto"],[1,"photo"],["type","file","accept","image/*"],[1,"photo__helper"],[1,"photo__frame","photo__frame--circle"],[1,"photo__canvas"],[1,"message","is-empty"],[1,"message--desktop"],[1,"message--mobile"],[1,"message","is-loading"],[1,"fa","fa-2x","fa-spin","fa-spinner"],[1,"message","is-dragover"],[1,"message","is-wrong-file-type","!text-red-500"],[1,"message","is-wrong-image-size","!text-red-500"],[1,"photo__options","hide"],[1,"photo__zoom","mt-3"],["type","range",1,"zoom-handler"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 64 64","fill","none","stroke","#000000",1,"remove","h-8","cursor-pointer"],["points","52 16 48 56 16 56 12 16"],["d","M20 16v-3.94A4.06 4.06 0 0 1 24.06 8h15.88A4.06 4.06 0 0 1 44 12.06V16"],["x1","8","y1","16","x2","56","y2","16"],["x1","24","y1","28","x2","40","y2","44"],["x1","40","y1","28","x2","24","y2","44"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"input",2),o.TgZ(3,"div",3)(4,"div",4),o._UZ(5,"canvas",5),o.TgZ(6,"div",6)(7,"p",7),o._uU(8),o.ALo(9,"translate"),o.qZA(),o.TgZ(10,"p",8),o._uU(11),o.ALo(12,"translate"),o.qZA()(),o.TgZ(13,"div",9),o._UZ(14,"i",10),o.qZA(),o.TgZ(15,"div",11)(16,"p"),o._uU(17),o.ALo(18,"translate"),o.qZA()(),o.TgZ(19,"div",12)(20,"p"),o._uU(21),o.ALo(22,"translate"),o.qZA()(),o.TgZ(23,"div",13)(24,"p"),o._uU(25),o.ALo(26,"translate"),o.qZA()()()(),o.TgZ(27,"div",14)(28,"div",15),o._UZ(29,"input",16),o.qZA(),o.O4$(),o.TgZ(30,"svg",17),o._UZ(31,"polyline",18)(32,"path",19)(33,"line",20)(34,"line",21)(35,"line",22),o.qZA()()()()),2&e&&(o.xp6(8),o.hij(" ",o.lcZ(9,5,"profile-drag-and-drop-avatar")," "),o.xp6(3),o.Oqu(o.lcZ(12,7,"profile-drag-and-drop-avatar")),o.xp6(6),o.Oqu(o.lcZ(18,9,"profile-drag-and-drop-avatar")),o.xp6(4),o.Oqu(o.lcZ(22,11,"image-upload-error-filetype")),o.xp6(4),o.Oqu(o.xi3(26,13,"profile-avatar-size-error",o.DdM(16,E))))},dependencies:[p.ez,d.Pc,_.aw,_.X$],styles:["[_nghost-%COMP%]     canvas{image-rendering:optimizeSpeed;image-rendering:-moz-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:-o-crisp-edges;image-rendering:crisp-edges;-ms-interpolation-mode:nearest-neighbor}[_nghost-%COMP%]     .hide{display:none!important}[_nghost-%COMP%]     *{box-sizing:border-box}[_nghost-%COMP%]     .photo__zoom{position:relative;padding-left:22px;padding-right:22px}[_nghost-%COMP%]     .photo__zoom input[type=range]{-webkit-appearance:none;width:100%;background:transparent;height:18px}[_nghost-%COMP%]     .photo__zoom input[type=range]::-webkit-slider-thumb{-webkit-appearance:none}[_nghost-%COMP%]     .photo__zoom input[type=range]:focus{outline:none}[_nghost-%COMP%]     .photo__zoom input[type=range]::-ms-track{width:100%;cursor:pointer;background:transparent;border-color:transparent;color:transparent}[_nghost-%COMP%]     .photo__zoom input[type=range]:focus::-ms-thumb{border-color:#268eff;background:#268eff;box-shadow:0 0 1px #268eff}[_nghost-%COMP%]     .photo__zoom input[type=range]:focus::-moz-range-thumb{border-color:#268eff;background:#268eff;box-shadow:0 0 1px #268eff}[_nghost-%COMP%]     .photo__zoom input[type=range]:focus::-webkit-slider-thumb{border-color:#268eff;background:#268eff;box-shadow:0 0 1px #268eff}[_nghost-%COMP%]     .photo__zoom input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;margin-top:-9px;box-sizing:border-box;cursor:pointer;width:18px;height:18px;display:block;border-radius:50%;background:#268eff;border:1px solid #ddd}[_nghost-%COMP%]     .photo__zoom input[type=range]::-webkit-slider-thumb:hover{border-color:#c1c1c1}[_nghost-%COMP%]     .photo__zoom input[type=range]::-ms-thumb{margin-top:0;box-sizing:border-box;cursor:pointer;width:18px;height:18px;display:block;border-radius:50%;background:#eee;border:1px solid #ddd}[_nghost-%COMP%]     .photo__zoom input[type=range]::-ms-thumb:hover{border-color:#c1c1c1}[_nghost-%COMP%]     .photo__zoom input[type=range]::-moz-range-thumb{margin-top:0;box-sizing:border-box;cursor:pointer;width:18px;height:18px;display:block;border-radius:50%;background:#eee;border:1px solid #ddd}[_nghost-%COMP%]     .photo__zoom input[type=range]::-moz-range-thumb:hover{border-color:#c1c1c1}[_nghost-%COMP%]     .photo__zoom input[type=range]::-webkit-slider-runnable-track{width:100%;height:1px;cursor:pointer;background:#eee;border:0}[_nghost-%COMP%]     .photo__zoom input[type=range]::-moz-range-track{width:100%;height:1px;cursor:pointer;background:#eee;border:0}[_nghost-%COMP%]     .photo__zoom input[type=range]::-ms-track{width:100%;height:1px;cursor:pointer;background:#eee;border:0}[_nghost-%COMP%]     .photo__zoom input[type=range].zoom--minValue:before, [_nghost-%COMP%]     .photo__zoom input[type=range].zoom--maxValue:after{color:#f8f8f8}[_nghost-%COMP%]     .photo__zoom input[type=range]:before{font-size:14px;left:4px;top:4px}[_nghost-%COMP%]     .photo__frame--circle{border:1px solid #e2e2e2;border-radius:50%}[_nghost-%COMP%]     .photo__helper{position:relative;background-repeat:no-repeat;background-color:transparent;padding:15px 0}[_nghost-%COMP%]     .photo__helper .canvas--helper{position:absolute;top:0;left:0}[_nghost-%COMP%]     .photo__frame img, [_nghost-%COMP%]     .photo__helper{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .drop-img-container{position:relative;font-size:85%;width:300px}[_nghost-%COMP%]     .photo{text-align:center}[_nghost-%COMP%]     .photo input[type=file]{display:none}[_nghost-%COMP%]     .photo__options{position:relative;text-align:left}[_nghost-%COMP%]     .photo__options .remove{padding:0;display:inline-block;text-decoration:none;color:#ddd;font-size:18px;width:20%;text-align:center;vertical-align:middle}[_nghost-%COMP%]     .photo__options .remove:hover{color:#000}[_nghost-%COMP%]     .photo__zoom{vertical-align:middle;width:80%;display:inline-block}[_nghost-%COMP%]     .photo__frame{cursor:move;overflow:hidden;position:relative;display:inline-block;width:160px;height:160px}[_nghost-%COMP%]     .photo__frame img, [_nghost-%COMP%]     .photo__helper img{position:relative}[_nghost-%COMP%]     .photo__frame .message{position:absolute;left:5px;right:5px;top:50%;transform:translateY(-50%);display:inline-block;color:#268eff;z-index:3}[_nghost-%COMP%]     .photo__frame .is-dragover{display:none}[_nghost-%COMP%]     .message p{font-size:.9em}[_nghost-%COMP%]     .photo__options{list-style:none}[_nghost-%COMP%]     .photo__options li{display:inline-block;text-align:center;width:50%}[_nghost-%COMP%]     .photo--empty .photo__frame{cursor:pointer}[_nghost-%COMP%]     .drop-img-container.is-dragover .photo__frame img, [_nghost-%COMP%]     .photo--empty img, [_nghost-%COMP%]     .photo--error img, [_nghost-%COMP%]     .photo--error--file-type img, [_nghost-%COMP%]     .photo--error--image-size img, [_nghost-%COMP%]     .photo--loading img{display:none}[_nghost-%COMP%]     .message--desktop, [_nghost-%COMP%]     .message--mobile{display:none}[_nghost-%COMP%]     .is-mobile .message--mobile{display:inline-block}[_nghost-%COMP%]     .is-mobile .message--desktop{display:none}[_nghost-%COMP%]     .is-desktop .message--desktop{display:inline-block}[_nghost-%COMP%]     .is-desktop .message--mobile{display:none}[_nghost-%COMP%]     .message.is-empty, [_nghost-%COMP%]     .message.is-loading, [_nghost-%COMP%]     .message.is-wrong-file-type, [_nghost-%COMP%]     .message.is-wrong-image-size, [_nghost-%COMP%]     .message.is-something-wrong, [_nghost-%COMP%]     .message.is-dragover{display:none}[_nghost-%COMP%]     .photo--empty .photo__options{display:none}[_nghost-%COMP%]     .photo--empty .message.is-empty{display:inline-block}[_nghost-%COMP%]     .photo--empty .photo__frame:hover{background:#268eff}[_nghost-%COMP%]     .photo--empty .photo__frame:hover .message{color:#fff}[_nghost-%COMP%]     .photo--loading .message.is-loading{display:inline-block}[_nghost-%COMP%]     .photo--loading .message.is-empty, [_nghost-%COMP%]     .photo--loading .message.is-wrong-file-type, [_nghost-%COMP%]     .photo--loading .message.is-dragover, [_nghost-%COMP%]     .photo--loading .message.is-wrong-image-size, [_nghost-%COMP%]     .photo--loading .photo__options{display:none}[_nghost-%COMP%]     .photo--error .message.is-empty, [_nghost-%COMP%]     .photo--error .message.is-loading, [_nghost-%COMP%]     .photo--error .message.is-dragover, [_nghost-%COMP%]     .photo--error .message.is-wrong-image-size, [_nghost-%COMP%]     .photo--error .photo__options{display:none}[_nghost-%COMP%]     .photo--error .message.is-something-wrong{display:inline-block}[_nghost-%COMP%]     .photo--error--file-type .message.is-empty, [_nghost-%COMP%]     .photo--error--file-type .message.is-loading, [_nghost-%COMP%]     .photo--error--file-type .message.is-dragover, [_nghost-%COMP%]     .photo--error--file-type .message.is-wrong-image-size, [_nghost-%COMP%]     .photo--error--file-type .photo__options{display:none}[_nghost-%COMP%]     .photo--error--file-type .message.is-wrong-file-type{display:inline-block}[_nghost-%COMP%]     .photo--error--image-size .message.is-empty, [_nghost-%COMP%]     .photo--error--image-size .message.is-loading, [_nghost-%COMP%]     .photo--error--image-size .message.is-dragover, [_nghost-%COMP%]     .photo--error--image-size .message.is-wrong-file-type, [_nghost-%COMP%]     .photo--error--image-size .photo__options{display:none}[_nghost-%COMP%]     .photo--error--image-size .message.is-wrong-image-size{display:inline-block}[_nghost-%COMP%]     .drop-img-container.is-dragover .photo__frame{background-color:#268eff;color:#fff!important}[_nghost-%COMP%]     .drop-img-container.is-dragover .message{color:#fff!important}[_nghost-%COMP%]     .drop-img-container.is-dragover .photo__frame .is-dragover{display:inline-block}[_nghost-%COMP%]     .drop-img-container.is-dragover .message.is-empty, [_nghost-%COMP%]     .drop-img-container.is-dragover .message.is-loading, [_nghost-%COMP%]     .drop-img-container.is-dragover .message.is-wrong-file-type, [_nghost-%COMP%]     .drop-img-container.is-dragover .message.is-wrong-image-size{display:none}"]}),n})();var x=l(45329),k=l(84007),z=l(23372);let U=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-edit-icon"]],decls:2,vars:0,consts:[["viewBox","64 64 896 896","focusable","false","fill","currentColor","width","1em","height","1em","data-icon","edit","aria-hidden","true"],["d","M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"]],template:function(e,t){1&e&&(o.O4$(),o.TgZ(0,"svg",0),o._UZ(1,"path",1),o.qZA())},encapsulation:2}),n})();var J=l(75073),L=l(84620),O=l(93883),w=l(26704),A=l(60312),I=l(90147);function q(n,r){1&n&&(o.TgZ(0,"ion-note",9),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&n&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"edit-email-fill-in")," "))}function N(n,r){1&n&&(o.TgZ(0,"ion-note",9),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&n&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"edit-email-fill-in-correct")," "))}function S(n,r){if(1&n&&(o.ynx(0),o.YNc(1,q,3,3,"ion-note",8),o.YNc(2,N,3,3,"ion-note",8),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",null==e.newEmail?null:e.newEmail.hasError("required")),o.xp6(1),o.Q6J("ngIf",null==e.newEmail?null:e.newEmail.hasError("email"))}}function D(n,r){if(1&n&&(o.TgZ(0,"span",12),o._uU(1),o.qZA()),2&n){const e=o.oxw().ngLet;o.xp6(1),o.hij("",e,"s")}}function F(n,r){if(1&n){const e=o.EpF();o.TgZ(0,"ion-button",10),o.NdJ("click",function(){o.CHM(e);const i=o.oxw();return o.KtG(i.sendVerificationCode())}),o.TgZ(1,"span"),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.YNc(4,D,2,1,"span",11),o.qZA()}if(2&n){const e=r.ngLet,t=o.oxw();o.Q6J("disabled",!(null!=t.newEmail&&t.newEmail.valid)||e>0),o.xp6(1),o.ekj("invisible",e),o.xp6(1),o.Oqu(o.lcZ(3,5,"login-page-get-verification-code")),o.xp6(2),o.Q6J("ngIf",e)}}function j(n,r){1&n&&(o.TgZ(0,"ion-note",9),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&n&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"edit-email-fill-in-verification-code")," "))}function Q(n,r){if(1&n&&(o.ynx(0),o.YNc(1,j,3,3,"ion-note",8),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",null==e.verificationCode?null:e.verificationCode.hasError("required"))}}let B=(()=>{class n{constructor(e,t,i){this.toastController=e,this._formBuilder=t,this.userService=i,this.email="",this.confirmEmailAction=new o.vpe,this.emailForm=this._formBuilder.group({email:[this.email,[s.kI.required,s.kI.email]],code:[null,s.kI.required]})}ngOnInit(){this.userService.initVerificationTimer()}ngOnDestroy(){this.userService.clearVerificationTimer(w.R4.Email)}get newEmail(){return this.emailForm.get("email")}get verificationCode(){return this.emailForm.get("code")}sendVerificationCode(){this.newEmail?.valid&&this.userService.sendChangeEmailCode(this.newEmail.value).subscribe(t=>{0===t.code?(this.showMessage(`\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001\u5230${this.newEmail?.value}\u4e0a\uff0c\\n\u8bf7\u6ce8\u610f\u67e5\u6536`,3e3,"top"),this.userService.startVerificationTimer(w.R4.Email,60,!0)):this.showMessage(t.message,3e3,"top")})}onEditEmail(e){if(!e)return void this.confirmEmailAction.emit({action:e});if(!this.emailForm.valid)return;const t=this.emailForm.get("code")?.value,i=this.newEmail?.value;this.userService.changeEmail(t,i).subscribe({next:a=>{this.showMessage(0===a?.code?"\u4fee\u6539\u6210\u529f":a?.message,3e3,"top")},error:a=>{console.error(a.message),this.showMessage(a.message,3e3,"top")}}),this.confirmEmailAction.emit({email:this.newEmail?.value,action:e})}showMessage(e,t,i){var a=this;return(0,g.Z)(function*(){yield(yield a.toastController.create({message:e,duration:t,position:i})).present()})()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(d.yF),o.Y36(s.qu),o.Y36(x.K))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-edit-email-modal"]],inputs:{isOpen:"isOpen",email:"email"},outputs:{confirmEmailAction:"confirmEmailAction"},decls:14,vars:16,consts:[[3,"title","isOpen","modalAction"],[1,"p-6"],[1,"flex","flex-col","gap-y-6",3,"formGroup"],["lines","none","shape","rounded",1,"p-0"],["type","email","formControlName","email","email","",3,"placeholder"],[4,"ngIf"],["fill","outline","slot","end","class","relative !ml-1 verification-btn",3,"disabled","click",4,"ngLet"],["formControlName","code",3,"placeholder"],["slot","error",4,"ngIf"],["slot","error"],["fill","outline","slot","end",1,"relative","!ml-1","verification-btn",3,"disabled","click"],["class","absolute left-0 right-0 top-0 bottom-0 flex items-center justify-center lowercase font-medium text-base",4,"ngIf"],[1,"absolute","left-0","right-0","top-0","bottom-0","flex","items-center","justify-center","lowercase","font-medium","text-base"]],template:function(e,t){1&e&&(o.TgZ(0,"app-modal",0),o.NdJ("modalAction",function(a){return t.onEditEmail(a)}),o.ALo(1,"translate"),o.TgZ(2,"div",1)(3,"form",2)(4,"ion-item",3),o._UZ(5,"ion-input",4),o.ALo(6,"translate"),o.YNc(7,S,3,2,"ng-container",5),o.YNc(8,F,5,7,"ion-button",6),o.ALo(9,"async"),o.qZA(),o.TgZ(10,"ion-item",3),o._UZ(11,"ion-input",7),o.ALo(12,"translate"),o.YNc(13,Q,2,1,"ng-container",5),o.qZA()()()()),2&e&&(o.s9C("title",o.lcZ(1,8,"Modify-Email")),o.Q6J("isOpen",t.isOpen),o.xp6(3),o.Q6J("formGroup",t.emailForm),o.xp6(2),o.s9C("placeholder",o.lcZ(6,10,"edit-email-fill-in")),o.xp6(2),o.Q6J("ngIf",null==t.newEmail?null:t.newEmail.touched),o.xp6(1),o.Q6J("ngLet",o.lcZ(9,12,t.userService.emailTimeRemaining$)),o.xp6(3),o.s9C("placeholder",o.lcZ(12,14,"edit-email-fill-in-correct-code")),o.xp6(2),o.Q6J("ngIf",null==t.verificationCode?null:t.verificationCode.touched))},dependencies:[p.O5,s._Y,s.JJ,s.JL,s.on,s.sg,s.u,d.YG,d.pK,d.Ie,d.uN,d.j9,A.z,I.h,p.Ov,_.X$],styles:["ion-item[_ngcontent-%COMP%]{--padding-start: 0px;--inner-padding-end: 0px}ion-input[_ngcontent-%COMP%]{border:1px solid #d9d9d9;border-radius:.5rem;--padding-start: .5rem !important}ion-input[_ngcontent-%COMP%]:hover{border-color:#ffa73b}ion-input.has-focus[_ngcontent-%COMP%]{border-color:#ffa73b!important;box-shadow:0 0 0 2px #fb881133;border-right-width:1px!important;outline:0}ion-input.ion-invalid[_ngcontent-%COMP%]:not(.ion-untouched){border-color:red!important}ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0;height:100%;cursor:pointer;--border-width: 1px;--border-radius: .5rem;--border-color: #ffa73b;--color: #ffa73b;--color-hover: #f7b96d}ion-item[_ngcontent-%COMP%]   ion-button.verification-btn.button-disabled[_ngcontent-%COMP%]{--color: #777777;background:rgba(237,235,235,.5);--border-color: #aaaaaa}"]}),n})();var Y=l(32482);function R(n,r){1&n&&(o.TgZ(0,"ion-note",9),o._uU(1," \u8bf7\u586b\u5199\u9a8c\u8bc1\u7801 "),o.qZA())}function H(n,r){if(1&n&&(o.ynx(0),o.YNc(1,R,2,0,"ion-note",8),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",null==e.verificationCode?null:e.verificationCode.hasError("required"))}}function G(n,r){if(1&n&&(o.TgZ(0,"span",12),o._uU(1),o.qZA()),2&n){const e=o.oxw().ngLet;o.xp6(1),o.hij("",e,"s")}}function $(n,r){if(1&n){const e=o.EpF();o.TgZ(0,"ion-button",10),o.NdJ("click",function(){o.CHM(e);const i=o.oxw();return o.KtG(i.sendVerificationCode())}),o.TgZ(1,"span"),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.YNc(4,G,2,1,"span",11),o.qZA()}if(2&n){const e=r.ngLet,t=o.oxw();o.Q6J("disabled",!(null!=t.newMobile&&t.newMobile.valid)||e>0),o.xp6(1),o.ekj("invisible",e),o.xp6(1),o.Oqu(o.lcZ(3,5,"login-page-get-verification-code")),o.xp6(2),o.Q6J("ngIf",e)}}let K=(()=>{class n{constructor(e,t,i){this.toastController=e,this._formBuilder=t,this.userService=i,this.mobileArea="+86",this.mobile="",this.confirmPhoneAction=new o.vpe,this.userInfo=null,this.subscriptions=new c.w0,this.mobileForm=this._formBuilder.group({mobileArea:[this.mobileArea],mobile:["",[s.kI.required]],code:[null,s.kI.required]})}ngOnInit(){this.subscriptions.add(this.userService.userInfo$.subscribe(e=>{e&&(this.userInfo=e,console.log(e))})),this.userService.initVerificationTimer()}ngOnDestroy(){this.userService.clearVerificationTimer(w.R4.Email)}get newMobileArea(){return this.mobileForm.get("mobileArea")}get newMobile(){return this.mobileForm.get("mobile")}get verificationCode(){return this.mobileForm.get("code")}onSelectPhoneCountry(e){e&&this.mobileForm.get("mobileArea")?.patchValue(e)}onPhoneNumberChange(e){this.mobileForm.get("mobile")?.patchValue(e)}sendVerificationCode(){if(!this.newMobile?.valid||!this.newMobileArea?.valid)return;const e=this.newMobileArea?.value?this.newMobileArea.value:this.userInfo?.mobileArea,t=this.newMobile.value;this.userService.sendChangeMobileSMS(e,t).subscribe(i=>{0===i?.code?(this.showMessage(`\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001\u5230${e}${t}\u4e0a\n\u8bf7\u6ce8\u610f\u67e5\u6536`,3e3,"top"),this.userService.startVerificationTimer(w.R4.SMS,60,!0)):this.showMessage(i.message,3e3,"top")})}onEditMobile(e){var t=this;if(!e)return void this.confirmPhoneAction.emit({action:e});if(!this.mobileForm.valid)return;const i=this.mobileForm.get("code")?.value,a=this.newMobileArea?.value?this.newMobileArea?.value:this.userInfo?.mobileArea,m=this.newMobile?.value;var f;console.log(i,a,m),this.userService.changeMobile(a,m,i).subscribe({next:(f=(0,g.Z)(function*(P){0===P?.code?(t.showMessage("\u4fee\u6539\u6210\u529f",3e3,"top"),t.userService.updateUserInfo(),t.confirmPhoneAction.emit({mobileArea:t.mobileArea,mobile:t.mobile,action:e})):t.showMessage(P?.message,3e3,"top")}),function(Eo){return f.apply(this,arguments)}),error:f=>{console.error(f.message),this.showMessage(f.message,3e3,"top"),this.confirmPhoneAction.emit({mobileArea:this.mobileArea,mobile:this.mobile,action:e})}})}showMessage(e,t,i){var a=this;return(0,g.Z)(function*(){yield(yield a.toastController.create({message:e,duration:t,position:i})).present()})()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(d.yF),o.Y36(s.qu),o.Y36(x.K))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-edit-phone-modal"]],inputs:{isOpen:"isOpen",mobileArea:"mobileArea",mobile:"mobile"},outputs:{confirmPhoneAction:"confirmPhoneAction"},decls:9,vars:6,consts:[["title","\u4fee\u6539\u624b\u673a\u53f7",3,"isOpen","modalAction"],[1,"p-6"],[1,"flex","flex-col",3,"formGroup"],[1,"z-10",3,"onSelectPhoneCountry","onPhoneNumberChange"],["lines","none","shape","rounded",1,"p-0"],["placeholder","\u9a8c\u8bc1\u7801","formControlName","code"],[4,"ngIf"],["fill","outline","slot","end","class","!ml-1 verification-btn",3,"disabled","click",4,"ngLet"],["slot","error",4,"ngIf"],["slot","error"],["fill","outline","slot","end",1,"!ml-1","verification-btn",3,"disabled","click"],["class","absolute left-0 right-0 top-0 bottom-0 flex items-center justify-center lowercase font-medium text-base",4,"ngIf"],[1,"absolute","left-0","right-0","top-0","bottom-0","flex","items-center","justify-center","lowercase","font-medium","text-base"]],template:function(e,t){1&e&&(o.TgZ(0,"app-modal",0),o.NdJ("modalAction",function(a){return t.onEditMobile(a)}),o.TgZ(1,"div",1)(2,"form",2)(3,"app-phone-control",3),o.NdJ("onSelectPhoneCountry",function(a){return t.onSelectPhoneCountry(a)})("onPhoneNumberChange",function(a){return t.onPhoneNumberChange(a)}),o.qZA(),o.TgZ(4,"ion-item",4),o._UZ(5,"ion-input",5),o.YNc(6,H,2,1,"ng-container",6),o.YNc(7,$,5,7,"ion-button",7),o.ALo(8,"async"),o.qZA()()()()),2&e&&(o.Q6J("isOpen",t.isOpen),o.xp6(2),o.Q6J("formGroup",t.mobileForm),o.xp6(4),o.Q6J("ngIf",null==t.verificationCode?null:t.verificationCode.touched),o.xp6(1),o.Q6J("ngLet",o.lcZ(8,4,t.userService.smsTimeRemaining$)))},dependencies:[p.O5,s._Y,s.JJ,s.JL,s.sg,s.u,Y.b,d.YG,d.pK,d.Ie,d.uN,d.j9,A.z,I.h,p.Ov,_.X$],styles:["ion-item[_ngcontent-%COMP%]{--padding-start: 0px;--inner-padding-end: 0px}ion-input[_ngcontent-%COMP%]{border:1px solid #d9d9d9;border-radius:.5rem;--padding-start: .5rem !important}ion-input[_ngcontent-%COMP%]:hover{border-color:#ffa73b}ion-input.has-focus[_ngcontent-%COMP%]{border-color:#ffa73b!important;box-shadow:0 0 0 2px #fb881133;border-right-width:1px!important;outline:0}ion-input.ion-invalid[_ngcontent-%COMP%]:not(.ion-untouched){border-color:red!important}ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0;height:100%;cursor:pointer;--border-width: 1px;--border-radius: .5rem;--border-color: #ffa73b;--color: #ffa73b;--color-hover: #f7b96d}ion-item[_ngcontent-%COMP%]   ion-button.verification-btn.button-disabled[_ngcontent-%COMP%]{--color: #777777;background:rgba(237,235,235,.5);--border-color: #aaaaaa}[_nghost-%COMP%]     #modal-body{overflow:visible}"]}),n})();var V=l(77579),X=l(82722),W=l(70262),oo=l(39646),T=l(49769);function eo(n,r){1&n&&(o.TgZ(0,"div"),o._uU(1," \u8bf7\u8f93\u5165\u5f53\u524d\u5bc6\u7801 "),o.qZA())}function no(n,r){if(1&n&&(o.TgZ(0,"div",14),o.YNc(1,eo,2,0,"div",15),o.qZA()),2&n){const e=o.oxw();let t;o.xp6(1),o.Q6J("ngIf",null==(t=e.form.get("oldPassword"))||null==t.errors?null:t.errors.required)}}function to(n,r){1&n&&(o.TgZ(0,"div"),o._uU(1," \u8bf7\u8f93\u5165\u5bc6\u7801 "),o.qZA())}function io(n,r){1&n&&(o.TgZ(0,"div"),o._uU(1," \u5bc6\u7801\u5fc5\u987b\u7531\u5927\u5c0f\u5199\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u7279\u6b8a\u7b26\u53f7\u4e2d\u76842\u79cd\u53ca\u4ee5\u4e0a\u7c7b\u578b\u7ec4\u6210! "),o.qZA())}function ro(n,r){if(1&n&&(o.TgZ(0,"div",14),o.YNc(1,to,2,0,"div",15),o.YNc(2,io,2,0,"div",15),o.qZA()),2&n){const e=o.oxw();let t,i;o.xp6(1),o.Q6J("ngIf",null==(t=e.form.get("newPassword"))||null==t.errors?null:t.errors.required),o.xp6(1),o.Q6J("ngIf",null==(i=e.form.get("newPassword"))||null==i.errors?null:i.errors.error)}}function ao(n,r){1&n&&(o.TgZ(0,"div"),o._uU(1," \u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801 "),o.qZA())}function so(n,r){1&n&&(o.TgZ(0,"div"),o._uU(1," \u4e24\u6b21\u5bc6\u7801\u4e0d\u4e00\u81f4 "),o.qZA())}function lo(n,r){if(1&n&&(o.TgZ(0,"div",14),o.YNc(1,ao,2,0,"div",15),o.YNc(2,so,2,0,"div",15),o.qZA()),2&n){const e=o.oxw();let t,i;o.xp6(1),o.Q6J("ngIf",null==(t=e.form.get("confirmNewPassword"))||null==t.errors?null:t.errors.required),o.xp6(1),o.Q6J("ngIf",null==(i=e.form.get("confirmNewPassword"))||null==i.errors?null:i.errors.confirm)}}function po(n,r){if(1&n&&(o.TgZ(0,"div",16),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.hij(" ",e.message," ")}}let co=(()=>{class n{constructor(e,t,i){this.fb=e,this.toastController=t,this.userService=i,this.changePasswordAction=new o.vpe,this.busy=!1,this.$active=new V.x,this.confirmationValidator=a=>a.value?a.value!==this.form.get("newPassword")?.value?{confirm:!0,error:!0}:{}:{required:!0}}ngOnInit(){this.initForm()}ngOnDestroy(){this.$active.next(),this.$active.complete()}onAction(e){e?this.form.invalid||(this.busy=!0,this.message=null,this.userService.changePassword(T(this.form.get("oldPassword")?.value).toString(),T(this.form.get("newPassword")?.value).toString()).pipe((0,X.R)(this.$active),(0,W.K)(()=>(0,oo.of)(null))).subscribe(t=>{this.busy=!1,t?.code>0?this.message=t.message:(this.showMessage("\u4fee\u6539\u5bc6\u7801\u6210\u529f",3e3,"top","success"),this.changePasswordAction.emit(!1))})):this.changePasswordAction.emit({action:e})}showMessage(e,t,i,a){var m=this;return(0,g.Z)(function*(){yield(yield m.toastController.create({message:e,duration:t,position:i,color:a})).present()})()}initForm(){this.form=this.fb.group({oldPassword:[null,[s.kI.required]],newPassword:[null,[s.kI.required,this.validatePassword]],confirmNewPassword:[null,[s.kI.required,this.confirmationValidator]]})}validatePassword(e){return e.value?/(?![A-Z]*$)(?![a-z]*$)(?![0-9]*$)(?![^a-zA-Z0-9]*$)/.test(e.value)?e.value.trim().length<6?{length:!0}:{}:{error:!0}:{required:!0}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(s.qu),o.Y36(d.yF),o.Y36(x.K))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-change-password-modal"]],inputs:{isOpen:"isOpen"},outputs:{changePasswordAction:"changePasswordAction"},decls:30,vars:18,consts:[[3,"title","isOpen","modalAction"],[1,"flex","flex-col","h-full","overflow-y-auto","overflow-x-hidden"],[1,"group","relative","flex","flex-col","my-8","md:my-0","px-4","lg:px-0","pt-4","md:p-4","lg:mb-0","rounded-xl","bg-white","md:border","border-gray-400","border-opacity-25"],[1,"m-auto","pt-4","px-4","w-full",3,"formGroup"],[1,"mb-6"],[1,"flex","items-center","relative"],[1,"flex","items-center","absolute","icon"],["viewBox","64 64 896 896","focusable","false","fill","currentColor","width","1em","height","1em","data-icon","lock","aria-hidden","true"],["d","M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"],["formControlName","oldPassword","type","password",1,"form-input","w-full","py-2.5","pl-10","pr-3","rounded-md","border","focus:outline-none",3,"placeholder"],["class","validation-error mt-3 text-red-600",4,"ngIf"],["formControlName","newPassword","type","password",1,"form-input","w-full","py-2.5","pl-10","pr-3","rounded-md","border","focus:outline-none",3,"placeholder"],["formControlName","confirmNewPassword","type","password",1,"form-input","w-full","py-2.5","pl-10","pr-3","rounded-md","border","focus:outline-none",3,"placeholder"],["class","text-center w-full mt-3 text-red-600",4,"ngIf"],[1,"validation-error","mt-3","text-red-600"],[4,"ngIf"],[1,"text-center","w-full","mt-3","text-red-600"]],template:function(e,t){if(1&e&&(o.TgZ(0,"app-modal",0),o.NdJ("modalAction",function(a){return t.onAction(a)}),o.ALo(1,"translate"),o.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"span",6),o.O4$(),o.TgZ(8,"svg",7),o._UZ(9,"path",8),o.qZA()(),o.kcU(),o._UZ(10,"input",9),o.ALo(11,"translate"),o.qZA(),o.YNc(12,no,2,1,"div",10),o.qZA(),o.TgZ(13,"div",4)(14,"div",5)(15,"span",6),o.O4$(),o.TgZ(16,"svg",7),o._UZ(17,"path",8),o.qZA()(),o.kcU(),o._UZ(18,"input",11),o.ALo(19,"translate"),o.qZA(),o.YNc(20,ro,3,2,"div",10),o.qZA(),o.TgZ(21,"div",4)(22,"div",5)(23,"span",6),o.O4$(),o.TgZ(24,"svg",7),o._UZ(25,"path",8),o.qZA()(),o.kcU(),o._UZ(26,"input",12),o.ALo(27,"translate"),o.qZA(),o.YNc(28,lo,3,2,"div",10),o.qZA(),o.YNc(29,po,2,1,"div",13),o.qZA()()()()),2&e){let i,a,m;o.s9C("title",o.lcZ(1,10,"account-change-password-page-title")),o.Q6J("isOpen",t.isOpen),o.xp6(4),o.Q6J("formGroup",t.form),o.xp6(6),o.Q6J("placeholder",o.lcZ(11,12,"account-change-password-current")),o.xp6(2),o.Q6J("ngIf",(null==(i=t.form.get("oldPassword"))?null:i.invalid)&&(null==(i=t.form.get("oldPassword"))?null:i.touched)),o.xp6(6),o.Q6J("placeholder",o.lcZ(19,14,"account-change-password-new-password")),o.xp6(2),o.Q6J("ngIf",(null==(a=t.form.get("newPassword"))?null:a.invalid)&&(null==(a=t.form.get("newPassword"))?null:a.touched)),o.xp6(6),o.Q6J("placeholder",o.lcZ(27,16,"account-change-password-new-password-confirm")),o.xp6(2),o.Q6J("ngIf",(null==(m=t.form.get("confirmNewPassword"))?null:m.invalid)&&(null==(m=t.form.get("confirmNewPassword"))?null:m.touched)),o.xp6(1),o.Q6J("ngIf",t.message)}},dependencies:[p.O5,s.Fj,s.JJ,s.JL,s.sg,s.u,A.z,_.X$],styles:[".form-input[_ngcontent-%COMP%]{border-color:#d9d9d9}.form-input[_ngcontent-%COMP%]:focus{border-color:#ffa73b;box-shadow:0 10px 15px -3px #fb881133,0 4px 6px -4px #fb881133}.icon[_ngcontent-%COMP%]{left:11px}"]}),n})(),mo=(()=>{class n{constructor(){}transform(e,t){const[i,a,m]=[e.slice(0,1),e.slice(1,-1),e.slice(-1)];return`${i}${t?"*".repeat(a.length<6?a.length:6):a}${m}`}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=o.Yjl({name:"encrypt",type:n,pure:!1}),n})();function uo(n,r){if(1&n){const e=o.EpF();o.TgZ(0,"app-crop-image",33),o.NdJ("onLoadImg",function(){o.CHM(e);const i=o.oxw(2);return o.KtG(i.handleLoadImg())})("onRemove",function(){o.CHM(e);const i=o.oxw(2);return o.KtG(i.handleRemoveImg())}),o.qZA()}}function go(n,r){1&n&&o._UZ(0,"app-loading-spinner",42)}function ho(n,r){if(1&n){const e=o.EpF();o.TgZ(0,"div",34)(1,"input",35,36),o.NdJ("change",function(i){o.CHM(e);const a=o.oxw(2);return o.KtG(a.fileBrowseHandler(i))}),o.qZA(),o.TgZ(3,"label",37),o._UZ(4,"img",38),o.qZA(),o.YNc(5,go,1,0,"app-loading-spinner",39),o.TgZ(6,"ion-fab-button",40),o.NdJ("click",function(){o.CHM(e);const i=o.MAs(2);return o.KtG(i.click())}),o._UZ(7,"ion-icon",41),o.qZA()()}if(2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("formControl",e.uploadControl),o.xp6(3),o.Q6J("src",e.userInfo.avatar||"/assets/images/sign-up-user.svg",o.LSH),o.xp6(1),o.Q6J("ngIf",e.uploadProgress||e.isLoadingInfo)}}function fo(n,r){1&n&&(o.TgZ(0,"div"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&n&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"image-upload-error-filesize")," "))}function _o(n,r){1&n&&(o.TgZ(0,"div"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&n&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"image-upload-error-filetype")," "))}function vo(n,r){1&n&&o._UZ(0,"div")}function bo(n,r){if(1&n){const e=o.EpF();o.TgZ(0,"div",43)(1,"button",44),o.NdJ("click",function(){o.CHM(e);const i=o.oxw(2);return o.KtG(i.isEditingPhoto=!1)}),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.TgZ(4,"button",45),o.NdJ("click",function(){o.CHM(e);const i=o.oxw(2);return o.KtG(i.saveProfilePicture())}),o._uU(5),o.ALo(6,"translate"),o.qZA()()}if(2&n){const e=o.oxw(2);o.xp6(2),o.Oqu(o.lcZ(3,3,"cancel")),o.xp6(2),o.Q6J("disabled",!e.isLoadedImg),o.xp6(1),o.Oqu(o.lcZ(6,5,"save"))}}function Co(n,r){if(1&n){const e=o.EpF();o.TgZ(0,"ion-button",46),o.NdJ("click",function(){o.CHM(e);const i=o.oxw(2);return o.KtG(i.isAuthModalShown=!0)}),o._uU(1),o.ALo(2,"translate"),o.qZA()}2&n&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"modal-Authentication")," "))}const xo=function(n){return{"h-48 lg:h-56 ":n}};function wo(n,r){if(1&n){const e=o.EpF();o.ynx(0),o.TgZ(1,"div",6)(2,"div",7),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.TgZ(5,"div",8),o.NdJ("fileDropped",function(i){o.CHM(e);const a=o.oxw();return o.KtG(a.onFileDropped(i))}),o.TgZ(6,"div",9),o.YNc(7,uo,1,0,"app-crop-image",10),o.YNc(8,ho,8,3,"div",11),o.TgZ(9,"div",12)(10,"div",13),o._UZ(11,"app-upload-anim-icon"),o.TgZ(12,"p",14),o._uU(13),o.ALo(14,"translate"),o.qZA()()(),o.TgZ(15,"div",15),o.YNc(16,fo,3,3,"div",16),o.YNc(17,_o,3,3,"div",16),o.YNc(18,vo,1,0,"div",17),o.qZA()(),o.YNc(19,bo,7,7,"div",18),o.TgZ(20,"div",19)(21,"div",20),o._uU(22),o.ALo(23,"translate"),o.qZA(),o.TgZ(24,"div",21)(25,"span",22),o._uU(26),o.ALo(27,"encrypt"),o.qZA(),o.TgZ(28,"div",23),o.NdJ("click",function(){o.CHM(e);const i=o.oxw();return o.KtG(i.bEncryptName=!i.bEncryptName)}),o._UZ(29,"ion-icon",24),o.qZA()(),o.TgZ(30,"div",20),o._uU(31),o.ALo(32,"translate"),o.qZA(),o.TgZ(33,"div",25)(34,"ion-button",26),o.NdJ("click",function(){o.CHM(e);const i=o.oxw();return o.KtG(i.isChangePasswordModalShown=!0)}),o._uU(35),o.ALo(36,"translate"),o.qZA()(),o.TgZ(37,"div",20),o._uU(38),o.ALo(39,"translate"),o.qZA(),o.TgZ(40,"div",21)(41,"span",27),o._uU(42),o.ALo(43,"encrypt"),o.qZA(),o.TgZ(44,"div",23),o.NdJ("click",function(){o.CHM(e);const i=o.oxw();return o.KtG(i.isEmailModalShown=!0)}),o._UZ(45,"app-edit-icon"),o.qZA()(),o.TgZ(46,"div",20),o._uU(47),o.ALo(48,"translate"),o.qZA(),o.TgZ(49,"div",21)(50,"span",28),o._uU(51),o.ALo(52,"encrypt"),o.qZA(),o.TgZ(53,"div",23),o.NdJ("click",function(){o.CHM(e);const i=o.oxw();return o.KtG(i.isPhoneModalShown=!0)}),o._UZ(54,"app-edit-icon"),o.qZA()(),o.TgZ(55,"div",20),o._uU(56),o.ALo(57,"translate"),o.qZA(),o.TgZ(58,"div",21)(59,"span",28),o._uU(60),o.ALo(61,"translate"),o.qZA()(),o.TgZ(62,"div",20),o._uU(63),o.ALo(64,"translate"),o.qZA(),o.TgZ(65,"div",21)(66,"span",29),o._uU(67),o.ALo(68,"translate"),o.ALo(69,"dict"),o.qZA(),o.YNc(70,Co,3,3,"ion-button",30),o.qZA(),o.TgZ(71,"div",20),o._uU(72),o.ALo(73,"translate"),o.qZA(),o.TgZ(74,"div",31)(75,"span",28),o._uU(76),o.qZA(),o.TgZ(77,"ion-button",32),o.NdJ("click",function(){o.CHM(e);const i=o.oxw();return o.KtG(i.isInviteModalShown=!0)}),o._uU(78),o.ALo(79,"translate"),o.qZA()()()()(),o.BQk()}if(2&n){const e=o.oxw();o.xp6(3),o.hij(" ",o.lcZ(4,27,"account-info-page-title")," "),o.xp6(3),o.Q6J("ngClass",o.VKq(66,xo,!e.isEditingPhoto)),o.xp6(1),o.Q6J("ngIf",e.isEditingPhoto&&e.userInfo),o.xp6(1),o.Q6J("ngIf",!e.isEditingPhoto),o.xp6(5),o.hij(" ",o.lcZ(14,29,"Drag&Drop your profile image here")," "),o.xp6(2),o.Q6J("ngSwitch",e.uploadError),o.xp6(1),o.Q6J("ngSwitchCase","filesize"),o.xp6(1),o.Q6J("ngSwitchCase","filetype"),o.xp6(2),o.Q6J("ngIf",e.isEditingPhoto),o.xp6(3),o.hij(" ",o.lcZ(23,31,"account-info-username"),": "),o.xp6(4),o.hij(" ",o.xi3(27,33,e.userInfo.username,e.bEncryptName)," "),o.xp6(3),o.Q6J("name",e.bEncryptName?"eye-outline":"eye-off-outline"),o.xp6(2),o.hij(" ",o.lcZ(32,36,"login-page-password"),": "),o.xp6(4),o.hij(" ",o.lcZ(36,38,"account-menu-password"),""),o.xp6(3),o.hij(" ",o.lcZ(39,40,"account-info-email"),": "),o.xp6(4),o.hij(" ",o.xi3(43,42,e.userInfo.email||"",e.bEncryptEmail)," "),o.xp6(5),o.hij(" ",o.lcZ(48,45,"account-info-phone"),": "),o.xp6(4),o.AsE(" ",e.userInfo.mobileArea||" "," ",o.xi3(52,47,e.userInfo.mobile||"",e.bEncryptMobile)," "),o.xp6(5),o.hij(" ",o.lcZ(57,50,"account-info-referrer"),": "),o.xp6(4),o.hij(" ",e.userInfo.pid||o.lcZ(61,52,"account-info-referrer-unbound")," "),o.xp6(3),o.hij(" ",o.lcZ(64,54,"modal-Real-Name-Authentication"),": "),o.xp6(4),o.hij(" ",o.lcZ(68,56,o.Dn7(69,58,e.userInfo.isIdentify,e.DictKey.Auth_STATUS,"label"))," "),o.xp6(3),o.Q6J("ngIf",0===e.userInfo.isIdentify||3===e.userInfo.isIdentify),o.xp6(2),o.hij(" ",o.lcZ(73,62,"account-info-referrer-my-invitation-code"),": "),o.xp6(4),o.hij(" ",e.userInfo.id," "),o.xp6(2),o.hij(" ",o.lcZ(79,64,"shop-product-page-share")," ")}}function Mo(n,r){1&n&&o._UZ(0,"div",47)}const Ao=[{path:"",component:(()=>{class n{constructor(e){this._userService=e,this.userInfo=null,this.bEncryptName=!0,this.bEncryptEmail=!0,this.bEncryptMobile=!0,this.uploadControl=new s.NI,this.isLoadingInfo=!1,this.isInviteModalShown=!1,this.isEmailModalShown=!1,this.isPhoneModalShown=!1,this.isAuthModalShown=!1,this.isChangePasswordModalShown=!1,this.DictKey=C.f,this.isEditingPhoto=!1,this.subscriptions=new c.w0,this.isLoadedImg=!1,this.subscriptions.add(this._userService.userInfo$.subscribe(t=>{t&&(this.userInfo=t,this.isLoadingInfo=!1)}))}ngOnInit(){}ngOnDestroy(){this.subscriptions.unsubscribe(),this.uploadSub?.unsubscribe()}onFileDropped(e){this.isEditingPhoto=!0,setTimeout(()=>{this.cropImg.readFile(e[0])},150)}fileBrowseHandler(e){!e.target.files.length||(this.isEditingPhoto=!0,setTimeout(()=>{this.cropImg.readFile(e.target.files[0])},150))}uploadAvatar(e){this.uploadError="",this.userInfo&&(this.userInfo.avatar=""),e.type.slice(0,5),this.isEditingPhoto=!1,this.uploadProgress=0,this.uploadSub=this._userService.uploadAvatar(e).pipe((0,h.x)(()=>this.uploadFinished())).subscribe(i=>{i.type===u.dt.UploadProgress&&i.total&&(this.uploadProgress=Math.round(i.loaded/i.total*100))})}uploadFinished(){this.uploadProgress=null,this.uploadSub=null,this.isLoadingInfo=!0,this._userService.updateUserInfo(),this.isLoadedImg=!1}showInviteModal(){this.isInviteModalShown=!0}onConfirmEmail(e){e.action||(this.isEmailModalShown=!1)}onConfirmPhone(e){this.isPhoneModalShown=!1,e.action||(this.isPhoneModalShown=!1)}onChangePassword(e){e.action||(this.isChangePasswordModalShown=!1)}saveProfilePicture(){if(!this.isLoadedImg)return;const e=this.cropImg.getAsDataUrl();if(!e)return;const t=this.dataURLtoBlob(e);if(!t)return;const i=new File([t],"avatar.png",{type:"image/png",lastModified:Date.now()});this.uploadAvatar(i)}dataURLtoBlob(e){let t=e.split(",");if(!t||!t[0])return null;let i=t[0].match(/:(.*?);/)?.[1],a=atob(t[1]),m=a.length,f=new Uint8Array(m);for(;m--;)f[m]=a.charCodeAt(m);return new Blob([f],{type:i})}handleLoadImg(){this.isLoadedImg=!0}handleRemoveImg(){this.isLoadedImg=!1}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(x.K))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-account-info"]],viewQuery:function(e,t){if(1&e&&o.Gf(M,5),2&e){let i;o.iGM(i=o.CRH())&&(t.cropImg=i.first)}},decls:8,vars:10,consts:[[4,"ngIf","ngIfElse"],["placeholderView",""],[3,"isOpen","isOpenChange"],[3,"isOpen","email","confirmEmailAction"],[3,"isOpen","mobileArea","mobile","confirmPhoneAction"],[3,"isOpen","changePasswordAction"],[1,"flex","flex-col","h-full","overflow-y-auto","overflow-x-hidden"],[1,"hidden","md:block","text-2xl","text-slate-700","font-medium","px-4","py-1","leading-9"],["appDragAndDrop","",1,"group","relative","flex","flex-col","pt-4","md:p-4","lg:mb-0","rounded-xl","bg-white","md:border","border-gray-400","border-opacity-25",3,"fileDropped"],[1,"profile-avatar","relative","flex","flex-col","items-center","justify-center","sm:mb-6",3,"ngClass"],[3,"onLoadImg","onRemove",4,"ngIf"],["class","relative w-36 h-36 sm:w-40 sm:h-40 lg:w-44 lg:h-44 group-[.fileover]:hidden z-40",4,"ngIf"],[1,"invisible","opacity-0","drop-zone-container","absolute","flex","items-center","justify-center","flex-none","group-[.fileover]:visible","group-[.fileover]:opacity-100","w-3/4","sm:2/3","lg:w-1/2","2xl:w-2/5","h-full","rounded-md","z-50","pointer-events-none"],[1,"drop-zone","w-full","h-full","bg-white","flex","flex-col","items-center","justify-center","rounded-md"],[1,"mx-4","text-center"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","flex justify-center mr-2 mb-4",4,"ngIf"],[1,"account-info","grid","grid-cols-8","sm:grid-cols-2","items-center","leading-normal","text-black","text-opacity-90","text-base"],[1,"col-span-3","sm:col-span-1","font-medium","text-right","py-2","lg:py-3","pr-2","sm:pr-5"],[1,"col-span-5","sm:col-span-1","flex","items-center","pl-5"],[1,"text-right","mr-2"],[1,"flex","items-center","justify-center","w-8","h-8","border","rounded-sm","px-1","duration-150","hover:text-primary","z-40",3,"click"],[1,"w-full","h-full",3,"name"],[1,"col-span-5","sm:col-span-1","flex","items-center","pl-5","change-password","z-40"],["color","light",1,"change-password-btn","normal-case","font-semibold",3,"click"],[1,"text-center","mr-2","break-all"],[1,"text-center","mr-2"],[1,"text-center","mr-2","whitespace-nowrap"],["class","normal-case share-btn z-40 whitespace-pre-wrap px-2",3,"click",4,"ngIf"],[1,"col-span-5","sm:col-span-1","flex","flex-col","sm:flex-row","items-start","sm:items-center","pl-5"],[1,"normal-case","share-btn","h-8","z-40",3,"click"],[3,"onLoadImg","onRemove"],[1,"relative","w-36","h-36","sm:w-40","sm:h-40","lg:w-44","lg:h-44","group-[.fileover]:hidden","z-40"],["id","upload-avatar","type","file","accept","image/*","multiple","false",1,"hidden",3,"formControl","change"],["file",""],["for","upload-avatar",1,"upload","flex","w-full","h-full","rounded-full","overflow-hidden","border-2","cursor-pointer","z-40"],["alt","User avatar","width","100%","height","100%",1,"object-cover","object-center","!w-full","!h-full",3,"src"],["class","absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2","text","loading",4,"ngIf"],["size","small",1,"absolute","top-0","right-0","m-0","z-40",3,"click"],["name","pencil-sharp"],["text","loading",1,"absolute","left-1/2","top-1/2","-translate-x-1/2","-translate-y-1/2"],[1,"flex","justify-center","mr-2","mb-4"],[1,"py-2","font-bold","capitalize","mr-2","opacity-30",3,"click"],[1,"py-2","ml-2","font-bold","bg-[#0087ff]","rounded-lg","px-3","text-white","capitalize",3,"disabled","click"],[1,"normal-case","share-btn","z-40","whitespace-pre-wrap","px-2",3,"click"],[1,"flex","flex-col","w-full","min-h-[600px]","overflow-y-auto","overflow-x-hidden","bg-white","rounded-xl","pulSate"]],template:function(e,t){if(1&e&&(o.YNc(0,wo,80,68,"ng-container",0),o.YNc(1,Mo,1,0,"ng-template",null,1,o.W1O),o.TgZ(3,"app-invite-modal",2),o.NdJ("isOpenChange",function(a){return t.isInviteModalShown=a}),o.qZA(),o.TgZ(4,"app-verification-modal",2),o.NdJ("isOpenChange",function(a){return t.isAuthModalShown=a}),o.qZA(),o.TgZ(5,"app-edit-email-modal",3),o.NdJ("confirmEmailAction",function(a){return t.onConfirmEmail(a)}),o.qZA(),o.TgZ(6,"app-edit-phone-modal",4),o.NdJ("confirmPhoneAction",function(a){return t.onConfirmPhone(a)}),o.qZA(),o.TgZ(7,"app-change-password-modal",5),o.NdJ("changePasswordAction",function(a){return t.onChangePassword(a)}),o.qZA()),2&e){const i=o.MAs(2);o.Q6J("ngIf",t.userInfo)("ngIfElse",i),o.xp6(3),o.Q6J("isOpen",t.isInviteModalShown),o.xp6(1),o.Q6J("isOpen",t.isAuthModalShown),o.xp6(1),o.Q6J("isOpen",t.isEmailModalShown)("email",(null==t.userInfo?null:t.userInfo.email)||""),o.xp6(1),o.Q6J("isOpen",t.isPhoneModalShown)("mobileArea",(null==t.userInfo?null:t.userInfo.mobileArea)||"")("mobile",(null==t.userInfo?null:t.userInfo.mobile)||""),o.xp6(1),o.Q6J("isOpen",t.isChangePasswordModalShown)}},dependencies:[p.mk,p.O5,p.RF,p.n9,p.ED,s.Fj,s.JJ,k.a,s.oH,d.YG,d.W4,d.gu,z.g,U,J.z,L.E,M,O.t,B,K,co,_.X$,C.e,mo],styles:['ion-button[_ngcontent-%COMP%]{--box-shadow: none}ion-button.change-password-btn[_ngcontent-%COMP%]{--border-color: #c7c7c790;--border-width: 1px;--border-style: solid}.profile-avatar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: .75rem;--transition: background-color .4s ease, color .4s ease, border-color .4s ease;--padding-top: 0;--padding-bottom: 0;--background: #fb8811}.share-btn[_ngcontent-%COMP%]{--background: #fb8811;--border-radius: 5px;height:33px}div[appDragAndDrop][_ngcontent-%COMP%]:before{position:fixed;inset:0;z-index:50;background-color:#00000015;opacity:0;content:"";transition-duration:.2s;pointer-events:none}div[appDragAndDrop].fileover[_ngcontent-%COMP%]:before{opacity:1}div.drop-zone-container[_ngcontent-%COMP%]{background:linear-gradient(90deg,#3880ff 50%,transparent 0) repeat-x,linear-gradient(90deg,#3880ff 50%,transparent 0) repeat-x,linear-gradient(0deg,#3880ff 50%,transparent 0) repeat-y,linear-gradient(0deg,#3880ff 50%,transparent 0) repeat-y;background-size:16px 3px,16px 3px,3px 16px,3px 16px;background-position:0 0,0 100%,0 0,100% 0;animation:linearGradientMove .3s infinite linear}div.drop-zone-container[_ngcontent-%COMP%]   div.drop-zone[_ngcontent-%COMP%]{width:calc(100% - 6px);height:calc(100% - 6px)}div.drop-zone-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:none}@keyframes linearGradientMove{to{background-position:16px 0,-16px 100%,0 -16px,100% 16px}}.password-box-outer[_ngcontent-%COMP%]{height:40px;width:160px}.password-box-outer[_ngcontent-%COMP%]   .password-box-inner[_ngcontent-%COMP%]{height:30px;width:150px}.password-box-outer[_ngcontent-%COMP%]:hover   .password-box-inner[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity));transition:all .3s}.bevel[_ngcontent-%COMP%]{clip-path:polygon(15% 0%,85% 0%,100% 20%,100% 80%,85% 100%,15% 100%,0% 80%,0% 20%)}button[disabled][_ngcontent-%COMP%]{opacity:.3}']}),n})()}];let Po=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[b.Bz.forChild(Ao),b.Bz]}),n})();var yo=l(44466),Zo=l(7492),Oo=l(16424);let Io=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[p.ez,s.u5,Oo.g,s.UX,Po,Zo.R,d.Pc,_.aw,yo.m,M,O.t]}),n})()},93883:(y,v,l)=>{l.d(v,{t:()=>b});var p=l(94650);let b=(()=>{class u{constructor(){}ngOnInit(){}}return u.\u0275fac=function(c){return new(c||u)},u.\u0275cmp=p.Xpm({type:u,selectors:[["app-upload-anim-icon"]],standalone:!0,features:[p.jDz],decls:13,vars:0,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 50 50","width","50","height","50"],["id","line","transform","matrix(-1,0,0,-1,50,64)"],["transform","matrix(1,0,0,1,0,0)"],["d"," M25,26 C25,26 25,42 25,42"],["id","arrow","transform","matrix(-1,0,0,-1,50,64)"],["id","right-arrow","transform","matrix(1,0,0,1,22.5,41)"],["d"," M2.5,2.5 C2.5,2.5 -2.5,-2.5 -2.5,-2.5"],["id","left-arrow","transform","matrix(1,0,0,1,27.5,41)"],["d"," M2.5,-2.5 C2.5,-2.5 -2.5,2.5 -2.5,2.5"],["id","cloud","transform","matrix(1,0,0,1,0,0)"],["transform","matrix(1,0,0,1,25,20)"],["d"," M7,15 C7,15 14.01200008392334,15 14.01200008392334,15 C18.635000228881836,15 21.972999572753906,11.4399995803833 21.999000549316406,7 C22.025999069213867,2.431999921798706 18.16699981689453,-0.43799999356269836 15.734000205993652,-0.8069999814033508 C15.734000205993652,-0.8069999814033508 15.907999992370605,-1.4769999980926514 15.932999610900879,-1.5820000171661377 C15.958000183105469,-1.687000036239624 16.003000259399414,-2.496999979019165 16.003000259399414,-2.496999979019165 C15.875,-6.458000183105469 12.666999816894531,-8 10.50100040435791,-8 C8.145000457763672,-8 6.395999908447266,-6.354000091552734 6.290999889373779,-6.035999774932861 C5.541999816894531,-8.729000091552734 1.687000036239624,-14.038000106811523 -4.994999885559082,-14.001999855041504 C-13.229000091552734,-13.958000183105469 -17.375,-6.540999889373779 -16.964000701904297,-1.25600004196167 C-20.25,0.16699999570846558 -21.958999633789062,3.3340001106262207 -21.999000549316406,6.504000186920166 C-22.05900001525879,11.208000183105469 -18.25200080871582,14.987000465393066 -13.50100040435791,15 C-13.50100040435791,15 -7,15 -7,15"]],template:function(c,h){1&c&&(p.O4$(),p.TgZ(0,"svg",0)(1,"g")(2,"g",1)(3,"g",2),p._UZ(4,"path",3),p.qZA()(),p.TgZ(5,"g",4)(6,"g",5),p._UZ(7,"path",6),p.qZA(),p.TgZ(8,"g",7),p._UZ(9,"path",8),p.qZA()(),p.TgZ(10,"g",9)(11,"g",10),p._UZ(12,"path",11),p.qZA()()()())},styles:["path[_ngcontent-%COMP%]{stroke-width:2px;stroke-linejoin:round;stroke-linecap:round;fill-opacity:0;stroke:#000}#arrow[_ngcontent-%COMP%]{animation:upload-bounce 1s infinite alternate ease}#line[_ngcontent-%COMP%]{animation:upload-grow 1s infinite alternate ease}@keyframes upload-grow{0%{transform:matrix(-1,0,0,-1,50,69)}to{transform:matrix(-1,0,0,-1,50,64)}}@keyframes upload-bounce{0%{transform:matrix(-1,0,0,-1,50,69)}to{transform:matrix(-1,0,0,-1,50,64)}}"]}),u})()},75073:(y,v,l)=>{l.d(v,{z:()=>b});var p=l(94650);let b=(()=>{class u{constructor(){this.fileOver=!1,this.fileDropped=new p.vpe}onDragOver(c){c.preventDefault(),c.stopPropagation(),this.fileOver=!0}onDragLeave(c){c.preventDefault(),c.stopPropagation(),this.fileOver=!1}onDrop(c){c.preventDefault(),c.stopPropagation(),this.fileOver=!1,c.dataTransfer&&this.fileDropped.emit(c.dataTransfer.files)}}return u.\u0275fac=function(c){return new(c||u)},u.\u0275dir=p.lG2({type:u,selectors:[["","appDragAndDrop",""]],hostVars:2,hostBindings:function(c,h){1&c&&p.NdJ("dragover",function(g){return h.onDragOver(g)})("dragleave",function(g){return h.onDragLeave(g)})("drop",function(g){return h.onDrop(g)}),2&c&&p.ekj("fileover",h.fileOver)},outputs:{fileDropped:"fileDropped"}}),u})()}}]);