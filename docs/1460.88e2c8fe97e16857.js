"use strict";(self.webpackChunkangular_tyqoon_client=self.webpackChunkangular_tyqoon_client||[]).push([[1460,9127],{24499:(P,u,e)=>{e.d(u,{c:()=>c});var o=e(5565),a=e(94650);const x=["header"];let c=(()=>{class p extends o.V{constructor(d,f){super(),this.element=d,this.renderer=f,this.lastScrollTop=0}onContentScroll(d){const f=d.detail.scrollTop;f>=50&&this.lastScrollTop<f?this.renderer.addClass(this.header.el,"top-toolbar-hide"):this.renderer.removeClass(this.header.el,"top-toolbar-hide"),this.lastScrollTop=f}}return p.\u0275fac=function(d){return new(d||p)(a.Y36(a.SBq),a.Y36(a.Qsj))},p.\u0275cmp=a.Xpm({type:p,selectors:[["ng-component"]],viewQuery:function(d,f){if(1&d&&a.Gf(x,5),2&d){let v;a.iGM(v=a.CRH())&&(f.header=v.first)}},features:[a.qOj],decls:0,vars:0,template:function(d,f){},encapsulation:2}),p})()},51460:(P,u,e)=>{e.r(u),e.d(u,{NotificationsComponent:()=>W});var o=e(15861),a=e(36895),x=e(24006),c=e(95133),p=e(54463),_=e(82722),d=e(49808),f=e(5963),v=e(83905),E=e(24499),M=e(55502),D=e(1241),s=e(21639),m=e(44466),t=e(94650),O=e(74056),T=e(7507),w=e(70957),y=e(49127),N=e(90147),b=e(7228),A=e(71832),I=e(21801),L=e(13746),U=e(93426),B=e(93774);function R(r,C){if(1&r){const i=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(),g=t.MAs(1);return l.onChangeFilter(l.notificationStatus.Unclicked),t.KtG(g.scrollToTop())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&r){const i=t.oxw();t.ekj("active",i.selectedFilter===i.notificationStatus.Unclicked),t.xp6(1),t.hij(" ",t.lcZ(2,3,"unread")," ")}}function Z(r,C){if(1&r){const i=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.markAllAsRead())}),t._UZ(1,"ion-icon",31),t.TgZ(2,"div",32),t._uU(3),t.ALo(4,"translate"),t.qZA()()}2&r&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"mark-all-as-read")))}function Y(r,C){if(1&r){const i=t.EpF();t.TgZ(0,"app-notification-item",34),t.NdJ("click",function(){const g=t.CHM(i).$implicit,h=t.oxw(2);return t.KtG(h.onAction(g))}),t.qZA()}2&r&&t.Q6J("notification",C.$implicit)}function S(r,C){if(1&r&&(t.ynx(0),t.YNc(1,Y,1,1,"app-notification-item",33),t.BQk()),2&r){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.notifications)}}function k(r,C){if(1&r&&(t.TgZ(0,"div",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r){const i=t.oxw();t.Q6J("ngClass",i.notifications.length?"py-6":"mt-28"),t.xp6(1),t.hij(" ",t.lcZ(2,2,i.notifications.length?"no-more-notifications":"no-notifications")," ")}}function K(r,C){1&r&&t._UZ(0,"app-loading-animation",36)}let W=(()=>{class r extends E.c{constructor(i,n,l,g,h,j){super(i,n),this.notificationService=l,this.cdr=g,this.route=h,this.router=j,this.selectedFilter=M.E.All,this.notificationStatus=M.E,this.unreadCount=0,this.notifications=[],this.isOpenNotificationDetailModal=!1,this.selectedNotification=null,this.isLoading=!0,this.isManualRefresh=!1,this.totalNotifications=0,this.notificationParams={rows:20,page:0,status:M.E.All},this.clientId="",this.token=null}ngOnInit(){var i=this;return(0,o.Z)(function*(){i.originUrl=i.route.snapshot.queryParamMap.get("originUrl"),i.notificationService.count$.pipe((0,_.R)(i.destroyStream$)).subscribe(n=>{i.unreadCount=n}),i.notificationService.readAll$.pipe((0,_.R)(i.destroyStream$)).subscribe(()=>{i.initContent()})})()}ngAfterViewInit(){this.notificationParams.status=this.selectedFilter,this.initContent()}onChangeFilter(i){i!=this.selectedFilter&&(this.selectedFilter=i,this.initContent())}initContent(i=!1){var n=this;return(0,o.Z)(function*(){if(n.isLoading=!0,n.isManualRefresh=i,n.notifications=[],n.notificationParams={rows:20,page:0,status:n.selectedFilter},yield n.getNotifications(),n.pageContainer){let l=yield n.hasScrollbar();for(;!l&&!n.allNotificationsLoaded&&n.notificationParams.page<3;)yield n.getNotifications(),yield(0,d.n)((0,f.H)(100)),l=yield n.hasScrollbar()}})()}get allNotificationsLoaded(){return this.totalNotifications<=this.notifications.length}hasScrollbar(){var i=this;return(0,o.Z)(function*(){const n=yield i.pageContainer.getScrollElement();return n.scrollHeight>n.clientHeight})()}onAction(i){i.isRead||this.notificationService.markAsRead(i.id).then(()=>{i.isRead=!0}),i.isClicked||this.notificationService.markAsClicked(i.id).then(()=>{this.selectedFilter===M.E.Unclicked?this.initContent():i.isClicked=!0}),this.selectedNotification=i,this.isOpenNotificationDetailModal=!0}getNotifications(i=null){var n=this;return(0,o.Z)(function*(){const l=yield(0,d.n)(n.notificationService.getNotifications(n.notificationParams));if(i&&i.complete(),l?.data){const g=l.data.rows;n.notifications=n.notificationParams.page?[...n.notifications,...g]:g,n.cdr.detectChanges(),0==n.notificationParams.page&&(n.totalNotifications=l.data.total),n.notificationParams.page+=1}n.isLoading=!1})()}loadMore(i){var n=this;return(0,o.Z)(function*(){yield n.getNotifications(i.target),i.state="closed"})()}handleBack(){this.router.navigateByUrl(this.originUrl??"/")}markAllAsRead(){var i=this;return(0,o.Z)(function*(){yield(0,v.z)(i.notificationService.markAllAsClicked()),i.initContent()})()}}return r.\u0275fac=function(i){return new(i||r)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(O.g),t.Y36(t.sBO),t.Y36(T.gz),t.Y36(T.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-notifications"]],viewQuery:function(i,n){if(1&i&&t.Gf(c.W2,5),2&i){let l;t.iGM(l=t.CRH())&&(n.pageContainer=l.first)}},standalone:!0,features:[t.qOj,t.jDz],decls:38,vars:27,consts:[["scrollTop","","fullscreen","true","scrollEvents","true",3,"ionScroll"],["ionContent",""],["appOverflowVisible","",1,"sticky","top-0","shadow-lg","z-50"],["header",""],[3,"hidePageName","hideLogo","hideCart","hideSearch"],[1,"grey-bg","pt-4"],[1,"tyqoon-container","px-2","md:px-0","h-full","flex","flex-col"],[1,"hidden","md:flex","flex-auto","items-center","w-full","py-3","pt-4","top-0"],[1,"cursor-pointer","w-8","h-8","ml-2",3,"click"],["name","chevron-back-outline",1,"w-8","h-8"],[1,"text-3xl","font-medium"],[1,"flex","items-center","gap-4","sm:gap-0","sm:px-4","pb-2","justify-between"],[1,"flex","text-lg"],[1,"filter-item","px-3","py-1.5","rounded-lg","font-medium",3,"click"],["class","filter-item px-3 py-1.5 rounded-lg font-medium flex items-center gap-1",3,"active","click",4,"ngLet"],[1,"relative","flex","items-center"],["class","w-fit py-1 px-2 mr-2 md:py-1.5 md:px-3 mark-all-as-read rounded-lg justify-center items-center flex group",3,"click",4,"ngIf"],[1,"w-fit","p-1","md:py-1.5","md:px-3","refresh","rounded-full","md:rounded-lg","justify-center","items-center","flex","group","bg-blue-100","hover:bg-blue-200",3,"click"],["name","refresh-outline",1,"w-5","h-5","md:mb-0.5","text-black"],[1,"hidden","md:flex","ml-1","font-medium","text-lg","text-black"],[1,"flex","flex-col","h-full","sm:px-4"],[1,"flex","flex-col","h-full"],[1,"flex","flex-col","flex-auto","w-full","border-t"],[4,"ngIf"],["class","w-full text-center text-gray-500 text-base font-medium no-notifications",3,"ngClass",4,"ngIf"],["class","mx-auto mt-5 block w-fit",4,"ngIf"],["threshold","0","position","bottom",3,"disabled","ionInfinite"],[1,"pt-2"],[3,"isOpen","notification","isOpenChange"],[1,"filter-item","px-3","py-1.5","rounded-lg","font-medium","flex","items-center","gap-1",3,"click"],[1,"w-fit","py-1","px-2","mr-2","md:py-1.5","md:px-3","mark-all-as-read","rounded-lg","justify-center","items-center","flex","group",3,"click"],["name","checkmark-done-outline",1,"flex","xs:hidden","md:flex","w-5","h-5","md:mb-0.5","text-white"],[1,"hidden","xs:flex","md:ml-1","font-medium","text-sm","xs:text-base","md:text-lg","text-white"],[3,"notification","click",4,"ngFor","ngForOf"],[3,"notification","click"],[1,"w-full","text-center","text-gray-500","text-base","font-medium","no-notifications",3,"ngClass"],[1,"mx-auto","mt-5","block","w-fit"]],template:function(i,n){if(1&i){const l=t.EpF();t.TgZ(0,"ion-content",0,1),t.NdJ("ionScroll",function(h){return n.onContentScroll(h)}),t.TgZ(2,"ion-toolbar",2,3),t._UZ(4,"app-top-navbar",4)(5,"app-top-menu"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"a",8),t.NdJ("click",function(){return n.handleBack()}),t._UZ(10,"ion-icon",9),t.qZA(),t.TgZ(11,"h1",10),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",11)(15,"div",12)(16,"button",13),t.NdJ("click",function(){t.CHM(l);const h=t.MAs(1);return n.onChangeFilter(n.notificationStatus.All),t.KtG(h.scrollToTop())}),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.YNc(19,R,3,5,"button",14),t.ALo(20,"async"),t.qZA(),t.TgZ(21,"div",15),t.YNc(22,Z,5,3,"button",16),t.TgZ(23,"button",17),t.NdJ("click",function(){return n.initContent(!0)}),t._UZ(24,"ion-icon",18),t.TgZ(25,"div",19),t._uU(26),t.ALo(27,"translate"),t.qZA()()()(),t.TgZ(28,"div",20)(29,"div",21)(30,"div",22),t.YNc(31,S,2,1,"ng-container",23),t.YNc(32,k,3,4,"div",24),t.YNc(33,K,1,0,"app-loading-animation",25),t.TgZ(34,"ion-infinite-scroll",26),t.NdJ("ionInfinite",function(h){return n.loadMore(h)}),t._UZ(35,"ion-infinite-scroll-content",27),t.qZA()()()()()(),t._UZ(36,"app-new-year-dragons"),t.qZA(),t.TgZ(37,"app-notification-detail-modal",28),t.NdJ("isOpenChange",function(h){return n.isOpenNotificationDetailModal=h}),t.qZA()}if(2&i){let l;t.xp6(4),t.Q6J("hidePageName",!1)("hideLogo",!0)("hideCart",!0)("hideSearch",!0),t.xp6(8),t.hij(" ",t.lcZ(13,19,"notifications")," "),t.xp6(4),t.ekj("active",n.selectedFilter===n.notificationStatus.All),t.xp6(1),t.hij(" ",t.lcZ(18,21,"all")," "),t.xp6(2),t.Q6J("ngLet",null!==(l=t.lcZ(20,23,n.notificationService.count$))&&void 0!==l?l:0),t.xp6(3),t.Q6J("ngIf",n.selectedFilter===n.notificationStatus.Unclicked),t.xp6(1),t.ekj("loading",n.isLoading&&n.isManualRefresh),t.xp6(3),t.Oqu(t.lcZ(27,25,"refresh")),t.xp6(5),t.Q6J("ngIf",n.notifications.length>0),t.xp6(1),t.Q6J("ngIf",!n.isLoading&&n.allNotificationsLoaded),t.xp6(1),t.Q6J("ngIf",n.isLoading&&0===n.notificationParams.page),t.xp6(1),t.Q6J("disabled",n.allNotificationsLoaded),t.xp6(3),t.Q6J("isOpen",n.isOpenNotificationDetailModal)("notification",n.selectedNotification)}},dependencies:[a.ez,a.mk,a.sg,a.O5,a.Ov,c.Pc,c.W2,c.gu,c.ju,c.MB,c.sr,p.aw,p.X$,m.m,w.V,y.H,N.h,b.r,A.Y,s.F,I.r,L.X,D.x,U.p,B.z,x.u5],styles:["ion-toolbar[appOverflowVisible][_ngcontent-%COMP%]{contain:none}.filter-item.active[_ngcontent-%COMP%]{background-color:#fff0e9;color:#ff7e18;border-color:#ff7e18}.filter-item[_ngcontent-%COMP%]:focus-visible{outline:0}.notifications-search[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--placeholder-opacity: 1;--placeholder-font-weight: 500;--placeholder-color: #999;--padding-start: 6px;--color: #555}@media (min-width: 640px){.notifications-search[_ngcontent-%COMP%]{min-width:248px}}app-top-navbar[_ngcontent-%COMP%]     app-notification-indicator{display:none}@media (min-width: 768px){app-top-navbar[_ngcontent-%COMP%]     app-notification-indicator{display:block}app-notification-list[_ngcontent-%COMP%]     .notification .notification-img{height:5rem;width:5rem}app-notification-list[_ngcontent-%COMP%]     .notification .notification-text{font-size:1.125rem!important;line-height:1.75rem!important}app-notification-list[_ngcontent-%COMP%]     .notification .notification-type{font-size:1.125rem;line-height:1.75rem}app-notification-list[_ngcontent-%COMP%]     .notification .notification-time{font-size:1rem;line-height:1.5rem}}.refresh[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{--ionicon-stroke-width: 50}.refresh.loading[_ngcontent-%COMP%]{animation:blue-pulse 1.2s}.mark-all-as-read[_ngcontent-%COMP%]{background-color:#0087ff}.mark-all-as-read[_ngcontent-%COMP%]:hover{background-color:#2991ff}"]}),r})()},71832:(P,u,e)=>{e.d(u,{Y:()=>D});var o=e(94650),a=e(56889),x=e(6074),c=e(36895);function p(s,m){1&s&&o._UZ(0,"img",6)}function _(s,m){1&s&&o._UZ(0,"img",7)}function d(s,m){if(1&s&&(o.ynx(0),o.YNc(1,p,1,0,"img",4),o.YNc(2,_,1,0,"img",5),o.BQk()),2&s){const t=o.oxw(2);o.xp6(1),o.Q6J("ngIf",t.showLeft),o.xp6(1),o.Q6J("ngIf",t.showRight)}}function f(s,m){1&s&&o._UZ(0,"img",10)}function v(s,m){1&s&&o._UZ(0,"img",11)}function E(s,m){if(1&s&&(o.YNc(0,f,1,0,"img",8),o.YNc(1,v,1,0,"img",9)),2&s){const t=o.oxw(2);o.Q6J("ngIf",t.showLeft),o.xp6(1),o.Q6J("ngIf",t.showRight)}}function M(s,m){if(1&s&&(o.TgZ(0,"div",1),o.YNc(1,d,3,2,"ng-container",2),o.ALo(2,"async"),o.YNc(3,E,2,2,"ng-template",null,3,o.W1O),o.qZA()),2&s){const t=o.MAs(4),O=o.oxw();o.xp6(1),o.Q6J("ngIf",o.lcZ(2,2,O.biddingService.isBiddingMode$))("ngIfElse",t)}}let D=(()=>{class s{constructor(t,O){this.biddingService=t,this.themeService=O,this.showLeft=!0,this.showRight=!0}}return s.\u0275fac=function(t){return new(t||s)(o.Y36(a.g),o.Y36(x.f))},s.\u0275cmp=o.Xpm({type:s,selectors:[["app-new-year-dragons"]],inputs:{showLeft:"showLeft",showRight:"showRight"},decls:1,vars:1,consts:[["class","flex w-full justify-between z-100",4,"ngIf"],[1,"flex","w-full","justify-between","z-100"],[4,"ngIf","ngIfElse"],["shoppingMode",""],["class","left bidding hidden xl:block absolute h-auto dragon-jumping","src","/assets/images/new-year/Mascot-CNY-2024-1.png","alt","Bidding",4,"ngIf"],["class","right bidding hidden xl:block absolute h-auto dragon-scaling","style","--distance: 2px","src","/assets/images/new-year/Mascot-CNY-2024-2.png","alt","Bidding",4,"ngIf"],["src","/assets/images/new-year/Mascot-CNY-2024-1.png","alt","Bidding",1,"left","bidding","hidden","xl:block","absolute","h-auto","dragon-jumping"],["src","/assets/images/new-year/Mascot-CNY-2024-2.png","alt","Bidding",1,"right","bidding","hidden","xl:block","absolute","h-auto","dragon-scaling",2,"--distance","2px"],["class","left shopping hidden xl:block absolute h-auto dragon-scaling","style","--distance: -2px","src","/assets/images/new-year/Mascot-CNY-2024-3.png","alt","Bidding",4,"ngIf"],["class","right shopping hidden xl:block absolute h-auto dragon-jumping","src","/assets/images/new-year/Mascot-CNY-2024-4.png","alt","Bidding",4,"ngIf"],["src","/assets/images/new-year/Mascot-CNY-2024-3.png","alt","Bidding",1,"left","shopping","hidden","xl:block","absolute","h-auto","dragon-scaling",2,"--distance","-2px"],["src","/assets/images/new-year/Mascot-CNY-2024-4.png","alt","Bidding",1,"right","shopping","hidden","xl:block","absolute","h-auto","dragon-jumping"]],template:function(t,O){1&t&&o.YNc(0,M,5,4,"div",0),2&t&&o.Q6J("ngIf",O.themeService.isNewYearMode)},dependencies:[c.O5,c.Ov],styles:["[_nghost-%COMP%]{pointer-events:none;-webkit-user-select:none;user-select:none;z-index:1;position:absolute;top:140px;width:100%;max-width:2000px;margin:auto;left:0;right:0;min-height:calc(100vh - 140px)}.shopping.left[_ngcontent-%COMP%]{max-width:350px;bottom:13%}@media (min-width: 1280px){.shopping.left[_ngcontent-%COMP%]{width:calc(50vw - 545px);margin-left:-12px}}@media (min-width: 1440px){.shopping.left[_ngcontent-%COMP%]{width:calc(50vw - 615px);margin-left:-40px}}.shopping.right[_ngcontent-%COMP%]{max-width:330px;top:0;right:0}@media (min-width: 1280px){.shopping.right[_ngcontent-%COMP%]{width:calc(50vw - 545px);margin-right:-12px}}@media (min-width: 1440px){.shopping.right[_ngcontent-%COMP%]{width:calc(50vw - 620px);margin-right:-35px}}.bidding.left[_ngcontent-%COMP%]{max-width:370px;top:5px}@media (min-width: 1280px){.bidding.left[_ngcontent-%COMP%]{width:calc(50vw - 528px);margin-left:-30px}}@media (min-width: 1440px){.bidding.left[_ngcontent-%COMP%]{width:calc(50vw - 595px);margin-left:-65px}}.bidding.right[_ngcontent-%COMP%]{max-width:340px;bottom:3%;right:0}@media (min-width: 1280px){.bidding.right[_ngcontent-%COMP%]{width:calc(50vw - 545px);margin-right:-12px}}@media (min-width: 1440px){.bidding.right[_ngcontent-%COMP%]{width:calc(50vw - 625px);margin-right:-40px}}.dragon-jumping[_ngcontent-%COMP%]{animation:3s dragon-jumping 2s linear forwards infinite}@keyframes dragon-jumping{0%{transform:translateY(0)}25%{transform:translateY(-10px)}50%{transform:translateY(0)}to{transform:translateY(0)}}.dragon-scaling[_ngcontent-%COMP%]{animation:6s dragon-scaling 4s linear forwards infinite}@keyframes dragon-scaling{0%{transform:scale(1)}15%{transform:scale(1.05) translateY(-3px) translate(var(--distance))}30%{transform:scale(1)}to{transform:scale(1)}}"]}),s})()},49127:(P,u,e)=>{e.d(u,{H:()=>x});var o=e(24837),a=e(94650);let x=(()=>{class c{constructor(_){this.toolbar=_.nativeElement}ngAfterViewInit(){if(o.Z.isServer)return;const _=setInterval(()=>{if(this.toolbar.shadowRoot){let d=this.toolbar.shadowRoot.querySelector(".toolbar-container");d&&(d.style.contain="none",d.style.overflow="visible",clearInterval(_))}},100)}}return c.\u0275fac=function(_){return new(_||c)(a.Y36(a.SBq))},c.\u0275dir=a.lG2({type:c,selectors:[["","appOverflowVisible",""]]}),c})()},70957:(P,u,e)=>{e.d(u,{V:()=>p});var o=e(36895),a=e(94650),x=e(7507),c=e(95133);let p=(()=>{class _{constructor(f,v,E){this.content=f,this.router=v,this.platformId=E,(0,o.NF)(this.platformId)&&(this.subscription=this.router.events.subscribe(M=>{M instanceof x.m2&&this.content.scrollToTop(500)}))}ngOnDestroy(){this.subscription?.unsubscribe()}}return _.\u0275fac=function(f){return new(f||_)(a.Y36(c.W2),a.Y36(x.F0),a.Y36(a.Lbi))},_.\u0275dir=a.lG2({type:_,selectors:[["","scrollTop",""]]}),_})()}}]);