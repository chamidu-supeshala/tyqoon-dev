"use strict";(self.webpackChunkangular_tyqoon_client=self.webpackChunkangular_tyqoon_client||[]).push([[1189],{81189:(U,M,n)=>{n.d(M,{N:()=>y});var u=n(15861),e=n(94650),O=n(5565),b=n(87692),v=n(45329),E=n(13055),h=n(24006),m=n(95133),p=n(36895),T=n(99605),D=n(71034),C=n(23841),P=n(54463);function Z(d,c){if(1&d&&(e.TgZ(0,"div",30)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"number"),e.qZA()()),2&d){const o=c.ngIf;e.xp6(2),e.hij(" ",e.lcZ(3,2,"available-balance")," "),e.xp6(3),e.hij(" \uffe5",e.xi3(6,4,(null==o.user?null:o.user.balance)||0,"1.2-2")," ")}}const A=function(d){return{user:d}};function g(d,c){if(1&d){const o=e.EpF();e.TgZ(0,"div",6)(1,"div",7),e._UZ(2,"img",8),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"button",9),e.NdJ("click",function(){e.CHM(o),e.oxw();const i=e.MAs(1);return e.KtG(i.dismiss())}),e.O4$(),e.TgZ(7,"svg",10),e._UZ(8,"path",11),e.qZA()()(),e.kcU(),e.TgZ(9,"div",12)(10,"div",13),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",14)(14,"div",15)(15,"div",16),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",17),e._UZ(19,"img",18),e.TgZ(20,"ion-input",19),e.NdJ("ngModelChange",function(i){e.CHM(o);const r=e.oxw();return e.KtG(r.amount=i)})("ionChange",function(i){e.CHM(o);const r=e.oxw();return e.KtG(r.handleChange(i))}),e.qZA()(),e.YNc(21,Z,7,7,"div",20),e.ALo(22,"async"),e.qZA(),e.TgZ(23,"div",21)(24,"div",22)(25,"app-send-assets",23),e.NdJ("onCloseAllModals",function(){e.CHM(o),e.oxw();const i=e.MAs(1);return e.KtG(i.dismiss())}),e.qZA()(),e.TgZ(26,"button",24),e.NdJ("click",function(){e.CHM(o);const i=e.oxw(),r=e.MAs(1);return e.KtG(i.handleOpenPaymentModal(r))}),e._UZ(27,"app-download-icon",25),e.TgZ(28,"span",26),e._uU(29),e.ALo(30,"translate"),e.qZA()()()(),e.TgZ(31,"div",27)(32,"button",28),e.NdJ("click",function(){e.CHM(o),e.oxw();const i=e.MAs(1);return e.KtG(i.dismiss())}),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"button",29),e.NdJ("click",function(){e.CHM(o);const i=e.oxw(),r=e.MAs(1);return e.KtG(i.handleOpenRedeemModal(r))}),e._uU(36),e.ALo(37,"translate"),e.qZA()()()}if(2&d){const o=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,11,"store-credits-title")),e.xp6(7),e.hij(" ",e.lcZ(12,13,"deposit-store-credit-to-use-on-the-tyqoon-shop")," "),e.xp6(5),e.hij(" ",e.lcZ(17,15,"deposit-amount")," "),e.xp6(4),e.Q6J("ngModel",o.amount)("min",0),e.xp6(1),e.Q6J("ngIf",e.VKq(25,A,e.lcZ(22,17,o.userService.userInfo$))),e.xp6(4),e.Q6J("assetType",o.sendAssetsType),e.xp6(1),e.Q6J("disabled",o.amount<=0),e.xp6(3),e.hij(" ",e.lcZ(30,19,"deposit")," "),e.xp6(4),e.hij(" ",e.lcZ(34,21,"close")," "),e.xp6(3),e.hij(" ",e.lcZ(37,23,"store-credit-redeem-code-modal-button")," ")}}let y=(()=>{class d extends O.V{constructor(o){super(),this.userService=o,this.isOpenChange=new e.vpe,this.amount=0,this.amountChange=new e.vpe,this.isOpenPaymentMethodModal=!1,this.isOpenRedeemModal=!1,this.availableBalance=0,this.sendAssetsType=b.pz.Credits}handleChange(o){this.amountChange.emit(parseFloat(o.target.value))}handleBack(){this.isOpen=!0,this.isOpenChange.emit(!0)}handleOpenPaymentModal(o){var s=this;return(0,u.Z)(function*(){s.amount<=0||(yield o.dismiss(),s.isOpenPaymentMethodModal=!0)})()}handleOpenRedeemModal(o){var s=this;return(0,u.Z)(function*(){yield o.dismiss(),s.isOpenRedeemModal=!0})()}}return d.\u0275fac=function(o){return new(o||d)(e.Y36(v.K))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-deposit-credit-modal"]],inputs:{isOpen:"isOpen",amount:"amount"},outputs:{isOpenChange:"isOpenChange",amountChange:"amountChange"},features:[e.qOj],decls:12,vars:10,consts:[[3,"isOpen","didDismiss"],["modal",""],[3,"amount","isOpen","back","isOpenChange"],["total","",1,"flex","justify-between","font-bold","text-2xl"],[1,"mr-2"],[3,"isOpen","isOpenChange"],[1,"flex","bg-[#f4f4f4]","items-center","p-2"],[1,"fade-in-from-right","flex-1","font-bold","text-3xl","flex",2,"--duration","200ms"],["src","assets/images/cny-inverted.png","alt","Store Credits",1,"h-6","sm:h-8","mr-1","mt-[3px]","sm:mt-0.5"],[1,"w-8","p-1","rounded","cursor-pointer","bg-[#ff2145]","text-white",3,"click"],["version","1.1","viewBox","0 0 100 100","overflow","visible","enable-background","new 0 0 100 100"],["stroke","currentColor","stroke-width","12","stroke-linecap","square","d","M 10,10 90,90 M 10,90 90,10"],[1,"p-4"],[1,"font-medium"],[1,"w-full","px-1","sm:px-4","sm:w-4/5","mx-auto","mt-4","sm:mt-9"],[1,"fade-in-from-right","flex","w-full","flex-col",2,"--duration","200ms","--delay","150ms"],[1,"font-medium","mb-1"],[1,"border","border-[#dddddd]","flex","items-center","px-2","py-1","rounded-md"],["src","assets/images/cny-inverted.png","alt","",1,"h-8"],["type","number",1,"flex-1","h-10","font-bold","text-3xl","text-right",3,"ngModel","min","ngModelChange","ionChange"],["class","mt-1.5 flex w-full justify-between font-medium text-gray-500",4,"ngIf"],[1,"mt-4","flex","w-full","space-x-2"],[1,"block","fade-in-from-top","w-full",2,"--duration","200ms","--delay","150ms"],[3,"assetType","onCloseAllModals"],["appRippleEffect","",1,"fade-in-from-top","deposit-button","relative","font-medium","m-0","h-14","border-2","border-solid","rounded-md","w-full","text-white",2,"--duration","200ms","--delay","150ms",3,"disabled","click"],[1,"absolute","left-2","sm:left-6","w-6","sm:w-7","mt-1","sm:mt-0"],[1,"text-xl","xs:text-2xl","ml-5","sm:ml-7"],[1,"flex","flex-col-reverse","xs:flex-row","gap-2","xs:gap-0","justify-between","px-1","sm:px-2","mt-8","sm:mt-12","sm:mb-2"],["appRippleEffect","",1,"fade-in-from-right","close-button","px-5","w-auto","sm:w-44","font-medium","border","border-solid","rounded-md","h-14",2,"--duration","300ms","--delay","200ms",3,"click"],["appRippleEffect","",1,"fade-in-from-left","redeem-button","ml-2","flex-1","text-black","font-medium","flex","items-center","justify-center","px-4","rounded-md","h-14","capitalize",2,"--duration","300ms","--delay","300ms",3,"click"],[1,"mt-1.5","flex","w-full","justify-between","font-medium","text-gray-500"]],template:function(o,s){1&o&&(e.TgZ(0,"ion-modal",0,1),e.NdJ("didDismiss",function(){return s.isOpenChange.emit(!1)}),e.YNc(2,g,38,27,"ng-template"),e.qZA(),e.TgZ(3,"app-payment-method-modal",2),e.NdJ("back",function(){return s.handleBack()})("isOpenChange",function(r){return s.isOpenPaymentMethodModal=r}),e.TgZ(4,"div",3)(5,"div",4),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div"),e._uU(9),e.ALo(10,"currency"),e.qZA()()(),e.TgZ(11,"app-redeem-code-modal",5),e.NdJ("isOpenChange",function(r){return s.isOpenRedeemModal=r}),e.qZA()),2&o&&(e.Q6J("isOpen",s.isOpen),e.xp6(3),e.Q6J("amount",s.amount)("isOpen",s.isOpenPaymentMethodModal),e.xp6(3),e.Oqu(e.lcZ(7,6,"total")),e.xp6(3),e.Oqu(e.lcZ(10,8,s.amount)),e.xp6(2),e.Q6J("isOpen",s.isOpenRedeemModal))},dependencies:[E.U,h.JJ,h.On,m.pK,m.ki,m.as,p.O5,T.T,D.x,C.x,p.Ov,p.JJ,p.H9,P.X$],styles:["ion-modal[_ngcontent-%COMP%]{--width: 610px;--background: white;--border-radius: 15px}ion-input[_ngcontent-%COMP%]{--padding-bottom: 0px;--padding-top: 0px}ion-input[_ngcontent-%COMP%]     input{border-radius:0!important}ion-input[_ngcontent-%COMP%]     input::-webkit-outer-spin-button, ion-input[_ngcontent-%COMP%]     input::-webkit-inner-spin-button{margin-left:10px}ion-input[_ngcontent-%COMP%]     input[type=number]{-moz-appearance:textfield}app-send-assets[_ngcontent-%COMP%]     .send-button{width:100%}.deposit-button[_ngcontent-%COMP%]{border:1px solid #37ff73;background:#12c792}.redeem-button[_ngcontent-%COMP%]{background:#fbbd01;max-width:220px}@media (min-width: 640px){.redeem-button[_ngcontent-%COMP%]{max-width:260px}}.close-button[_ngcontent-%COMP%]{background-color:#d6d6eb;border-color:#b1b1c9}.close-button[_ngcontent-%COMP%], .redeem-button[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1.75rem}@media (min-width: 640px){.close-button[_ngcontent-%COMP%], .redeem-button[_ngcontent-%COMP%]{font-size:1.5rem;line-height:2rem}}button[disabled][_ngcontent-%COMP%]{color:#8d8d8d;background:rgba(237,235,235,.5);border-color:#ddd;cursor:default!important}"]}),d})()},71034:(U,M,n)=>{n.d(M,{x:()=>r});var u=n(15861),e=n(94650),O=n(77579),b=n(5565),v=n(78372),E=n(71884),h=n(63900),m=n(82722),p=n(87692),T=n(80164),D=n(45329),C=n(95133),P=n(81212),Z=n(59980),A=n(38461),g=n(24006),y=n(36895),d=n(65433),c=n(54463);function o(l,f){if(1&l&&e._UZ(0,"img",24),2&l){const t=e.oxw(2);e.Q6J("src",t.giftIcon,e.LSH)}}function s(l,f){if(1&l&&e._UZ(0,"img",25),2&l){const t=e.oxw(2);e.Q6J("src",t.giftIcon,e.LSH)}}function i(l,f){if(1&l){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3),e._UZ(3,"img",4),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.isOpenChange.emit(!1))}),e._UZ(7,"app-close-icon",6),e.qZA()(),e.TgZ(8,"ng-scrollbar",7)(9,"div",8)(10,"p",9),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"input",10,11),e.NdJ("ngModelChange",function(_){e.CHM(t);const x=e.oxw();return e.KtG(x.inputValue=_)})("ngModelChange",function(_){e.CHM(t);const x=e.oxw();return e.KtG(x.validateCode.next(_))}),e.qZA(),e.TgZ(15,"div",12)(16,"p",13),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"hr",14),e.qZA(),e.TgZ(20,"div",15)(21,"p",16),e.YNc(22,o,1,1,"img",17),e._uU(23),e.qZA(),e.TgZ(24,"p",18),e._uU(25),e.ALo(26,"translate"),e.qZA()(),e.TgZ(27,"div",19)(28,"p",20),e._uU(29," TOTAL: "),e.qZA(),e.TgZ(30,"p",21),e.YNc(31,s,1,1,"img",22),e._uU(32),e.qZA()(),e.TgZ(33,"button",23),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.sendData())}),e._uU(34),e.ALo(35,"translate"),e.qZA()()()()}if(2&l){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,12,"store-credit-redeem-code-modal-heading")," "),e.xp6(4),e.Q6J("autoHeightDisabled",!1),e.xp6(3),e.hij(" ",e.lcZ(12,14,"store-credit-redeem-code")," "),e.xp6(2),e.Q6J("ngModel",t.inputValue),e.xp6(4),e.hij(" ",e.lcZ(18,16,"details")," "),e.xp6(5),e.Q6J("ngIf",t.giftCodeType&&t.inputValue),e.xp6(1),e.hij(" ",t.amount||0," "),e.xp6(2),e.hij(" ",e.lcZ(26,18,"store-credit-redeem-code-modal-amount")," "),e.xp6(6),e.Q6J("ngIf",t.giftCodeType&&t.inputValue),e.xp6(1),e.hij(" ",t.amount||0," "),e.xp6(1),e.Q6J("disabled",0==t.amount||!t.amount||!t.inputValue),e.xp6(1),e.hij(" ",e.lcZ(35,20,"store-credit-redeem-code-modal-button")," ")}}let r=(()=>{class l extends b.V{constructor(t,a,_,x,R){super(),this.checkoutService=t,this.userService=a,this.toast=_,this.router=x,this.walletService=R,this.isOpenChange=new e.vpe,this.amount=0,this.loading={exchangeCode:!1},this.giftCodeType=null,this.validateCode=new O.x}get giftIcon(){return this.giftCodeType===p.pJ.Tickets?"assets/images/ticket.png":"/assets/images/cny-250px-min.png"}ngOnInit(){this.validateCode.pipe((0,v.b)(1e3),(0,E.x)(),(0,h.w)(t=>this.checkoutService.queryExchangeCodeAmount(t).pipe((0,m.R)(this.validateCode))),(0,m.R)(this.destroyStream$)).subscribe(t=>{0==t.code?(this.amount=t.data,this.giftCodeType=p.pJ.Credits):(this.giftCodeType=null,this.amount=0,this.toastError(t.message))})}toastSuccess(t){var a=this;return(0,u.Z)(function*(){yield a.presentToast({position:"bottom",message:t,duration:1e3,icon:"checkmark-circle-outline",color:"success"})})()}toastError(t){var a=this;return(0,u.Z)(function*(){yield a.presentToast({position:"bottom",message:t,icon:"alert-circle-outline",duration:1e3,color:"danger"})})()}presentToast(t){var a=this;return(0,u.Z)(function*(){yield(yield a.toast.create(t)).present()})()}sendData(){this.inputValue&&(this.loading.exchangeCode=!0,this.checkoutService.exchangeCode({code:this.inputValue}).pipe((0,m.R)(this.destroyStream$)).subscribe({next:a=>{0===a.code?(this.userService.updateUserInfo(),this.walletService.onWalletUpdate.next(!0),this.toastSuccess("\u5151\u6362\u6210\u529f"),this.isOpenChange.emit(!1)):this.toastError(a.message)},error:a=>{console.error(a)}}).add(()=>this.loading.exchangeCode=!1))}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(T.Z),e.Y36(D.K),e.Y36(C.yF),e.Y36(P.F0),e.Y36(Z.X))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-redeem-code-modal"]],inputs:{isOpen:"isOpen"},outputs:{isOpenChange:"isOpenChange"},features:[e.qOj],decls:2,vars:1,consts:[[3,"isOpen","didDismiss"],[1,"redeem-code-modal","flex","flex-col","rounded-[12px]","overflow-hidden"],["id","modal-header",1,"flex","items-center","bg-[#f4f4f4]","p-2","rounded-t-[12px]","w-full"],[1,"fade-in-from-right","flex-1","font-bold","text-2xl","md:text-3xl","flex","items-center",2,"--duration","200ms"],["src","assets/images/gift-new.png","alt","Gift Codes",1,"h-9","mr-2","mt-0.5","ticket-img"],[1,"rounded-[5px]","bg-[#ff2145]","p-1","ml-auto","w-[36px]","h-[36px]","flex","items-center","justify-center","outline-none",3,"click"],[1,"w-[24px]","text-white"],["visibility","hover",2,"max-height","85vh",3,"autoHeightDisabled"],["id","modal-body",1,"bg-white","w-full","h-full","px-4","pt-3","pb-5"],[1,"fade-in-from-left","font-medium","text-base","lg:text-lg","text-[#1c1c1c]",2,"--duration","200ms","--delay","100ms"],[1,"fade-in-from-top","pl-2","border","border-[#D4D4D4]","w-full","outline-none","rounded-[15px]","bg-transparent","font-bold","text-bold","h-[50px]","placeholder:text-[#1c1c1c]","text-[30px]","mb-4",2,"--duration","200ms","--delay","150ms","--distance","-50px",3,"ngModel","ngModelChange"],["redeemCodeInput",""],[1,"fade-in","flex","items-center","gap-8",2,"--duration","200ms","--delay","200ms"],[1,"font-medium","text-[14px]","lg:text-[16px]","text-[#c8c8c8]"],[1,"border-1","border-t","w-full","border-[#c8c8c8]"],[1,"fade-in","flex","items-center","justify-between","mb-2",2,"--duration","200ms","--delay","150ms"],[1,"font-bold","flex","items-center","text-[28px]","text-[#1c1c1c]"],["class","h-5 mb-px",3,"src",4,"ngIf"],[1,"font-medium","text-[14px]","lg:text-[16px]","text-[#414141]"],[1,"fade-in","flex","items-center","justify-between","mb-2","border-y","w-full","border-[#c8c8c8]","py-3",2,"--duration","200ms","--delay","100ms"],[1,"fade-in-from-left","font-medium","text-[28px]","text-[#1c1c1c]",2,"--duration","200ms","--delay","200ms"],[1,"fade-in-from-left","font-bold","flex","items-center","text-[28px]","text-[#1c1c1c]",2,"--duration","200ms","--delay","250ms"],["class","h-6 mb-px",3,"src",4,"ngIf"],["appRippleEffect","",1,"redeem-btn","mt-1.5","text-white","fade-in-from-bottom","border","border-solid","rounded-md","text-2xl","h-16","uppercase","font-medium","w-full",2,"--duration","300ms","--delay","250ms","--distance","50px",3,"disabled","click"],[1,"h-5","mb-px",3,"src"],[1,"h-6","mb-px",3,"src"]],template:function(t,a){1&t&&(e.TgZ(0,"ion-modal",0),e.NdJ("didDismiss",function(){return a.isOpenChange.emit(!1)}),e.YNc(1,i,36,22,"ng-template"),e.qZA()),2&t&&e.Q6J("isOpen",a.isOpen)},dependencies:[A.D,g.Fj,g.JJ,g.On,C.ki,y.O5,d.KC,c.X$],styles:[".redeem-code-modal[_ngcontent-%COMP%]{width:500px;max-width:95vw}ion-button[_ngcontent-%COMP%]{--padding-top: 15px;--padding-bottom: 15px}.redeem-btn[_ngcontent-%COMP%]{background:#ff6410}.redeem-btn[_ngcontent-%COMP%]:disabled{color:#8d8d8d;background:rgba(237,235,235,.5);border-color:#ddd;cursor:default!important}"]}),l})()}}]);