"use strict";(self.webpackChunkangular_tyqoon_client=self.webpackChunkangular_tyqoon_client||[]).push([[5812],{83661:(L,v,n)=>{n.d(v,{g:()=>w});var t=n(15861),g=n(5963),a=n(82722),h=n(49808),u=n(24837),p=n(95133),M=n(54463),f=n(36895),x=n(44466),l=n(59809),P=n(5565),_=n(18110),D=n(7507),i=n(94650),e=n(94830),S=n(56889),B=n(23284),T=n(90147);function I(d,O){if(1&d&&i._UZ(0,"app-product-card",6),2&d){const o=O.$implicit,s=i.oxw().ngLet,m=i.oxw().ngLet;i.Q6J("product",o)("isBiddingMode",!!s)("isLogin",!!m)}}function A(d,O){1&d&&i._UZ(0,"app-product-card-skeleton",8)}const b=function(){return[]};function y(d,O){if(1&d&&(i.ynx(0),i.YNc(1,A,1,0,"app-product-card-skeleton",7),i.BQk()),2&d){const o=i.oxw(3);i.xp6(1),i.Q6J("ngForOf",i.DdM(2,b).constructor(o.pageSize).fill(1))("ngForTrackBy",o.trackByFn2)}}function U(d,O){if(1&d&&(i.TgZ(0,"div",3),i.YNc(1,I,1,3,"app-product-card",4),i.YNc(2,y,2,3,"ng-container",5),i.qZA()),2&d){const o=i.oxw(2);i.xp6(1),i.Q6J("ngForOf",o.products)("ngForTrackBy",o.trackByFn),i.xp6(1),i.Q6J("ngIf",o.isLoading&&!o.products.length)}}function R(d,O){if(1&d&&(i.TgZ(0,"div"),i.YNc(1,U,3,3,"div",2),i.ALo(2,"async"),i.qZA()),2&d){const o=i.oxw();i.xp6(1),i.Q6J("ngLet",i.lcZ(2,1,o.biddingService.isBiddingMode$))}}let w=(()=>{class d extends P.V{constructor(o,s,m){super(),this.userService=o,this.biddingService=s,this.cdr=m,this.additionalParams={},this.isSSR=!1,this.biddingProductsSortOrder=0,this.pageSize=18,this.page=-1,this.isLoading=!1,this.total=0,this.products=[]}ngOnInit(){!this.isSSR&&u.Z.isServer?this.isLoading=!0:(this.page=0,this.total=0,this.products=[],this.fetchData(),this.initPoll())}ngOnDestroy(){super.ngOnDestroy(),this.stopPoll()}initPoll(){u.Z.isBrowser&&(this.stopPoll(),this.pollSubscription=(0,g.H)(1e4,1e4).pipe((0,a.R)(this.destroyStream$)).subscribe(()=>{this.biddingService.isBiddingInProgress||this.fetchData()}))}stopPoll(){this.pollSubscription&&this.pollSubscription.unsubscribe()}fetchData(){var o=this;return(0,t.Z)(function*(){if(console.log("Fetch Recommended Products"),!o.isLoading){o.isLoading=!0;const s=yield(0,h.n)(o.biddingService.getProductsWithPoolInfo({page:o.page,rows:o.pageSize,sortType:o.biddingProductsSortOrder,isRecommended:!0,...o.additionalParams}));s.rows=(0,_.DI)(s.rows||[]),o.biddingService.isBiddingInProgress||(o.products=[...s.rows]),o.total=s.total,o.isLoading=!1}})()}clear(){this.page=0,this.isLoading=!1,this.total=0,this.products=[]}trackByFn(o,s){return s.id}trackByFn2(o){return o}}return d.\u0275fac=function(o){return new(o||d)(i.Y36(e.K),i.Y36(S.g),i.Y36(i.sBO))},d.\u0275cmp=i.Xpm({type:d,selectors:[["app-bidding-products-list"]],inputs:{additionalParams:"additionalParams",isSSR:"isSSR",biddingProductsSortOrder:"biddingProductsSortOrder",pageSize:"pageSize"},standalone:!0,features:[i.qOj,i.jDz],decls:5,vars:7,consts:[[4,"ngLet"],[1,"px-6","py-1","capitalize","mx-auto","mt-4","mb-2","see-more","block","w-fit","border","border-solid","rounded-lg","text-2xl","text-center","font-medium","text-white",3,"routerLink"],["class","grid grid-cols-2 xs:grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-x-2 gap-y-6",4,"ngLet"],[1,"grid","grid-cols-2","xs:grid-cols-3","sm:grid-cols-4","md:grid-cols-5","lg:grid-cols-6","gap-x-2","gap-y-6"],["class","block",3,"product","isBiddingMode","isLogin",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"block",3,"product","isBiddingMode","isLogin"],["class","block",4,"ngFor","ngForOf","ngForTrackBy"],[1,"block"]],template:function(o,s){1&o&&(i.YNc(0,R,3,3,"div",0),i.ALo(1,"async"),i.TgZ(2,"a",1),i._uU(3),i.ALo(4,"translate"),i.qZA()),2&o&&(i.Q6J("ngLet",i.lcZ(1,3,s.userService.userInfo$)),i.xp6(2),i.Q6J("routerLink","product/search"),i.xp6(1),i.hij(" ",i.lcZ(4,5,"see-more"),"\n"))},dependencies:[M.aw,M.X$,f.ez,f.sg,f.O5,f.Ov,p.Pc,p.Fo,x.m,B.Y,T.h,l.I,D.Bz,D.yS],styles:[".see-more[_ngcontent-%COMP%]{background:linear-gradient(to right,#8467ff 0%,#eb00ff 100%);border-color:#9d2ec3;min-width:160px}.see-more[_ngcontent-%COMP%]:hover{color:#fff;background:linear-gradient(to right,#7454ff 0%,#bb00cb 100%)}"]}),d})()},69158:(L,v,n)=>{n.d(v,{M:()=>x});var t=n(94650),g=n(36895),a=n(95133),h=n(7507),u=n(54463);const p=function(){return["/product","detail"]},M=function(l,P){return{id:l,poolId:P}};function f(l,P){if(1&l&&(t.TgZ(0,"a",1)(1,"div",2)(2,"div",3),t._UZ(3,"img",4),t.qZA(),t.TgZ(4,"div",5)(5,"div",6),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",7)(9,"div",8),t._UZ(10,"img",9)(11,"img",10),t.qZA(),t.TgZ(12,"div",11),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"span",12),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",13),t._UZ(19,"img",14),t.TgZ(20,"div",15),t._uU(21),t.qZA()()()()()),2&l){const _=t.oxw();t.Q6J("routerLink",t.DdM(14,p))("queryParams",t.WLB(15,M,_.winner.productId,_.winner.poolId)),t.xp6(3),t.Q6J("src",_.winner.productImage,t.LSH),t.xp6(3),t.hij(" ",t.lcZ(7,8,_.winner.productName)," "),t.xp6(4),t.Q6J("src",_.winner.winnerAvatar,t.LSH),t.xp6(3),t.hij(" ",t.lcZ(14,10,_.winner.winnerId)," "),t.xp6(3),t.Oqu(t.lcZ(17,12,"pool-winner")),t.xp6(5),t.hij(" ",_.winner.ticketId," ")}}let x=(()=>{class l{constructor(){}}return l.\u0275fac=function(_){return new(_||l)},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-bidding-winner-card"]],inputs:{winner:"winner"},decls:1,vars:1,consts:[["class","winner-card rounded-xl flex border border-slate-300 text-xs items-center cursor-pointer",3,"routerLink","queryParams",4,"ngIf"],[1,"winner-card","rounded-xl","flex","border","border-slate-300","text-xs","items-center","cursor-pointer",3,"routerLink","queryParams"],[1,"flex","gap-1","w-full"],[1,"product","ml-1.5","mr-1","rounded-xl"],[1,"object-cover","rounded-lg",3,"src"],[1,"winner-info","flex","flex-col","justify-start","items-start","gap-1"],[1,"product-name","font-medium","text-left","pr-1.5","mb-0.5"],[1,"font-medium","flex","flex-nowrap","items-center","mt-px"],[1,"relative"],[1,"object-cover","rounded-full","avatar",3,"src"],["src","assets/images/golden-crown-100px.png","srcset","assets/images/golden-crown-100px.png 1x, assets/images/golden-crown-250px.png 2x",1,"absolute","crown"],[1,"truncate","ml-1"],[1,"tag","capitalize",2,"--color","#FFDC3F"],[1,"font-medium","flex","flex-nowrap","items-center"],["src","assets/images/ticket.png",1,"ticket-image","object-cover"],[1,"ticket","truncate","text-left","ml-1"]],template:function(_,D){1&_&&t.YNc(0,f,22,18,"a",0),2&_&&t.Q6J("ngIf",D.winner)},dependencies:[g.O5,a.Fo,h.yS,u.X$],styles:['.winner-card[_ngcontent-%COMP%]{height:100px;background-color:#f5f8f9;color:#333}.winner-card[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:88px;width:88px!important;height:88px}.winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%], .winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .ticket-image[_ngcontent-%COMP%]{width:20px!important;height:20px;min-width:20px}.winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .ticket[_ngcontent-%COMP%]{width:130px}.winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:break-spaces}.winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .crown[_ngcontent-%COMP%]{top:-9px;width:13px;left:0;right:0;margin-left:auto;margin-right:auto}.winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{display:inline-block;z-index:1;text-align:center;color:#000;height:20px;position:relative;border-left:none;background-color:var(--color);min-width:50px;margin-left:12px;padding-left:6px;border-radius:0 4px 4px 0;font-size:14px;line-height:20px;padding-right:6px;transform:scale(.9)}.winner-card[_ngcontent-%COMP%]   .winner-info[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]:before{content:"";z-index:-1;position:absolute;top:3px;left:-7px;width:14px;height:14px;background-color:var(--color);border-right:none;border-top:none;transform:rotate(45deg)}']}),l})()},85898:(L,v,n)=>{n.d(v,{b:()=>o});var t=n(15861),g=n(77579),a=n(82722),h=n(59468),u=n(49808),p=n(24837),M=n(95133),f=n(54463),x=n(36895),l=n(44466),P=n(59809),_=n(5565),D=n(18110),i=n(7507),e=n(94650),S=n(35482),B=n(94830),T=n(56889),I=n(23284),A=n(90147);function b(s,m){if(1&s&&e._UZ(0,"app-product-card",6),2&s){const r=m.$implicit,c=e.oxw().ngLet,E=e.oxw().ngLet;e.Q6J("product",r)("isBiddingMode",!!c)("isLogin",!!E)}}function y(s,m){1&s&&e._UZ(0,"app-product-card-skeleton",8)}const U=function(){return[]};function R(s,m){if(1&s&&(e.ynx(0),e.YNc(1,y,1,0,"app-product-card-skeleton",7),e.BQk()),2&s){const r=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",e.DdM(2,U).constructor(r.pageSize).fill(1))("ngForTrackBy",r.trackByFn2)}}function w(s,m){if(1&s&&(e.TgZ(0,"div",3),e.YNc(1,b,1,3,"app-product-card",4),e.YNc(2,R,2,3,"ng-container",5),e.qZA()),2&s){const r=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",r.products)("ngForTrackBy",r.trackByFn),e.xp6(1),e.Q6J("ngIf",r.isLoading)}}function d(s,m){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,w,3,3,"div",2),e.ALo(2,"async"),e.qZA()),2&s){const r=e.oxw();e.xp6(1),e.Q6J("ngLet",e.lcZ(2,1,r.biddingService.isBiddingMode$))}}function O(s,m){1&s&&(e.TgZ(0,"a",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.Q6J("routerLink","product/search"),e.xp6(1),e.hij(" ",e.lcZ(2,2,"see-more"),"\n"))}let o=(()=>{class s extends _.V{constructor(r,c,E,C){super(),this.productService=r,this.userService=c,this.biddingService=E,this.cdr=C,this.offsetScroll=2e3,this.additionalParams={},this.isSSR=!1,this.biddingProductsSortOrder=0,this.shoppingModePageSize=20,this.biddingModePageSize=18,this.throttleScroll=new g.x,this.pageSize=20,this.page=-1,this.isLoading=!1,this.total=0,this.products=[],this.isBiddingMode=!1,this.scrollActive$=new g.x}ngOnInit(){console.log(8787878,this.biddingProductsSortOrder),!this.isSSR&&p.Z.isServer?this.isLoading=!0:this.biddingService.isBiddingMode$.pipe((0,a.R)(this.destroyStream$)).subscribe(r=>{this.isBiddingMode=r,this.page=-1,this.products=[],this.pageSize=this.isBiddingMode?this.biddingModePageSize:this.shoppingModePageSize,this.cdr.detectChanges(),this.refreshProducts(),this.initInfiniteScrolling()})}ngOnDestroy(){super.ngOnDestroy(),this.clearSubscriptions()}clearSubscriptions(){this.scrollActive$?.next(!1),this.scrollActive$?.complete()}ngAfterViewInit(){p.Z.isServer||this.initInfiniteScrolling()}initInfiniteScrolling(){var r=this;return(0,t.Z)(function*(){r.clearSubscriptions(),r.scrollContainer&&!r.isBiddingMode&&(r.scrollActive$=new g.x,r.scrollElement=yield r.scrollContainer.getScrollElement(),r.scrollContainer.ionScroll.pipe((0,a.R)(r.scrollActive$)).subscribe(c=>{r.scrollElement.scrollHeight-c.detail.scrollTop<r.offsetScroll&&r.throttleScroll.next(1)}),r.throttleScroll.pipe((0,h.p)(300),(0,a.R)(r.scrollActive$)).subscribe(()=>{r.fetchData()}))})()}ngOnChanges(r){}refreshProducts(){this.page=-1,this.total=0,this.products=[],this.fetchData()}fetchData(r=null){var c=this;return(0,t.Z)(function*(){const E=r??c.page+1;if(!c.isLoading&&(0===E||c.products.length<c.total)){c.isLoading=!0,c.page=E,c.cdr.markForCheck();const C=c.isBiddingMode?yield(0,u.n)(c.biddingService.getProductsWithPoolInfo({page:c.page,rows:c.pageSize,sortType:c.biddingProductsSortOrder,isRecommended:!0,...c.additionalParams})):yield(0,u.n)(c.productService.getProductsByMetaParamsV2({page:c.page,rows:c.pageSize,traceId:c.userService.traceId,isRecommended:!0,...c.additionalParams}));C.rows=(0,D.DI)(C.rows||[]),c.products=[...c.products,...C.rows||[]],c.total=C.total,c.isLoading=!1,c.cdr.markForCheck()}})()}clear(){this.page=-1,this.isLoading=!1,this.total=0,this.products=[]}trackByFn(r,c){return c.id}trackByFn2(r){return r}}return s.\u0275fac=function(r){return new(r||s)(e.Y36(S.s),e.Y36(B.K),e.Y36(T.g),e.Y36(e.sBO))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-products-infinite-scroll"]],inputs:{scrollContainer:"scrollContainer",offsetScroll:"offsetScroll",additionalParams:"additionalParams",isSSR:"isSSR",biddingProductsSortOrder:"biddingProductsSortOrder",shoppingModePageSize:"shoppingModePageSize",biddingModePageSize:"biddingModePageSize"},standalone:!0,features:[e.qOj,e.TTD,e.jDz],decls:3,vars:4,consts:[[4,"ngLet"],["class","px-6 py-1 capitalize mx-auto mt-4 mb-2 see-more block w-fit border border-solid rounded-lg text-2xl text-center font-medium text-white",3,"routerLink",4,"ngIf"],["class","grid grid-cols-2 xs:grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-x-2 gap-y-6",4,"ngLet"],[1,"grid","grid-cols-2","xs:grid-cols-3","sm:grid-cols-4","md:grid-cols-5","lg:grid-cols-6","gap-x-2","gap-y-6"],["class","block",3,"product","isBiddingMode","isLogin",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"block",3,"product","isBiddingMode","isLogin"],["class","block",4,"ngFor","ngForOf","ngForTrackBy"],[1,"block"],[1,"px-6","py-1","capitalize","mx-auto","mt-4","mb-2","see-more","block","w-fit","border","border-solid","rounded-lg","text-2xl","text-center","font-medium","text-white",3,"routerLink"]],template:function(r,c){1&r&&(e.YNc(0,d,3,3,"div",0),e.ALo(1,"async"),e.YNc(2,O,3,4,"a",1)),2&r&&(e.Q6J("ngLet",e.lcZ(1,2,c.userService.userInfo$)),e.xp6(2),e.Q6J("ngIf",c.isBiddingMode))},dependencies:[f.aw,f.X$,x.ez,x.sg,x.O5,x.Ov,M.Pc,M.Fo,l.m,I.Y,A.h,P.I,i.Bz,i.yS],styles:[".see-more[_ngcontent-%COMP%]{background:linear-gradient(to right,#8467ff 0%,#eb00ff 100%);border-color:#9d2ec3;min-width:160px}.see-more[_ngcontent-%COMP%]:hover{color:#fff;background:linear-gradient(to right,#7454ff 0%,#bb00cb 100%)}"],changeDetection:0}),s})()},59809:(L,v,n)=>{n.d(v,{I:()=>g});var t=n(94650);let g=(()=>{class a{}return a.\u0275fac=function(u){return new(u||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-product-card-skeleton"]],standalone:!0,features:[t.jDz],decls:9,vars:0,consts:[[1,"cursor-pointer","flex","flex-col","w-full","max-w-[246px]","lg:max-w-[220px]","xl:max-w-[245px]"],[1,"relative","w-full","mb-2",2,"padding-top","100%"],[1,"absolute","inset-0","pulSate","rounded-lg"],[1,"product-title","truncate","mb-1","pulSate","text-sm",2,"letter-spacing","20px"],[1,"text-xs","leading-3","text-center","pulSate",2,"letter-spacing","20px"],[1,"text-base","text-center","pulSate",2,"letter-spacing","20px"]],template:function(u,p){1&u&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.qZA(),t.TgZ(3,"p",3),t._uU(4," \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),t.qZA(),t.TgZ(5,"p",4),t._uU(6," \xa0\xa0 "),t.qZA(),t.TgZ(7,"p",5),t._uU(8," \xa0\xa0 "),t.qZA()())}}),a})()},70957:(L,v,n)=>{n.d(v,{V:()=>u});var t=n(36895),g=n(94650),a=n(7507),h=n(95133);let u=(()=>{class p{constructor(f,x,l){this.content=f,this.router=x,this.platformId=l,(0,t.NF)(this.platformId)&&(this.subscription=this.router.events.subscribe(P=>{P instanceof a.m2&&this.content.scrollToTop(500)}))}ngOnDestroy(){this.subscription?.unsubscribe()}}return p.\u0275fac=function(f){return new(f||p)(g.Y36(h.W2),g.Y36(a.F0),g.Y36(g.Lbi))},p.\u0275dir=g.lG2({type:p,selectors:[["","scrollTop",""]]}),p})()}}]);